{"ast":null,"code":"import{makeStyles,Table,TableBody,TableCell,TableContainer,TableHead,TableRow}from\"@material-ui/core\";import{AddCircle,RemoveCircle}from\"@material-ui/icons\";import{cloneDeep}from\"lodash\";import React from\"react\";import{d}from\"../../locale/LocaleManager\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var createColor=function createColor(paletteColor,palette){return{color:paletteColor.main,cursor:\"pointer\",\"&:hover\":{color:paletteColor.dark}};};var useStyles=makeStyles(function(_ref){var breakpoints=_ref.breakpoints,palette=_ref.palette;return{addGreen:createColor(palette.success,palette),removeRead:createColor(palette.error,palette),tableContainer:{marginTop:5,maxHeight:790,marginBottom:10},tableHead:{backgroundColor:\"#F2F5F7\"},tableCell:{textAlign:\"center\",maxWidth:200,wordBreak:\"break-all\"},liCon:{textAlign:\"left\",textOverflow:\"ellipsis\",overflow:\"hidden\",whiteSpace:\"nowrap\",listStylePosition:\"inside\"}};});var stopPropagation=function stopPropagation(handler){return function(e){e.stopPropagation();if(handler)return handler(e);};};export default function OutcomeTable(props){var outcomeList=props.outcomeList,value=props.value,onChange=props.onChange,canEdit=props.canEdit,onClickOutcome=props.onClickOutcome;var css=useStyles();var handleAction=function handleAction(item,type){var id=item.ancestor_id;if(type===\"add\"){if(id&&value){onChange&&onChange(value.concat([item]));}}else{if(id&&value){var newValue=cloneDeep(value);newValue=newValue.filter(function(v){return v.ancestor_id!==id;});onChange&&onChange(newValue);}}};var rows=outcomeList&&outcomeList.map(function(item){var _item$sets;return/*#__PURE__*/_jsxs(TableRow,{onClick:function onClick(e){return onClickOutcome(item.outcome_id);},children:[/*#__PURE__*/_jsx(TableCell,{className:css.tableCell,children:item.outcome_name}),/*#__PURE__*/_jsx(TableCell,{className:css.tableCell,children:item.shortcode}),/*#__PURE__*/_jsx(TableCell,{className:css.tableCell,children:item.assumed?d(\"Yes\").t(\"assess_label_yes\"):\"\"}),/*#__PURE__*/_jsx(TableCell,{className:css.tableCell,children:/*#__PURE__*/_jsx(\"ul\",{children:(_item$sets=item.sets)===null||_item$sets===void 0?void 0:_item$sets.map(function(item,index){return/*#__PURE__*/_jsx(\"li\",{className:css.liCon,children:item.set_name},\"\".concat(index).concat(item.set_name));})})}),/*#__PURE__*/_jsx(TableCell,{className:css.tableCell,children:canEdit&&(value&&value[0]?value!==null&&value!==void 0&&value.map(function(v){return v.ancestor_id;})&&(value===null||value===void 0?void 0:value.map(function(v){return v.ancestor_id;}).indexOf(item.ancestor_id))<0?/*#__PURE__*/_jsx(AddCircle,{className:css.addGreen,onClick:stopPropagation(function(e){return handleAction(item,\"add\");})}):/*#__PURE__*/_jsx(RemoveCircle,{className:css.removeRead,onClick:stopPropagation(function(e){return handleAction(item,\"remove\");})}):/*#__PURE__*/_jsx(AddCircle,{className:css.addGreen,onClick:stopPropagation(function(e){return handleAction(item,\"add\");})}))})]},item.outcome_id);});return/*#__PURE__*/_jsx(TableContainer,{className:css.tableContainer,children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{className:css.tableHead,children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{className:css.tableCell,children:d(\"Learning Outcomes\").t(\"library_label_learning_outcomes\")}),/*#__PURE__*/_jsx(TableCell,{className:css.tableCell,children:d(\"Short Code\").t(\"assess_label_short_code\")}),/*#__PURE__*/_jsx(TableCell,{className:css.tableCell,children:d(\"Assumed\").t(\"assess_label_assumed\")}),/*#__PURE__*/_jsx(TableCell,{className:css.tableCell,children:d(\"Learning Outcome Set\").t(\"assess_set_learning_outcome_set\")}),/*#__PURE__*/_jsx(TableCell,{})]})}),/*#__PURE__*/_jsx(TableBody,{children:rows})]})});}","map":{"version":3,"names":["makeStyles","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","AddCircle","RemoveCircle","cloneDeep","React","d","createColor","paletteColor","palette","color","main","cursor","dark","useStyles","breakpoints","addGreen","success","removeRead","error","tableContainer","marginTop","maxHeight","marginBottom","tableHead","backgroundColor","tableCell","textAlign","maxWidth","wordBreak","liCon","textOverflow","overflow","whiteSpace","listStylePosition","stopPropagation","handler","e","OutcomeTable","props","outcomeList","value","onChange","canEdit","onClickOutcome","css","handleAction","item","type","id","ancestor_id","concat","newValue","filter","v","rows","map","outcome_id","outcome_name","shortcode","assumed","t","sets","index","set_name","indexOf"],"sources":["/Users/evik/kl/project-2024/klasmart-assessment-frontend/src/pages/MilestoneEdit/OutcomeTable.tsx"],"sourcesContent":["import { makeStyles, Table, TableBody, TableCell, TableContainer, TableHead, TableRow } from \"@material-ui/core\";\nimport { Palette, PaletteColor } from \"@material-ui/core/styles/createPalette\";\nimport { AddCircle, RemoveCircle } from \"@material-ui/icons\";\nimport { cloneDeep } from \"lodash\";\nimport React from \"react\";\nimport { GetOutcomeDetail, GetOutcomeList } from \"../../api/type\";\nimport { d } from \"../../locale/LocaleManager\";\nconst createColor = (paletteColor: PaletteColor, palette: Palette) => ({\n  color: paletteColor.main,\n  cursor: \"pointer\",\n  \"&:hover\": {\n    color: paletteColor.dark,\n  },\n});\nconst useStyles = makeStyles(({ breakpoints, palette }) => ({\n  addGreen: createColor(palette.success, palette),\n  removeRead: createColor(palette.error, palette),\n  tableContainer: {\n    marginTop: 5,\n    maxHeight: 790,\n    marginBottom: 10,\n  },\n  tableHead: {\n    backgroundColor: \"#F2F5F7\",\n  },\n  tableCell: {\n    textAlign: \"center\",\n    maxWidth: 200,\n    wordBreak: \"break-all\",\n  },\n  liCon: {\n    textAlign: \"left\",\n    textOverflow: \"ellipsis\",\n    overflow: \"hidden\",\n    whiteSpace: \"nowrap\",\n    listStylePosition: \"inside\",\n  },\n}));\n\nconst stopPropagation =\n  <T extends React.MouseEvent, R = void>(handler?: (arg: T) => R) =>\n  (e: T) => {\n    e.stopPropagation();\n    if (handler) return handler(e);\n  };\n\ninterface OutcomeTableProps {\n  outcomeList: GetOutcomeList;\n  value?: GetOutcomeList;\n  onChange?: (value: GetOutcomeList) => any;\n  canEdit: boolean;\n  onClickOutcome: (id: GetOutcomeDetail[\"outcome_id\"]) => any;\n}\nexport default function OutcomeTable(props: OutcomeTableProps) {\n  const { outcomeList, value, onChange, canEdit, onClickOutcome } = props;\n  const css = useStyles();\n\n  const handleAction = (item: GetOutcomeDetail, type: \"add\" | \"remove\") => {\n    const { ancestor_id: id } = item;\n    if (type === \"add\") {\n      if (id && value) {\n        onChange && onChange(value.concat([item]));\n      }\n    } else {\n      if (id && value) {\n        let newValue = cloneDeep(value);\n        newValue = newValue.filter((v) => v.ancestor_id !== id);\n        onChange && onChange(newValue);\n      }\n    }\n  };\n\n  const rows =\n    outcomeList &&\n    outcomeList.map((item) => (\n      <TableRow key={item.outcome_id} onClick={(e) => onClickOutcome(item.outcome_id)}>\n        <TableCell className={css.tableCell}>{item.outcome_name}</TableCell>\n        <TableCell className={css.tableCell}>{item.shortcode}</TableCell>\n        <TableCell className={css.tableCell}>{item.assumed ? d(\"Yes\").t(\"assess_label_yes\") : \"\"}</TableCell>\n        <TableCell className={css.tableCell}>\n          <ul>\n            {item.sets?.map((item, index) => (\n              <li className={css.liCon} key={`${index}${item.set_name}`}>\n                {item.set_name}\n              </li>\n            ))}\n          </ul>\n        </TableCell>\n        <TableCell className={css.tableCell}>\n          {canEdit &&\n            (value && value[0] ? (\n              value?.map((v) => v.ancestor_id) && value?.map((v) => v.ancestor_id).indexOf(item.ancestor_id) < 0 ? (\n                <AddCircle className={css.addGreen} onClick={stopPropagation((e) => handleAction(item, \"add\"))} />\n              ) : (\n                <RemoveCircle className={css.removeRead} onClick={stopPropagation((e) => handleAction(item, \"remove\"))} />\n              )\n            ) : (\n              <AddCircle className={css.addGreen} onClick={stopPropagation((e) => handleAction(item, \"add\"))} />\n            ))}\n          {/* {value && value[0] && value.indexOf(item.ancestor_id as string) < 0 ? (\n              <AddCircle className={css.addGreen} onClick={() => handleAction(item, \"add\")} />\n            ) : (\n              <RemoveCircle className={css.removeRead} onClick={() => handleAction(item, \"remove\")} />\n            )} */}\n        </TableCell>\n      </TableRow>\n    ));\n  return (\n    <TableContainer className={css.tableContainer}>\n      <Table>\n        <TableHead className={css.tableHead}>\n          <TableRow>\n            <TableCell className={css.tableCell}>{d(\"Learning Outcomes\").t(\"library_label_learning_outcomes\")}</TableCell>\n            <TableCell className={css.tableCell}>{d(\"Short Code\").t(\"assess_label_short_code\")}</TableCell>\n            <TableCell className={css.tableCell}>{d(\"Assumed\").t(\"assess_label_assumed\")}</TableCell>\n            <TableCell className={css.tableCell}>{d(\"Learning Outcome Set\").t(\"assess_set_learning_outcome_set\")}</TableCell>\n            <TableCell></TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>{rows}</TableBody>\n      </Table>\n    </TableContainer>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}