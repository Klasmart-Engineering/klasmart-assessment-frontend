{"ast":null,"code":"import WidgetContext from\"./widgetContext\";import WidgetWrapperError from\"./WidgetWrapperError\";import WidgetWrapperNoData from\"./WidgetWrapperNoData\";import{Cancel,PlayArrow}from\"@material-ui/icons\";import{Box,Card,CircularProgress,IconButton,Link,Typography}from\"@material-ui/core\";import{createStyles,makeStyles}from\"@material-ui/core/styles\";import React,{useContext}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return createStyles({cardWrapper:{display:\"flex\",flexFlow:\"column\",height:\"100%\"},card:{display:\"flex\",flexDirection:\"column\",justifyContent:\"space-between\",borderRadius:10,boxShadow:\"none\",padding:15,height:\"100%\"},cardNoBackground:{backgroundColor:\"unset\"},titleContainer:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",padding:theme.spacing(1)},editContainer:{cursor:\"grab\"},title:{fontSize:14,fontWeight:\"bold\",color:theme.palette.grey[600]},titleEditing:{fontSize:14,fontWeight:\"bold\",color:theme.palette.grey[100]},titleLink:{display:\"flex\",alignItems:\"center\",fontSize:12,color:theme.palette.grey[500]},removeWidget:{color:theme.palette.error.light,height:\"20px\",width:\"20px\",position:\"absolute\",top:\"20px\",right:\"-10px\",backgroundColor:theme.palette.grey[100],borderRadius:\"50%\",\"&:hover\":{backgroundColor:theme.palette.grey[100]}},icon:{height:\"35px\",width:\"35px\"},pointerNone:{pointerEvents:\"none\"}});});export default function WidgetWrapper(props){var classes=useStyles();var children=props.children,label=props.label,link=props.link,overrideLink=props.overrideLink,loading=props.loading,error=props.error,noData=props.noData,noBackground=props.noBackground,_props$editable=props.editable,editable=_props$editable===void 0?true:_props$editable,reload=props.reload,id=props.id;var _useContext=useContext(WidgetContext),editing=_useContext.editing;return/*#__PURE__*/_jsxs(Box,{className:\"\".concat(classes.cardWrapper,\" \").concat(editing&&editable&&classes.editContainer),children:[/*#__PURE__*/_jsx(CardAnnotation,{editable:editable,classes:classes,label:label,link:link,overrideLink:overrideLink,id:id}),/*#__PURE__*/_jsx(Card,{className:\"\".concat(classes.card,\" \").concat(noBackground&&classes.cardNoBackground,\" \").concat(editing&&editable&&classes.pointerNone),children:/*#__PURE__*/_jsx(Box,{sx:loading?{m:\"auto\",display:\"flex\",alignItems:\"center\"// pointerEvents: `none`,\n}:{height:\"100%\"},children:loading?/*#__PURE__*/_jsx(CircularProgress,{color:\"primary\"}):error?/*#__PURE__*/_jsx(WidgetWrapperError,{reload:reload}):noData?/*#__PURE__*/_jsx(WidgetWrapperNoData,{}):children})})]});}function CardAnnotation(_ref){var classes=_ref.classes,label=_ref.label,link=_ref.link,overrideLink=_ref.overrideLink,id=_ref.id,editable=_ref.editable;var _useContext2=useContext(WidgetContext),editing=_useContext2.editing,widgets=_useContext2.widgets,layouts=_useContext2.layouts,removeWidget=_useContext2.removeWidget;return/*#__PURE__*/_jsxs(Box,{className:classes.titleContainer,children:[/*#__PURE__*/_jsx(Typography,{className:editing?classes.titleEditing:classes.title,children:label}),!editing&&link&&!overrideLink&&/*#__PURE__*/_jsxs(Link,{className:classes.titleLink,href:\"#\".concat(window.location.pathname).concat(link.url),color:\"primary\",children:[link.label,\" \",/*#__PURE__*/_jsx(PlayArrow,{})]}),!editing&&overrideLink&&/*#__PURE__*/_jsx(Box,{children:overrideLink}),editing&&editable&&/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(IconButton,{className:classes.removeWidget,onClick:function onClick(){return removeWidget(id,widgets,layouts);},children:/*#__PURE__*/_jsx(Cancel,{className:classes.icon})})})]});}","map":{"version":3,"names":["WidgetContext","WidgetWrapperError","WidgetWrapperNoData","Cancel","PlayArrow","Box","Card","CircularProgress","IconButton","Link","Typography","createStyles","makeStyles","React","useContext","useStyles","theme","cardWrapper","display","flexFlow","height","card","flexDirection","justifyContent","borderRadius","boxShadow","padding","cardNoBackground","backgroundColor","titleContainer","alignItems","spacing","editContainer","cursor","title","fontSize","fontWeight","color","palette","grey","titleEditing","titleLink","removeWidget","error","light","width","position","top","right","icon","pointerNone","pointerEvents","WidgetWrapper","props","classes","children","label","link","overrideLink","loading","noData","noBackground","editable","reload","id","editing","m","CardAnnotation","widgets","layouts","window","location","pathname","url"],"sources":["/Users/evik/kl/project-2024/klasmart-assessment-frontend/src/components/Dashboard/WidgetWrapper/index.tsx"],"sourcesContent":["import { WidgetType } from \"../models/widget.model\";\nimport WidgetContext from \"./widgetContext\";\nimport WidgetWrapperError from \"./WidgetWrapperError\";\nimport WidgetWrapperNoData from \"./WidgetWrapperNoData\";\nimport { Cancel, PlayArrow } from \"@material-ui/icons\";\nimport { Box, Card, CircularProgress, IconButton, Link, Typography } from \"@material-ui/core\";\nimport { Theme } from \"@material-ui/core/styles\";\nimport { createStyles, makeStyles } from \"@material-ui/core/styles\";\nimport React, { useContext } from \"react\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    cardWrapper: {\n      display: `flex`,\n      flexFlow: `column`,\n      height: `100%`,\n    },\n    card: {\n      display: `flex`,\n      flexDirection: `column`,\n      justifyContent: `space-between`,\n      borderRadius: 10,\n      boxShadow: `none`,\n      padding: 15,\n      height: `100%`,\n    },\n    cardNoBackground: {\n      backgroundColor: `unset`,\n    },\n    titleContainer: {\n      display: `flex`,\n      justifyContent: `space-between`,\n      alignItems: `center`,\n      padding: theme.spacing(1),\n    },\n    editContainer: {\n      cursor: `grab`,\n    },\n    title: {\n      fontSize: 14,\n      fontWeight: `bold`,\n      color: theme.palette.grey[600],\n    },\n    titleEditing: {\n      fontSize: 14,\n      fontWeight: `bold`,\n      color: theme.palette.grey[100],\n    },\n    titleLink: {\n      display: `flex`,\n      alignItems: `center`,\n      fontSize: 12,\n      color: theme.palette.grey[500],\n    },\n    removeWidget: {\n      color: theme.palette.error.light,\n      height: `20px`,\n      width: `20px`,\n      position: `absolute`,\n      top: `20px`,\n      right: `-10px`,\n      backgroundColor: theme.palette.grey[100],\n      borderRadius: `50%`,\n      \"&:hover\": {\n        backgroundColor: theme.palette.grey[100],\n      },\n    },\n    icon: {\n      height: `35px`,\n      width: `35px`,\n    },\n    pointerNone: {\n      pointerEvents: `none`,\n    },\n  })\n);\n\ntype LinkProps = {\n  url: string;\n  label: string;\n};\n\nexport type BaseWidgetProps = {\n  children: React.ReactNode;\n  label: string;\n  link?: LinkProps;\n  overrideLink?: React.ReactNode;\n  loading: boolean;\n  error?: any;\n  noData?: boolean;\n  noBackground?: boolean;\n  editable?: boolean;\n  reload?: () => any | Promise<any>;\n  id: WidgetType;\n};\n\nexport default function WidgetWrapper(props: BaseWidgetProps) {\n  const classes = useStyles();\n  const { children, label, link, overrideLink, loading, error, noData, noBackground, editable = true, reload, id } = props;\n\n  const { editing } = useContext(WidgetContext);\n\n  return (\n    <Box className={`${classes.cardWrapper} ${editing && editable && classes.editContainer}`}>\n      <CardAnnotation editable={editable} classes={classes} label={label} link={link} overrideLink={overrideLink} id={id} />\n      <Card className={`${classes.card} ${noBackground && classes.cardNoBackground} ${editing && editable && classes.pointerNone}`}>\n        <Box\n          sx={\n            loading\n              ? {\n                  m: `auto`,\n                  display: `flex`,\n                  alignItems: `center`,\n                  // pointerEvents: `none`,\n                }\n              : {\n                  height: `100%`,\n                }\n          }\n        >\n          {loading ? (\n            <CircularProgress color=\"primary\" />\n          ) : error ? (\n            <WidgetWrapperError reload={reload} />\n          ) : noData ? (\n            <WidgetWrapperNoData />\n          ) : (\n            children\n          )}\n        </Box>\n      </Card>\n    </Box>\n  );\n}\n\ntype CardAnnotationProps = {\n  classes: any;\n  label: string;\n  link?: LinkProps;\n  overrideLink?: React.ReactNode;\n  id: WidgetType;\n  editable?: boolean;\n};\n\nfunction CardAnnotation({ classes, label, link, overrideLink, id, editable }: CardAnnotationProps) {\n  const { editing, widgets, layouts, removeWidget } = useContext(WidgetContext);\n\n  return (\n    <Box className={classes.titleContainer}>\n      <Typography className={editing ? classes.titleEditing : classes.title}>{label}</Typography>\n      {!editing && link && !overrideLink && (\n        <Link className={classes.titleLink} href={`#${window.location.pathname}${link.url}`} color=\"primary\">\n          {link.label} <PlayArrow />\n        </Link>\n      )}\n      {!editing && overrideLink && <Box>{overrideLink}</Box>}\n      {editing && editable && (\n        <Box>\n          <IconButton className={classes.removeWidget} onClick={() => removeWidget(id, widgets, layouts)}>\n            <Cancel className={classes.icon} />\n          </IconButton>\n        </Box>\n      )}\n    </Box>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}