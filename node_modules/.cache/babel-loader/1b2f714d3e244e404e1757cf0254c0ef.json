{"ast":null,"code":"import _objectSpread from\"/Users/evik/kl/project-2024/klasmart-assessment-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"/Users/evik/kl/project-2024/klasmart-assessment-frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";import _asyncToGenerator from\"/Users/evik/kl/project-2024/klasmart-assessment-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/evik/kl/project-2024/klasmart-assessment-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _excluded=[\"outcomes\"];import _regeneratorRuntime from\"/Users/evik/kl/project-2024/klasmart-assessment-frontend/node_modules/@babel/runtime/regenerator/index.js\";import{MilestoneOrderBy,MilestoneStatus}from\"@api/type\";import useQueryCms from\"@hooks/useQueryCms\";import{approveMilestone,bulkPublishMilestone,bulkReject,deleteMilestone,generateShortcode,getLinkedMockOptions,occupyMilestone,onLoadMilestoneEdit,onLoadOutcomeList,saveMilestone,updateMilestone}from\"@reducers/milestone\";import{setQuery}from\"@utilities/urlUtilities\";import{cloneDeep}from\"lodash\";import React,{useEffect,useMemo,useState}from\"react\";import{DndProvider}from\"react-dnd\";import{HTML5Backend}from\"react-dnd-html5-backend\";import{Controller,useForm}from\"react-hook-form\";import{useDispatch,useSelector}from\"react-redux\";import{useHistory,useParams}from\"react-router-dom\";import PermissionType from\"../../api/PermissionType\";import{NoOutcome}from\"../../components/TipImages\";import{usePermission}from\"../../hooks/usePermission\";import{d}from\"../../locale/LocaleManager\";import{ModelMilestoneOptions}from\"../../models/ModelMilestone\";import{actSuccess}from\"../../reducers/notify\";import LayoutPair from\"../ContentEdit/Layout\";import MilestoneList from\"../MilestoneList\";import{UNPUB}from\"../OutcomeList/ThirdSearchHeader\";import ContainedOutcomeList,{AddOutcomes}from\"./ContainedOutcomeList\";import ContentTab from\"./ContentTab\";import MilestoneForm from\"./MilestoneForm\";import{GENERALMILESTONE,MilestoneHeader}from\"./MilestoneHeader\";import{Outcomes}from\"./Outcomes\";import{Regulation,TabValue}from\"./type\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function MilestoneEditForm(){var _initDefaultValue$out;// const { breakpoints } = useTheme();\n// const sm = useMediaQuery(breakpoints.down(\"sm\"));\nvar dispatch=useDispatch();var history=useHistory();var condition=useQueryCms();var id=condition.id,exect_search=condition.exect_search,search_key=condition.search_key,assumed=condition.assumed,page=condition.page,search=condition.search,first_save=condition.first_save,is_unpub=condition.is_unpub,updateQuery=condition.updateQuery;var formMethods=useForm();var watch=formMethods.watch,getValues=formMethods.getValues,handleSubmit=formMethods.handleSubmit,setValue=formMethods.setValue,control=formMethods.control,errors=formMethods.errors,reset=formMethods.reset;var _useParams=useParams(),tab=_useParams.tab;var routeBasePath=MilestoneEdit.routeBasePath;var _useSelector=useSelector(function(state){return state.milestone;}),milestoneDetail=_useSelector.milestoneDetail,linkedMockOptions=_useSelector.linkedMockOptions,shortCode=_useSelector.shortCode,outcomeList=_useSelector.outcomeList,outcomeTotal=_useSelector.outcomeTotal,user_id=_useSelector.user_id;// const { organization_id } = useSelector<RootState, RootState[\"common\"]>(state => state.common);\nvar isMyself=useMemo(function(){var _milestoneDetail$auth;return((_milestoneDetail$auth=milestoneDetail.author)===null||_milestoneDetail$auth===void 0?void 0:_milestoneDetail$auth.author_id)===user_id;},[milestoneDetail.author,user_id]);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),canEdit=_useState2[0],setCanEdit=_useState2[1];var _useState3=useState(id?Regulation.ByMilestoneDetail:Regulation.ByMilestoneDetailAndOptionCount),_useState4=_slicedToArray(_useState3,2),regulation=_useState4[0],setRegulation=_useState4[1];var initDefaultValue=useMemo(function(){return ModelMilestoneOptions.createDefaultValueAndKey({regulation:regulation,milestoneDetail:milestoneDetail,linkedMockOptions:linkedMockOptions});},[linkedMockOptions,milestoneDetail,regulation]);var perm=usePermission([PermissionType.view_pending_milestone_486]);var outcomes=watch(\"outcomes\");var isGeneralMilestone=milestoneDetail.type===GENERALMILESTONE;var handleCancel=function handleCancel(){history.push(MilestoneList.routeRedirectDefault);};var handleSave=useMemo(function(){return handleSubmit(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(value){var _value$shortcode;var resultInfo,outcomes,restValues,outcome_ancestor_ids,inputValue,_ref2,payload,_ref3,_payload;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setRegulation(Regulation.ByMilestoneDetail);if((_value$shortcode=value.shortcode)!==null&&_value$shortcode!==void 0&&_value$shortcode.trim()){_context.next=6;break;}_context.next=4;return dispatch(generateShortcode({kind:\"milestones\"}));case 4:resultInfo=_context.sent;value.shortcode=resultInfo.payload.shortcode;case 6:outcomes=value.outcomes,restValues=_objectWithoutProperties(value,_excluded);outcome_ancestor_ids=outcomes===null||outcomes===void 0?void 0:outcomes.map(function(v){return v.ancestor_id;});inputValue=_objectSpread(_objectSpread({},restValues),{},{outcome_ancestor_ids:outcome_ancestor_ids});if(!id){_context.next=17;break;}_context.next=12;return dispatch(updateMilestone({milestone_id:id,milestone:inputValue,metaLoading:true}));case 12:_ref2=_context.sent;payload=_ref2.payload;if(payload===\"ok\"){reset(inputValue);dispatch(actSuccess(d(\"Updated Successfully\").t(\"assess_msg_updated_successfully\")));}_context.next=22;break;case 17:_context.next=19;return dispatch(saveMilestone(inputValue));case 19:_ref3=_context.sent;_payload=_ref3.payload;if(_payload.milestone_id){dispatch(actSuccess(d(\"Saved Successfully\").t(\"assess_msg_saved_successfully\")));history.replace({search:setQuery(history.location.search,{id:_payload.milestone_id,first_save:true})});}case 22:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());},[dispatch,handleSubmit,history,id,reset]);var handlePublish=useMemo(function(){return handleSubmit(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _ref5,payload;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return dispatch(bulkPublishMilestone([milestoneDetail.milestone_id]));case 2:_ref5=_context2.sent;payload=_ref5.payload;if(payload===\"ok\"){if(perm.view_pending_milestone_486){history.push(\"/assessments/milestone-list?status=\".concat(MilestoneStatus.pending,\"&page=1&order_by=\").concat(MilestoneOrderBy._created_at));}else{history.push(\"/assessments/milestone-list?status=\".concat(MilestoneStatus.pending,\"&page=1&order_by=\").concat(MilestoneOrderBy._created_at,\"&is_unpub=UNPUB\"));}}case 5:case\"end\":return _context2.stop();}}},_callee2);})));},[dispatch,handleSubmit,history,milestoneDetail.milestone_id,perm.view_pending_milestone_486]);var handleEdit=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(milestoneDetail.status===MilestoneStatus.published)){_context3.next=7;break;}_context3.next=3;return dispatch(occupyMilestone({id:milestoneDetail.milestone_id,metaLoading:true}));case 3:result=_context3.sent;if(result&&result.payload&&result.payload.milestone_id){history.replace(\"/assessments/milestone-edit/tab/details?id=\".concat(result.payload.milestone_id,\"&first_save=true\"));setCanEdit(true);}_context3.next=8;break;case 7:setCanEdit(true);case 8:case\"end\":return _context3.stop();}}},_callee3);}));return function handleEdit(){return _ref6.apply(this,arguments);};}();var handleDelete=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var _ref8,payload;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return dispatch(deleteMilestone([id]));case 2:_ref8=_context4.sent;payload=_ref8.payload;if(payload===\"ok\"){history.goBack();}case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function handleDelete(){return _ref7.apply(this,arguments);};}();var handleReject=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var _ref10,payload;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return dispatch(bulkReject([milestoneDetail.milestone_id]));case 2:_ref10=_context5.sent;payload=_ref10.payload;if(payload===\"ok\"){dispatch(actSuccess(\"Reject Success\"));history.push(\"/assessments/milestone-list?status=\".concat(MilestoneStatus.pending,\"&page=1&order_by=\").concat(MilestoneOrderBy._created_at));}case 5:case\"end\":return _context5.stop();}}},_callee5);}));return function handleReject(){return _ref9.apply(this,arguments);};}();var handleApprove=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var _ref12,payload;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return dispatch(approveMilestone([milestoneDetail.milestone_id]));case 2:_ref12=_context6.sent;payload=_ref12.payload;if(payload===\"ok\"){history.push(\"/assessments/milestone-list?status=\".concat(MilestoneStatus.pending,\"&page=1&order_by=\").concat(MilestoneOrderBy._created_at));}case 5:case\"end\":return _context6.stop();}}},_callee6);}));return function handleApprove(){return _ref11.apply(this,arguments);};}();var handleChangeTab=useMemo(function(){return function(value){history.replace(\"\".concat(routeBasePath,\"/tab/\").concat(value).concat(search));};},[history,routeBasePath,search]);var handleChangeProgram=useMemo(function(){return function(_ref13){var _ref14=_slicedToArray(_ref13,1),programId=_ref14[0];setRegulation(Regulation.ByOptionCount);dispatch(getLinkedMockOptions({default_program_id:programId,metaLoading:true}));};},[dispatch]);var handleChangeSubject=useMemo(function(){return function(default_subject_ids){setRegulation(Regulation.ByOptionCount);var program=getValues(\"program_ids\");dispatch(getLinkedMockOptions({default_program_id:program[0],default_subject_ids:default_subject_ids.join(\",\"),metaLoading:true}));};},[dispatch,getValues]);var handleChangeCategory=useMemo(function(){return function(_ref15){var _ref16=_slicedToArray(_ref15,1),catetory_id=_ref16[0];setRegulation(Regulation.ByOptionCount);var program=getValues(\"program_ids\");var subject=getValues(\"subject_ids\");dispatch(getLinkedMockOptions({default_program_id:program[0],default_subject_ids:subject.join(\",\"),default_developmental_id:catetory_id,metaLoading:true}));};},[dispatch,getValues]);var handleClickSearch=function handleClickSearch(exect_search,search_key,assumed){history.replace({search:updateQuery({exect_search:exect_search,search_key:search_key,assumed:assumed,page:1})});dispatch(onLoadOutcomeList({exect_search:exect_search,search_key:search_key,assumed:assumed?1:-1,page:page,metaLoading:true}));};var handleChangePage=function handleChangePage(page){history.replace({search:updateQuery({page:page})});// const {  exect_search, search_key, assumed } = condition;\ndispatch(onLoadOutcomeList({exect_search:exect_search,search_key:search_key,assumed:assumed?1:-1,page:page,metaLoading:true}));};var handleAddOrRemoveOutcome=function handleAddOrRemoveOutcome(outcome,type){var id=outcome.ancestor_id;if(type===\"add\"){if(id&&outcomes){outcomes.concat([outcome]);}}else{if(id&&outcomes){var newValue=cloneDeep(outcomes);newValue=newValue.filter(function(v){return v.ancestor_id!==id;});setValue(\"outcomes\",newValue,{shouldDirty:true});}}};var handleClickAdd=function handleClickAdd(){history.replace(\"\".concat(routeBasePath,\"/tab/\").concat(TabValue.leaningoutcomes).concat(search));};var handleClickOutcome=function handleClickOutcome(id){window.open(\"#/assessments/outcome-edit?outcome_id=\".concat(id,\"&readonly=true\"),\"_blank\");};useEffect(function(){dispatch(onLoadMilestoneEdit({id:id,metaLoading:true}));id&&!first_save?setCanEdit(false):setCanEdit(true);},[dispatch,first_save,id]);var leftside=/*#__PURE__*/_jsxs(ContentTab,{tab:tab,onChangeTab:handleChangeTab,error:errors.milestone_name,showSecondTab:!isGeneralMilestone,children:[/*#__PURE__*/_jsx(MilestoneForm,{formMethods:formMethods,initDefaultValue:initDefaultValue,milestoneDetail:milestoneDetail,linkedMockOptions:linkedMockOptions,onChangeProgram:handleChangeProgram,onChangeSubject:handleChangeSubject,onChangeCategory:handleChangeCategory,milestone_id:id,shortCode:shortCode,canEdit:canEdit}),/*#__PURE__*/_jsx(Controller,{as:Outcomes,name:\"outcomes\",defaultValue:milestoneDetail===null||milestoneDetail===void 0?void 0:milestoneDetail.outcomes,control:control,outcomeList:outcomeList,outcomeTotal:outcomeTotal,condition:condition,onSearch:handleClickSearch,outcomePage:page,onChangePage:handleChangePage,canEdit:canEdit,onClickOutcome:handleClickOutcome},(_initDefaultValue$out=initDefaultValue.outcomes)===null||_initDefaultValue$out===void 0?void 0:_initDefaultValue$out.key)]});var rightside=/*#__PURE__*/_jsxs(_Fragment,{children:[outcomes&&outcomes.length?/*#__PURE__*/_jsx(ContainedOutcomeList,{outcomeList:outcomes,value:outcomes,canEdit:canEdit,addOrRemoveOutcome:handleAddOrRemoveOutcome,onClickOutcome:handleClickOutcome,isGeneralMilestone:isGeneralMilestone}):/*#__PURE__*/_jsx(NoOutcome,{}),tab===TabValue.details&&canEdit&&/*#__PURE__*/_jsx(AddOutcomes,{onAddOutcome:handleClickAdd})]});return/*#__PURE__*/_jsxs(DndProvider,{backend:HTML5Backend,children:[/*#__PURE__*/_jsx(MilestoneHeader,{milestoneDetail:milestoneDetail,milestone_id:id,onCancel:handleCancel,onSave:handleSave,onPublish:handlePublish,onEdit:handleEdit,onDelete:handleDelete,onReject:handleReject,onApprove:handleApprove,canEdit:canEdit,formMethods:formMethods,isMyself:isMyself,is_unpub:is_unpub===UNPUB}),/*#__PURE__*/_jsxs(LayoutPair,{breakpoint:1536,leftWidth:703,rightWidth:1105,spacing:32,basePadding:0,padding:40,children:[leftside,rightside]})]});}export default function MilestoneEdit(){return/*#__PURE__*/_jsx(MilestoneEditForm,{});}MilestoneEdit.routeBasePath=\"/assessments/milestone-edit\";MilestoneEdit.routeMatchPath=\"/assessments/milestone-edit/tab/:tab\";MilestoneEdit.routeRedirectDefault=\"/assessments/milestone-edit/tab/details\";","map":{"version":3,"names":["MilestoneOrderBy","MilestoneStatus","useQueryCms","approveMilestone","bulkPublishMilestone","bulkReject","deleteMilestone","generateShortcode","getLinkedMockOptions","occupyMilestone","onLoadMilestoneEdit","onLoadOutcomeList","saveMilestone","updateMilestone","setQuery","cloneDeep","React","useEffect","useMemo","useState","DndProvider","HTML5Backend","Controller","useForm","useDispatch","useSelector","useHistory","useParams","PermissionType","NoOutcome","usePermission","d","ModelMilestoneOptions","actSuccess","LayoutPair","MilestoneList","UNPUB","ContainedOutcomeList","AddOutcomes","ContentTab","MilestoneForm","GENERALMILESTONE","MilestoneHeader","Outcomes","Regulation","TabValue","MilestoneEditForm","dispatch","history","condition","id","exect_search","search_key","assumed","page","search","first_save","is_unpub","updateQuery","formMethods","watch","getValues","handleSubmit","setValue","control","errors","reset","tab","routeBasePath","MilestoneEdit","state","milestone","milestoneDetail","linkedMockOptions","shortCode","outcomeList","outcomeTotal","user_id","isMyself","author","author_id","canEdit","setCanEdit","ByMilestoneDetail","ByMilestoneDetailAndOptionCount","regulation","setRegulation","initDefaultValue","createDefaultValueAndKey","perm","view_pending_milestone_486","outcomes","isGeneralMilestone","type","handleCancel","push","routeRedirectDefault","handleSave","value","shortcode","trim","kind","resultInfo","payload","restValues","outcome_ancestor_ids","map","v","ancestor_id","inputValue","milestone_id","metaLoading","t","replace","location","handlePublish","pending","_created_at","handleEdit","status","published","result","handleDelete","goBack","handleReject","handleApprove","handleChangeTab","handleChangeProgram","programId","ByOptionCount","default_program_id","handleChangeSubject","default_subject_ids","program","join","handleChangeCategory","catetory_id","subject","default_developmental_id","handleClickSearch","handleChangePage","handleAddOrRemoveOutcome","outcome","concat","newValue","filter","shouldDirty","handleClickAdd","leaningoutcomes","handleClickOutcome","window","open","leftside","milestone_name","key","rightside","length","details","routeMatchPath"],"sources":["/Users/evik/kl/project-2024/klasmart-assessment-frontend/src/pages/MilestoneEdit/index.tsx"],"sourcesContent":["import { GetOutcomeDetail, MilestoneDetailResult, MilestoneOrderBy, MilestoneStatus } from \"@api/type\";\nimport useQueryCms from \"@hooks/useQueryCms\";\nimport {\n  approveMilestone,\n  bulkPublishMilestone,\n  bulkReject,\n  deleteMilestone,\n  generateShortcode,\n  getLinkedMockOptions,\n  occupyMilestone,\n  onLoadMilestoneEdit,\n  onLoadOutcomeList,\n  saveMilestone,\n  updateMilestone\n} from \"@reducers/milestone\";\nimport { AsyncTrunkReturned } from \"@reducers/type\";\nimport { PayloadAction } from \"@reduxjs/toolkit\";\nimport { setQuery } from \"@utilities/urlUtilities\";\nimport { cloneDeep } from \"lodash\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\nimport { Controller, useForm } from \"react-hook-form\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport PermissionType from \"../../api/PermissionType\";\nimport { NoOutcome } from \"../../components/TipImages\";\nimport { usePermission } from \"../../hooks/usePermission\";\nimport { d } from \"../../locale/LocaleManager\";\nimport { ModelMilestoneOptions } from \"../../models/ModelMilestone\";\nimport { RootState } from \"../../reducers\";\nimport { actSuccess } from \"../../reducers/notify\";\nimport LayoutPair from \"../ContentEdit/Layout\";\nimport MilestoneList from \"../MilestoneList\";\nimport { UNPUB } from \"../OutcomeList/ThirdSearchHeader\";\nimport ContainedOutcomeList, { AddOutcomes, ContainedOutcomeListProps } from \"./ContainedOutcomeList\";\nimport ContentTab from \"./ContentTab\";\nimport MilestoneForm from \"./MilestoneForm\";\nimport { GENERALMILESTONE, MilestoneHeader, MilestoneHeaderProps } from \"./MilestoneHeader\";\nimport { Outcomes, OutcomesProps } from \"./Outcomes\";\nimport { OutcomeSearchProps } from \"./OutcomeSearch\";\nimport { Regulation, TabValue } from \"./type\";\ninterface RouteParams {\n  tab: \"details\" | \"leaningoutcomes\";\n}\nexport interface MilestoneCondition {\n  id: string;\n  exect_search: string;\n  search_key: string;\n  assumed: boolean;\n  page: number;\n  search: string;\n  first_save: boolean;\n  is_unpub: string;\n}\n\nfunction MilestoneEditForm() {\n  // const { breakpoints } = useTheme();\n  // const sm = useMediaQuery(breakpoints.down(\"sm\"));\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const condition = useQueryCms();\n  const { id, exect_search, search_key, assumed, page, search, first_save, is_unpub, updateQuery } = condition;\n  const formMethods = useForm<MilestoneDetailResult>();\n  const { watch, getValues, handleSubmit, setValue, control, errors, reset } = formMethods;\n  const { tab } = useParams<RouteParams>();\n  const { routeBasePath } = MilestoneEdit;\n  const { milestoneDetail, linkedMockOptions, shortCode, outcomeList, outcomeTotal, user_id } = useSelector<\n    RootState,\n    RootState[\"milestone\"]\n  >((state) => state.milestone);\n  // const { organization_id } = useSelector<RootState, RootState[\"common\"]>(state => state.common);\n  const isMyself = useMemo(() => milestoneDetail.author?.author_id === user_id, [milestoneDetail.author, user_id]);\n  const [canEdit, setCanEdit] = useState(false);\n  const [regulation, setRegulation] = useState<Regulation>(id ? Regulation.ByMilestoneDetail : Regulation.ByMilestoneDetailAndOptionCount);\n  const initDefaultValue = useMemo(\n    () => ModelMilestoneOptions.createDefaultValueAndKey({ regulation, milestoneDetail, linkedMockOptions }),\n    [linkedMockOptions, milestoneDetail, regulation]\n  );\n  const perm = usePermission([PermissionType.view_pending_milestone_486]);\n  const outcomes = watch(\"outcomes\");\n  const isGeneralMilestone = milestoneDetail.type === GENERALMILESTONE;\n  const handleCancel = () => {\n    history.push(MilestoneList.routeRedirectDefault);\n  };\n  const handleSave = useMemo(\n    () =>\n      handleSubmit(async (value) => {\n        setRegulation(Regulation.ByMilestoneDetail);\n        if (!value.shortcode?.trim()) {\n          const resultInfo = (await dispatch(generateShortcode({ kind: \"milestones\" }))) as unknown as PayloadAction<\n            AsyncTrunkReturned<typeof generateShortcode>\n          >;\n          value.shortcode = resultInfo.payload.shortcode;\n        }\n        const { outcomes, ...restValues } = value;\n        const outcome_ancestor_ids = outcomes?.map((v) => v.ancestor_id as string);\n        const inputValue = { ...restValues, outcome_ancestor_ids };\n        if (id) {\n          const { payload } = (await dispatch(\n            updateMilestone({ milestone_id: id, milestone: inputValue, metaLoading: true })\n          )) as unknown as PayloadAction<AsyncTrunkReturned<typeof updateMilestone>>;\n          if (payload === \"ok\") {\n            reset(inputValue);\n            dispatch(actSuccess(d(\"Updated Successfully\").t(\"assess_msg_updated_successfully\")));\n          }\n        } else {\n          const { payload } = (await dispatch(saveMilestone(inputValue))) as unknown as PayloadAction<\n            AsyncTrunkReturned<typeof saveMilestone>\n          >;\n          if (payload.milestone_id) {\n            dispatch(actSuccess(d(\"Saved Successfully\").t(\"assess_msg_saved_successfully\")));\n            history.replace({\n              search: setQuery(history.location.search, { id: payload.milestone_id, first_save: true }),\n            });\n          }\n        }\n      }),\n    [dispatch, handleSubmit, history, id, reset]\n  );\n  const handlePublish: MilestoneHeaderProps[\"onPublish\"] = useMemo(\n    () =>\n      handleSubmit(async () => {\n        const { payload } = (await dispatch(bulkPublishMilestone([milestoneDetail.milestone_id as string]))) as unknown as PayloadAction<\n          AsyncTrunkReturned<typeof bulkPublishMilestone>\n        >;\n        if (payload === \"ok\") {\n          if (perm.view_pending_milestone_486) {\n            history.push(`/assessments/milestone-list?status=${MilestoneStatus.pending}&page=1&order_by=${MilestoneOrderBy._created_at}`);\n          } else {\n            history.push(\n              `/assessments/milestone-list?status=${MilestoneStatus.pending}&page=1&order_by=${MilestoneOrderBy._created_at}&is_unpub=UNPUB`\n            );\n          }\n        }\n      }),\n    [dispatch, handleSubmit, history, milestoneDetail.milestone_id, perm.view_pending_milestone_486]\n  );\n  const handleEdit = async () => {\n    if (milestoneDetail.status === MilestoneStatus.published) {\n      const result: any = await dispatch(occupyMilestone({ id: milestoneDetail.milestone_id as string, metaLoading: true }));\n      if (result && result.payload && result.payload.milestone_id) {\n        history.replace(`/assessments/milestone-edit/tab/details?id=${result.payload.milestone_id}&first_save=true`);\n        setCanEdit(true);\n      }\n    } else {\n      setCanEdit(true);\n    }\n  };\n  const handleDelete = async () => {\n    const { payload } = (await dispatch(deleteMilestone([id]))) as unknown as PayloadAction<AsyncTrunkReturned<typeof deleteMilestone>>;\n    if (payload === \"ok\") {\n      history.goBack();\n    }\n  };\n  const handleReject: MilestoneHeaderProps[\"onReject\"] = async () => {\n    const { payload } = (await dispatch(bulkReject([milestoneDetail.milestone_id as string]))) as unknown as PayloadAction<\n      AsyncTrunkReturned<typeof bulkReject>\n    >;\n    if (payload === \"ok\") {\n      dispatch(actSuccess(\"Reject Success\"));\n      history.push(`/assessments/milestone-list?status=${MilestoneStatus.pending}&page=1&order_by=${MilestoneOrderBy._created_at}`);\n    }\n  };\n  const handleApprove: MilestoneHeaderProps[\"onApprove\"] = async () => {\n    const { payload } = (await dispatch(approveMilestone([milestoneDetail.milestone_id as string]))) as unknown as PayloadAction<\n      AsyncTrunkReturned<typeof bulkReject>\n    >;\n    if (payload === \"ok\") {\n      history.push(`/assessments/milestone-list?status=${MilestoneStatus.pending}&page=1&order_by=${MilestoneOrderBy._created_at}`);\n    }\n  };\n  const handleChangeTab = useMemo(\n    () => (value: string) => {\n      history.replace(`${routeBasePath}/tab/${value}${search}`);\n    },\n    [history, routeBasePath, search]\n  );\n\n  const handleChangeProgram = useMemo(\n    () =>\n      ([programId]: string[]) => {\n        setRegulation(Regulation.ByOptionCount);\n        dispatch(getLinkedMockOptions({ default_program_id: programId, metaLoading: true }));\n      },\n    [dispatch]\n  );\n  const handleChangeSubject = useMemo(\n    () => (default_subject_ids: string[]) => {\n      setRegulation(Regulation.ByOptionCount);\n      const program = getValues(\"program_ids\") as string[];\n      dispatch(\n        getLinkedMockOptions({ default_program_id: program[0], default_subject_ids: default_subject_ids.join(\",\"), metaLoading: true })\n      );\n    },\n    [dispatch, getValues]\n  );\n  const handleChangeCategory = useMemo(\n    () =>\n      ([catetory_id]: string[]) => {\n        setRegulation(Regulation.ByOptionCount);\n        const program = getValues(\"program_ids\") as string[];\n        const subject = getValues(\"subject_ids\") as string[];\n        dispatch(\n          getLinkedMockOptions({\n            default_program_id: program[0],\n            default_subject_ids: subject.join(\",\"),\n            default_developmental_id: catetory_id,\n            metaLoading: true,\n          })\n        );\n      },\n    [dispatch, getValues]\n  );\n  const handleClickSearch: OutcomeSearchProps[\"onSearch\"] = (exect_search: string, search_key: string, assumed: boolean) => {\n    history.replace({\n      search: updateQuery({\n        exect_search,\n        search_key,\n        assumed,\n        page: 1,\n      }),\n    });\n    dispatch(onLoadOutcomeList({ exect_search, search_key, assumed: assumed ? 1 : -1, page, metaLoading: true }));\n  };\n  const handleChangePage: OutcomesProps[\"onChangePage\"] = (page: number) => {\n    history.replace({\n      search: updateQuery({\n        page,\n      }),\n    });\n    // const {  exect_search, search_key, assumed } = condition;\n    dispatch(onLoadOutcomeList({ exect_search, search_key, assumed: assumed ? 1 : -1, page, metaLoading: true }));\n  };\n  const handleAddOrRemoveOutcome: ContainedOutcomeListProps[\"addOrRemoveOutcome\"] = (outcome: GetOutcomeDetail, type: \"add\" | \"remove\") => {\n    const { ancestor_id: id } = outcome;\n    if (type === \"add\") {\n      if (id && outcomes) {\n        outcomes.concat([outcome]);\n      }\n    } else {\n      if (id && outcomes) {\n        let newValue = cloneDeep(outcomes);\n        newValue = newValue.filter((v) => v.ancestor_id !== id);\n        setValue(\"outcomes\", newValue, { shouldDirty: true });\n      }\n    }\n  };\n  const handleClickAdd = () => {\n    history.replace(`${routeBasePath}/tab/${TabValue.leaningoutcomes}${search}`);\n  };\n\n  const handleClickOutcome: ContainedOutcomeListProps[\"onClickOutcome\"] = (id: GetOutcomeDetail[\"outcome_id\"]) => {\n    window.open(`#/assessments/outcome-edit?outcome_id=${id}&readonly=true`, \"_blank\");\n  };\n\n  useEffect(() => {\n    dispatch(onLoadMilestoneEdit({ id, metaLoading: true }));\n    id && !first_save ? setCanEdit(false) : setCanEdit(true);\n  }, [dispatch, first_save, id]);\n  const leftside = (\n    <ContentTab tab={tab} onChangeTab={handleChangeTab} error={errors.milestone_name} showSecondTab={!isGeneralMilestone}>\n      <MilestoneForm\n        formMethods={formMethods}\n        initDefaultValue={initDefaultValue}\n        milestoneDetail={milestoneDetail}\n        linkedMockOptions={linkedMockOptions}\n        onChangeProgram={handleChangeProgram}\n        onChangeSubject={handleChangeSubject}\n        onChangeCategory={handleChangeCategory}\n        milestone_id={id}\n        shortCode={shortCode}\n        canEdit={canEdit}\n      />\n      <Controller\n        as={Outcomes}\n        name=\"outcomes\"\n        defaultValue={milestoneDetail?.outcomes}\n        key={initDefaultValue.outcomes?.key}\n        control={control}\n        outcomeList={outcomeList}\n        outcomeTotal={outcomeTotal}\n        condition={condition}\n        onSearch={handleClickSearch}\n        outcomePage={page}\n        onChangePage={handleChangePage}\n        canEdit={canEdit}\n        onClickOutcome={handleClickOutcome}\n      />\n    </ContentTab>\n  );\n  const rightside = (\n    <>\n      {outcomes && outcomes.length ? (\n        <ContainedOutcomeList\n          outcomeList={outcomes}\n          value={outcomes}\n          canEdit={canEdit}\n          addOrRemoveOutcome={handleAddOrRemoveOutcome}\n          onClickOutcome={handleClickOutcome}\n          isGeneralMilestone={isGeneralMilestone}\n        />\n      ) : (\n        <NoOutcome />\n      )}\n      {tab === TabValue.details && canEdit && <AddOutcomes onAddOutcome={handleClickAdd} />}\n    </>\n  );\n  return (\n    <DndProvider backend={HTML5Backend}>\n      <MilestoneHeader\n        milestoneDetail={milestoneDetail}\n        milestone_id={id}\n        onCancel={handleCancel}\n        onSave={handleSave}\n        onPublish={handlePublish}\n        onEdit={handleEdit}\n        onDelete={handleDelete}\n        onReject={handleReject}\n        onApprove={handleApprove}\n        canEdit={canEdit}\n        formMethods={formMethods}\n        isMyself={isMyself}\n        is_unpub={is_unpub === UNPUB}\n      />\n      <LayoutPair breakpoint={1536} leftWidth={703} rightWidth={1105} spacing={32} basePadding={0} padding={40}>\n        {leftside}\n        {rightside}\n      </LayoutPair>\n    </DndProvider>\n  );\n}\n\nexport default function MilestoneEdit() {\n  return <MilestoneEditForm />;\n}\n\nMilestoneEdit.routeBasePath = \"/assessments/milestone-edit\";\nMilestoneEdit.routeMatchPath = \"/assessments/milestone-edit/tab/:tab\";\nMilestoneEdit.routeRedirectDefault = `/assessments/milestone-edit/tab/details`;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}