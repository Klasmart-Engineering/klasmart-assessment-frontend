{"ast":null,"code":"import{AudioVision}from\"@components/AuduiVision/AudioVision\";import{useDownloadMediaForMetadata}from\"@kl-engineering/kidsloop-media-hooks\";import{d}from\"@locale/LocaleManager\";import React from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";/*\nexport const AudioView = ({ userId, roomId, h5pId, h5pSubId, resourceType }: AudioViewProps) => {\n  const { userAgent } = navigator; \n  const isSafari = userAgent.indexOf(\"Safari\") > -1 && userAgent.indexOf(\"Chrome\") < 0 && userAgent.indexOf(\"CriOS\") < 0;\n  const { loading, error, mediaMetadata } = useAudioMetadata({\n    userId,\n    roomId,\n    h5pId,\n    h5pSubId: h5pSubId ? h5pSubId : undefined,\n  });\n  if (isSafari) return <p>{d(\"Please use another browser (Chrome) for a better experience.\").t(\"assessment_audio_suggest_browser\")}</p>;\n  if (error) {\n    return <p>{d(\"Server request failed\").t(\"general_error_unknown\")}</p>;\n  }\n  if (loading) return <p>Loading ...</p>;\n  if (!mediaMetadata?.length) return <p>{d(\"Audio data is not successfully stored by student.\").t(\"assessment_audio_no_data\")}</p>;\n  return (\n    <AudioPlayerV2\n      resourceType={resourceType}\n      writtenText={mediaMetadata[0].description}\n      audioId={mediaMetadata[0].id}\n      mimeType={mediaMetadata[0].mimeType ? mediaMetadata[0].mimeType : \"audio/webm\"}\n      roomId={roomId as string}\n    />\n  );\n};\n\ninterface AudioPlayerProps {\n  audioId: string;\n  roomId: string;\n  mimeType: string;\n  client?: ApolloClient<unknown>;\n  resourceType: string;\n  writtenText?: string;\n}\nexport const AudioPlayerV2 = ({ audioId, roomId, mimeType, client, resourceType, writtenText }: AudioPlayerProps) => {\n  const {\n    loading,\n    error,\n    src: audioSrc,\n  } = useDownloadMedia({\n    mediaId: audioId,\n    roomId,\n    mimeType,\n  });\n  if (loading) return <p>Loading...</p>;\n  if (error) {\n    return <p>{d(\"Server request failed\").t(\"general_error_unknown\")}</p>;\n  }\n  return (\n    <div>\n      <AudioVision\n        src={audioSrc as string}\n        bars={32}\n        barColor={[\"#6B9AF6\", \"#61C2CD\", \"#B499F7\", \"#BDD2F7\"]}\n        height={150}\n        width={350}\n        volume={0.6}\n      />\n      {resourceType !== \"AudioRecorder\" && writtenText && <div>{writtenText}</div>}\n    </div>\n  );\n};*/export var AudioView=function AudioView(_ref){var userId=_ref.userId,roomId=_ref.roomId,h5pId=_ref.h5pId,h5pSubId=_ref.h5pSubId;var _navigator=navigator,userAgent=_navigator.userAgent;var isSafari=userAgent.indexOf(\"Safari\")>-1&&userAgent.indexOf(\"Chrome\")<0&&userAgent.indexOf(\"CriOS\")<0;var _useDownloadMediaForM=useDownloadMediaForMetadata({userId:userId,roomId:roomId,h5pId:h5pId,h5pSubId:h5pSubId?h5pSubId:undefined,mediaType:\"audio\",mimeType:\"audio/webm\"}),loading=_useDownloadMediaForM.loading,error=_useDownloadMediaForM.error,src=_useDownloadMediaForM.src;if(isSafari)return/*#__PURE__*/_jsx(\"p\",{children:d(\"Please use another browser (Chrome) for a better experience.\").t(\"assessment_audio_suggest_browser\")});if(error){return/*#__PURE__*/_jsx(\"p\",{children:d(\"Server request failed\").t(\"general_error_unknown\")});}if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading ...\"});if(!src)return/*#__PURE__*/_jsx(\"p\",{children:d(\"Audio data is not successfully stored by student.\").t(\"assessment_audio_no_data\")});return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(AudioVision,{src:src,bars:32,barColor:[\"#6B9AF6\",\"#61C2CD\",\"#B499F7\",\"#BDD2F7\"],height:150,width:350,volume:0.6})});};export default AudioView;","map":{"version":3,"names":["AudioVision","useDownloadMediaForMetadata","d","React","AudioView","userId","roomId","h5pId","h5pSubId","navigator","userAgent","isSafari","indexOf","undefined","mediaType","mimeType","loading","error","src","t"],"sources":["/Users/evik/kl/project-2024/klasmart-assessment-frontend/src/pages/DetailAssessment/AudioView.tsx"],"sourcesContent":["import { ApolloClient } from \"@apollo/client\";\nimport { AudioVision } from \"@components/AuduiVision/AudioVision\";\nimport { useDownloadMediaForMetadata } from \"@kl-engineering/kidsloop-media-hooks\";\nimport { d } from \"@locale/LocaleManager\";\nimport React from \"react\";\ninterface AudioViewProps {\n  userId: string;\n  roomId: string;\n  h5pId: string;\n  h5pSubId?: string;\n  client: ApolloClient<unknown>;\n  resourceType: string;\n}\n/*\nexport const AudioView = ({ userId, roomId, h5pId, h5pSubId, resourceType }: AudioViewProps) => {\n  const { userAgent } = navigator; \n  const isSafari = userAgent.indexOf(\"Safari\") > -1 && userAgent.indexOf(\"Chrome\") < 0 && userAgent.indexOf(\"CriOS\") < 0;\n  const { loading, error, mediaMetadata } = useAudioMetadata({\n    userId,\n    roomId,\n    h5pId,\n    h5pSubId: h5pSubId ? h5pSubId : undefined,\n  });\n  if (isSafari) return <p>{d(\"Please use another browser (Chrome) for a better experience.\").t(\"assessment_audio_suggest_browser\")}</p>;\n  if (error) {\n    return <p>{d(\"Server request failed\").t(\"general_error_unknown\")}</p>;\n  }\n  if (loading) return <p>Loading ...</p>;\n  if (!mediaMetadata?.length) return <p>{d(\"Audio data is not successfully stored by student.\").t(\"assessment_audio_no_data\")}</p>;\n  return (\n    <AudioPlayerV2\n      resourceType={resourceType}\n      writtenText={mediaMetadata[0].description}\n      audioId={mediaMetadata[0].id}\n      mimeType={mediaMetadata[0].mimeType ? mediaMetadata[0].mimeType : \"audio/webm\"}\n      roomId={roomId as string}\n    />\n  );\n};\n\ninterface AudioPlayerProps {\n  audioId: string;\n  roomId: string;\n  mimeType: string;\n  client?: ApolloClient<unknown>;\n  resourceType: string;\n  writtenText?: string;\n}\nexport const AudioPlayerV2 = ({ audioId, roomId, mimeType, client, resourceType, writtenText }: AudioPlayerProps) => {\n  const {\n    loading,\n    error,\n    src: audioSrc,\n  } = useDownloadMedia({\n    mediaId: audioId,\n    roomId,\n    mimeType,\n  });\n  if (loading) return <p>Loading...</p>;\n  if (error) {\n    return <p>{d(\"Server request failed\").t(\"general_error_unknown\")}</p>;\n  }\n  return (\n    <div>\n      <AudioVision\n        src={audioSrc as string}\n        bars={32}\n        barColor={[\"#6B9AF6\", \"#61C2CD\", \"#B499F7\", \"#BDD2F7\"]}\n        height={150}\n        width={350}\n        volume={0.6}\n      />\n      {resourceType !== \"AudioRecorder\" && writtenText && <div>{writtenText}</div>}\n    </div>\n  );\n};*/\n\nexport const AudioView = ({ userId, roomId, h5pId, h5pSubId }: AudioViewProps) => {\n  const { userAgent } = navigator;\n  const isSafari = userAgent.indexOf(\"Safari\") > -1 && userAgent.indexOf(\"Chrome\") < 0 && userAgent.indexOf(\"CriOS\") < 0;\n  const { loading, error, src } = useDownloadMediaForMetadata({\n    userId,\n    roomId,\n    h5pId,\n    h5pSubId: h5pSubId ? h5pSubId : undefined,\n    mediaType: \"audio\",\n    mimeType: \"audio/webm\",\n  });\n  if (isSafari) return <p>{d(\"Please use another browser (Chrome) for a better experience.\").t(\"assessment_audio_suggest_browser\")}</p>;\n  if (error) {\n    return <p>{d(\"Server request failed\").t(\"general_error_unknown\")}</p>;\n  }\n  if (loading) return <p>Loading ...</p>;\n  if (!src) return <p>{d(\"Audio data is not successfully stored by student.\").t(\"assessment_audio_no_data\")}</p>;\n  return (\n    <div>\n      <AudioVision\n        src={src as string}\n        bars={32}\n        barColor={[\"#6B9AF6\", \"#61C2CD\", \"#B499F7\", \"#BDD2F7\"]}\n        height={150}\n        width={350}\n        volume={0.6}\n      />\n      {/*{resourceType !== \"AudioRecorder\" && mediaMetadata[0].description && <div>{mediaMetadata[0].description}</div>}*/}\n    </div>\n  );\n};\n\nexport default AudioView;\n"],"mappings":"AACA,OAASA,WAAT,KAA4B,qCAA5B,CACA,OAASC,2BAAT,KAA4C,sCAA5C,CACA,OAASC,CAAT,KAAkB,uBAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,2CASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAEA,MAAO,IAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,MAAyD,IAAtDC,CAAAA,MAAsD,MAAtDA,MAAsD,CAA9CC,MAA8C,MAA9CA,MAA8C,CAAtCC,KAAsC,MAAtCA,KAAsC,CAA/BC,QAA+B,MAA/BA,QAA+B,CAChF,eAAsBC,SAAtB,CAAQC,SAAR,YAAQA,SAAR,CACA,GAAMC,CAAAA,QAAQ,CAAGD,SAAS,CAACE,OAAV,CAAkB,QAAlB,EAA8B,CAAC,CAA/B,EAAoCF,SAAS,CAACE,OAAV,CAAkB,QAAlB,EAA8B,CAAlE,EAAuEF,SAAS,CAACE,OAAV,CAAkB,OAAlB,EAA6B,CAArH,CACA,0BAAgCX,2BAA2B,CAAC,CAC1DI,MAAM,CAANA,MAD0D,CAE1DC,MAAM,CAANA,MAF0D,CAG1DC,KAAK,CAALA,KAH0D,CAI1DC,QAAQ,CAAEA,QAAQ,CAAGA,QAAH,CAAcK,SAJ0B,CAK1DC,SAAS,CAAE,OAL+C,CAM1DC,QAAQ,CAAE,YANgD,CAAD,CAA3D,CAAQC,OAAR,uBAAQA,OAAR,CAAiBC,KAAjB,uBAAiBA,KAAjB,CAAwBC,GAAxB,uBAAwBA,GAAxB,CAQA,GAAIP,QAAJ,CAAc,mBAAO,mBAAIT,CAAC,CAAC,8DAAD,CAAD,CAAkEiB,CAAlE,CAAoE,kCAApE,CAAJ,EAAP,CACd,GAAIF,KAAJ,CAAW,CACT,mBAAO,mBAAIf,CAAC,CAAC,uBAAD,CAAD,CAA2BiB,CAA3B,CAA6B,uBAA7B,CAAJ,EAAP,CACD,CACD,GAAIH,OAAJ,CAAa,mBAAO,kCAAP,CACb,GAAI,CAACE,GAAL,CAAU,mBAAO,mBAAIhB,CAAC,CAAC,mDAAD,CAAD,CAAuDiB,CAAvD,CAAyD,0BAAzD,CAAJ,EAAP,CACV,mBACE,kCACE,KAAC,WAAD,EACE,GAAG,CAAED,GADP,CAEE,IAAI,CAAE,EAFR,CAGE,QAAQ,CAAE,CAAC,SAAD,CAAY,SAAZ,CAAuB,SAAvB,CAAkC,SAAlC,CAHZ,CAIE,MAAM,CAAE,GAJV,CAKE,KAAK,CAAE,GALT,CAME,MAAM,CAAE,GANV,EADF,EADF,CAaD,CA9BM,CAgCP,cAAed,CAAAA,SAAf"},"metadata":{},"sourceType":"module"}