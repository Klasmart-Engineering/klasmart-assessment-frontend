{"ast":null,"code":"import _defineProperty from\"/Users/evik/kl/project-2024/klasmart-assessment-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/evik/kl/project-2024/klasmart-assessment-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"/Users/evik/kl/project-2024/klasmart-assessment-frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";import _asyncToGenerator from\"/Users/evik/kl/project-2024/klasmart-assessment-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _extraReducers;var _excluded=[\"metaLoading\"];import _regeneratorRuntime from\"/Users/evik/kl/project-2024/klasmart-assessment-frontend/node_modules/@babel/runtime/regenerator/index.js\";import{BooleanOperator,ConnectionDirection,StringOperator,UuidOperator}from\"@api/api-ko-schema.auto\";import{apiGetUserNameByUserId,apiWaitForOrganizationOfPage}from\"@api/extra\";import{AssessmentTypeValues}from\"@components/AssessmentType\";import{createAsyncThunk,createSlice}from\"@reduxjs/toolkit\";import api,{gqlapi}from\"../api\";import{GetRolesIdDocument,GetUsersByNameDocument,QueryMyUserDocument}from\"../api/api-ko.auto\";import{OrderByAssessmentList}from\"../api/type\";import{AssessmentStatus,AssessmentStatusValues}from\"../pages/ListAssessment/types\";// interface RootState {\n//   assessments: IAssessmentState;\n// }\nvar initialState={total:undefined,assessmentList:[],homefunFeedbacks:[],hasPermissionOfHomefun:false,my_id:\"\",assessmentListV2:[],assessmentDetailV2:{},attachment_path:\"\",attachment_id:\"\",teacherList:undefined};export var getAssessmentListV2=createAsyncThunk(\"assessments/getAssessmentListV2\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var metaLoading,query,status,assessment_type,order_by,query_key,query_type,page,page_size,isStudy,isReview,isHomefun,_status,_order_by,_query,_yield$api$assessment,assessments,total;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:metaLoading=_ref.metaLoading,query=_objectWithoutProperties(_ref,_excluded);status=query.status,assessment_type=query.assessment_type,order_by=query.order_by,query_key=query.query_key,query_type=query.query_type,page=query.page,page_size=query.page_size;isStudy=assessment_type===AssessmentTypeValues.study;isReview=assessment_type===AssessmentTypeValues.review;isHomefun=assessment_type===AssessmentTypeValues.homeFun;_status=\"\";if(isStudy||isReview||isHomefun){_order_by=order_by?order_by:OrderByAssessmentList._create_at;_status=status===AssessmentStatus.all?AssessmentStatusValues.study_all:status===AssessmentStatus.in_progress?AssessmentStatusValues.study_inprogress:AssessmentStatusValues.complete;}else{_order_by=order_by?order_by:OrderByAssessmentList._class_end_time;_status=status===AssessmentStatus.all?AssessmentStatusValues.class_live_homefun_all:status===AssessmentStatus.in_progress?AssessmentStatusValues.class_live_homefun_inprogress:AssessmentStatusValues.complete;}_query={assessment_type:assessment_type,page:page,page_size:page_size,status:_status,order_by:_order_by,query_key:query_key?query_key:\" \",query_type:query_key?query_type:undefined};_context.next=10;return api.assessmentsV2.queryAssessmentV2(_objectSpread(_objectSpread({},_query),{},{page_size:20}));case 10:_yield$api$assessment=_context.sent;assessments=_yield$api$assessment.assessments;total=_yield$api$assessment.total;return _context.abrupt(\"return\",{assessments:assessments,total:total});case 14:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());export var getDetailAssessmentV2=createAsyncThunk(\"assessments/getDetailAssessmentV2\",/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref3){var _myUser$node,_detail$students;var id,_yield$gqlapi$query,myUser,my_id,res,detail,teacher_ids,students,diff_content_students,teacherIds,studentIds,userNamesArr;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:id=_ref3.id;_context2.next=3;return gqlapi.query({query:QueryMyUserDocument});case 3:_yield$gqlapi$query=_context2.sent;myUser=_yield$gqlapi$query.data.myUser;my_id=(myUser===null||myUser===void 0?void 0:(_myUser$node=myUser.node)===null||_myUser$node===void 0?void 0:_myUser$node.id)||\"\";_context2.next=8;return api.assessmentsV2.getAssessmentDetailV2(id);case 8:res=_context2.sent;detail=_objectSpread({},res);teacher_ids=detail.teacher_ids,students=detail.students,diff_content_students=detail.diff_content_students;teacherIds=teacher_ids||[];studentIds=diff_content_students?diff_content_students.map(function(item){return item.student_id;})||[]:(students===null||students===void 0?void 0:students.map(function(item){return item.student_id;}))||[];_context2.next=15;return apiGetUserNameByUserId(teacherIds.concat(studentIds));case 15:userNamesArr=_context2.sent;detail.teachers=teacher_ids===null||teacher_ids===void 0?void 0:teacher_ids.map(function(item){var name=userNamesArr.get(item);return{id:item,name:name};});detail.students=diff_content_students?diff_content_students.map(function(item){item.student_name=userNamesArr.get(item.student_id);return item;}):(_detail$students=detail.students)===null||_detail$students===void 0?void 0:_detail$students.map(function(item){item.student_name=userNamesArr.get(item.student_id);return item;});return _context2.abrupt(\"return\",{detail:detail,my_id:my_id});case 19:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref4.apply(this,arguments);};}());export var getUserListByName=createAsyncThunk(\"assessments/getUserListByName\",/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(name){var _roleData$rolesConnec,_roleData$rolesConnec2,_usersConnection$edge;var _yield$gqlapi$query2,roleData,teacherRoleId,orgId,filter,_yield$gqlapi$query3,usersConnection,teacherList;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(name){_context3.next=2;break;}return _context3.abrupt(\"return\",undefined);case 2:_context3.next=4;return gqlapi.query({query:GetRolesIdDocument,variables:{direction:ConnectionDirection.Forward,directionArgs:{count:10},filter:{system:{operator:BooleanOperator.Eq,value:true}}}});case 4:_yield$gqlapi$query2=_context3.sent;roleData=_yield$gqlapi$query2.data;teacherRoleId=\"\";(_roleData$rolesConnec=roleData.rolesConnection)===null||_roleData$rolesConnec===void 0?void 0:(_roleData$rolesConnec2=_roleData$rolesConnec.edges)===null||_roleData$rolesConnec2===void 0?void 0:_roleData$rolesConnec2.forEach(function(item){var _item$node;if((item===null||item===void 0?void 0:(_item$node=item.node)===null||_item$node===void 0?void 0:_item$node.name)===\"Teacher\"){teacherRoleId=item.node.id;}});_context3.next=10;return apiWaitForOrganizationOfPage();case 10:orgId=_context3.sent;filter={filter:{roleId:{operator:UuidOperator.Eq,value:teacherRoleId},organizationId:{operator:UuidOperator.Eq,value:orgId},OR:[{familyName:{operator:StringOperator.Contains,value:name,caseInsensitive:true}},{givenName:{operator:StringOperator.Contains,value:name,caseInsensitive:true}}]},directionArgs:{count:15}};_context3.next=14;return gqlapi.query({query:GetUsersByNameDocument,variables:filter});case 14:_yield$gqlapi$query3=_context3.sent;usersConnection=_yield$gqlapi$query3.data.usersConnection;teacherList=usersConnection===null||usersConnection===void 0?void 0:(_usersConnection$edge=usersConnection.edges)===null||_usersConnection$edge===void 0?void 0:_usersConnection$edge.map(function(item){var _item$node2,_item$node3,_item$node4;return{id:item===null||item===void 0?void 0:(_item$node2=item.node)===null||_item$node2===void 0?void 0:_item$node2.id,name:\"\".concat(item===null||item===void 0?void 0:(_item$node3=item.node)===null||_item$node3===void 0?void 0:_item$node3.givenName,\" \").concat(item===null||item===void 0?void 0:(_item$node4=item.node)===null||_item$node4===void 0?void 0:_item$node4.familyName)};});return _context3.abrupt(\"return\",teacherList);case 18:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref5.apply(this,arguments);};}());export var updateAssessmentV2=createAsyncThunk(\"assessments/updateAssessment\",/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_ref6){var id,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:id=_ref6.id,data=_ref6.data;_context4.next=3;return api.assessmentsV2.updateAssessmentV2(id,data);case 3:return _context4.abrupt(\"return\",id);case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref7.apply(this,arguments);};}());export var getContentResourceUploadPath=createAsyncThunk(\"content/getContentResourceUploadPath\",function(query){return api.contentsResources.getContentResourceUploadPath(query);});export var getDownloadPath=createAsyncThunk(\"content/getDownloadPath\",function(query){return api.contentsResources.getDownloadPath(query);});export var actCreateDownload=createAsyncThunk(\"content/actCreateDownload\",function(_ref8){var resourceId=_ref8.resourceId;return api.contentsResources.getDownloadPath(resourceId);});export var checkResourceExist=createAsyncThunk(\"content/checkResourceExist\",function(_ref9){var resource_id=_ref9.resource_id;return api.contentsResources.checkResourceExist(resource_id);});var _createSlice=createSlice({name:\"assessments\",initialState:initialState,reducers:{},extraReducers:(_extraReducers={},_defineProperty(_extraReducers,getDetailAssessmentV2.fulfilled.type,function(state,_ref10){var payload=_ref10.payload;state.assessmentDetailV2=payload.detail;state.my_id=payload.my_id;}),_defineProperty(_extraReducers,getDetailAssessmentV2.pending.type,function(state,_ref11){var payload=_ref11.payload;state.assessmentDetailV2=initialState.assessmentDetailV2;state.my_id=initialState.my_id;}),_defineProperty(_extraReducers,getAssessmentListV2.fulfilled.type,function(state,_ref12){var _payload$assessments;var payload=_ref12.payload;state.assessmentListV2=(_payload$assessments=payload.assessments)!==null&&_payload$assessments!==void 0?_payload$assessments:[];state.total=payload.total;}),_defineProperty(_extraReducers,getAssessmentListV2.pending.type,function(state,_ref13){var payload=_ref13.payload;state.assessmentListV2=initialState.assessmentListV2;state.total=initialState.total;}),_defineProperty(_extraReducers,getContentResourceUploadPath.fulfilled.type,function(state,_ref14){var payload=_ref14.payload;state.attachment_path=payload.path;state.attachment_id=payload.resource_id;}),_defineProperty(_extraReducers,getUserListByName.fulfilled.type,function(state,_ref15){var payload=_ref15.payload;state.teacherList=payload;}),_defineProperty(_extraReducers,getUserListByName.pending.type,function(state,_ref16){var payload=_ref16.payload;state.teacherList=initialState.teacherList;}),_defineProperty(_extraReducers,getUserListByName.rejected.type,function(state,_ref17){var payload=_ref17.payload;// user service bug修好后 删掉\nstate.teacherList=[];}),_extraReducers)}),reducer=_createSlice.reducer;export default reducer;","map":{"version":3,"names":["BooleanOperator","ConnectionDirection","StringOperator","UuidOperator","apiGetUserNameByUserId","apiWaitForOrganizationOfPage","AssessmentTypeValues","createAsyncThunk","createSlice","api","gqlapi","GetRolesIdDocument","GetUsersByNameDocument","QueryMyUserDocument","OrderByAssessmentList","AssessmentStatus","AssessmentStatusValues","initialState","total","undefined","assessmentList","homefunFeedbacks","hasPermissionOfHomefun","my_id","assessmentListV2","assessmentDetailV2","attachment_path","attachment_id","teacherList","getAssessmentListV2","metaLoading","query","status","assessment_type","order_by","query_key","query_type","page","page_size","isStudy","study","isReview","review","isHomefun","homeFun","_status","_order_by","_create_at","all","study_all","in_progress","study_inprogress","complete","_class_end_time","class_live_homefun_all","class_live_homefun_inprogress","_query","assessmentsV2","queryAssessmentV2","assessments","getDetailAssessmentV2","id","myUser","data","node","getAssessmentDetailV2","res","detail","teacher_ids","students","diff_content_students","teacherIds","studentIds","map","item","student_id","concat","userNamesArr","teachers","name","get","student_name","getUserListByName","variables","direction","Forward","directionArgs","count","filter","system","operator","Eq","value","roleData","teacherRoleId","rolesConnection","edges","forEach","orgId","roleId","organizationId","OR","familyName","Contains","caseInsensitive","givenName","usersConnection","updateAssessmentV2","getContentResourceUploadPath","contentsResources","getDownloadPath","actCreateDownload","resourceId","checkResourceExist","resource_id","reducers","extraReducers","fulfilled","type","state","payload","pending","path","rejected","reducer"],"sources":["/Users/evik/kl/project-2024/klasmart-assessment-frontend/src/reducers/assessments.ts"],"sourcesContent":["import { BooleanOperator, ConnectionDirection, StringOperator, UuidOperator } from \"@api/api-ko-schema.auto\";\nimport { apiGetUserNameByUserId, apiWaitForOrganizationOfPage } from \"@api/extra\";\nimport { AssessmentTypeValues } from \"@components/AssessmentType\";\nimport { DetailAssessmentProps } from \"@pages/DetailAssessment/type\";\nimport { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport api, { gqlapi } from \"../api\";\nimport {\n  GetRolesIdDocument,\n  GetRolesIdQuery,\n  GetRolesIdQueryVariables,\n  GetUsersByNameDocument,\n  GetUsersByNameQuery,\n  GetUsersByNameQueryVariables,\n  QueryMyUserDocument,\n  QueryMyUserQuery,\n  QueryMyUserQueryVariables\n} from \"../api/api-ko.auto\";\nimport { EntityScheduleFeedbackView } from \"../api/api.auto\";\nimport { ListAssessmentResult, ListAssessmentResultItem, OrderByAssessmentList } from \"../api/type\";\nimport {\n  AssessmentListResult,\n  AssessmentStatus,\n  AssessmentStatusValues, UserEntity\n} from \"../pages/ListAssessment/types\";\nimport { LoadingMetaPayload } from \"./middleware/loadingMiddleware\";\nimport { AsyncReturnType, AsyncTrunkReturned } from \"./type\";\n\nexport interface IAssessmentState {\n  my_id?: string;\n  total: ListAssessmentResult[\"total\"];\n  assessmentList: ListAssessmentResultItem[];\n  homefunFeedbacks: EntityScheduleFeedbackView[];\n  hasPermissionOfHomefun: boolean | undefined;\n  assessmentListV2: AssessmentListResult;\n  assessmentDetailV2: DetailAssessmentProps;\n  attachment_path: string;\n  attachment_id: string;\n  teacherList: UserEntity[] | undefined;\n}\n\n// interface RootState {\n//   assessments: IAssessmentState;\n// }\n\nconst initialState: IAssessmentState = {\n  total: undefined,\n  assessmentList: [],\n  homefunFeedbacks: [],\n  hasPermissionOfHomefun: false,\n  my_id: \"\",\n  assessmentListV2: [],\n  assessmentDetailV2: {},\n  attachment_path: \"\",\n  attachment_id: \"\",\n  teacherList: undefined,\n};\n\ntype IQueryAssessmentV2Params = Parameters<typeof api.assessmentsV2.queryAssessmentV2>[0] & LoadingMetaPayload;\ntype IQueryAssessmentV2Result = AsyncReturnType<typeof api.assessmentsV2.queryAssessmentV2>;\nexport const getAssessmentListV2 = createAsyncThunk<IQueryAssessmentV2Result, IQueryAssessmentV2Params>(\n  \"assessments/getAssessmentListV2\",\n  async ({ metaLoading, ...query }) => {\n    const { status, assessment_type, order_by, query_key, query_type, page, page_size } = query;\n    const isStudy = assessment_type === AssessmentTypeValues.study;\n    const isReview = assessment_type === AssessmentTypeValues.review;\n    const isHomefun = assessment_type === AssessmentTypeValues.homeFun;\n    let _status: string = \"\";\n    let _order_by: IQueryAssessmentV2Params[\"order_by\"];\n    if (isStudy || isReview || isHomefun) {\n      _order_by = order_by ? order_by : OrderByAssessmentList._create_at;\n      _status =\n        status === AssessmentStatus.all\n          ? AssessmentStatusValues.study_all\n          : status === AssessmentStatus.in_progress\n          ? AssessmentStatusValues.study_inprogress\n          : AssessmentStatusValues.complete;\n    } else {\n      _order_by = order_by ? order_by : OrderByAssessmentList._class_end_time;\n      _status =\n        status === AssessmentStatus.all\n          ? AssessmentStatusValues.class_live_homefun_all\n          : status === AssessmentStatus.in_progress\n          ? AssessmentStatusValues.class_live_homefun_inprogress\n          : AssessmentStatusValues.complete;\n    }\n    const _query = {\n      assessment_type,\n      page,\n      page_size,\n      status: _status,\n      order_by: _order_by,\n      query_key: query_key ? query_key : \" \",\n      query_type: query_key ? query_type : undefined,\n    };\n    const { assessments, total } = await api.assessmentsV2.queryAssessmentV2({ ..._query, page_size: 20 });\n    return { assessments, total };\n  }\n);\ntype IQueryDetailAssessmentResult = {\n  detail: DetailAssessmentProps;\n  my_id: string;\n};\nexport const getDetailAssessmentV2 = createAsyncThunk<IQueryDetailAssessmentResult, { id: string } & LoadingMetaPayload>(\n  \"assessments/getDetailAssessmentV2\",\n  async ({ id }) => {\n    // 拉取我的user_id\n    const {\n      data: { myUser },\n    } = await gqlapi.query<QueryMyUserQuery, QueryMyUserQueryVariables>({\n      query: QueryMyUserDocument,\n    });\n    const my_id = myUser?.node?.id || \"\";\n    const res = await api.assessmentsV2.getAssessmentDetailV2(id);\n    const detail: DetailAssessmentProps = { ...res };\n    const { teacher_ids, students, diff_content_students } = detail;\n    const teacherIds = teacher_ids || [];\n    const studentIds = diff_content_students\n      ? diff_content_students.map((item) => item.student_id!) || []\n      : students?.map((item) => item.student_id!) || [];\n    const userNamesArr = await apiGetUserNameByUserId(teacherIds.concat(studentIds));\n    detail.teachers = teacher_ids?.map((item) => {\n      const name = userNamesArr.get(item!);\n      return {\n        id: item,\n        name,\n      }\n    });\n    detail.students = diff_content_students\n      ? diff_content_students.map((item) => {\n          item.student_name = userNamesArr.get(item.student_id!);\n          return item;\n        })\n      : detail.students?.map((item) => {\n          item.student_name = userNamesArr.get(item.student_id!);\n          return item;\n        });\n    return { detail, my_id };\n  }\n);\n\nexport const getUserListByName = createAsyncThunk<UserEntity[] | undefined, string>(\"assessments/getUserListByName\", async (name) => {\n  if (!name) return undefined;\n  const { data: roleData } = await gqlapi.query<GetRolesIdQuery, GetRolesIdQueryVariables>({\n    query: GetRolesIdDocument,\n    variables: {\n      direction: ConnectionDirection.Forward,\n      directionArgs: { count: 10 },\n      filter: { system: { operator: BooleanOperator.Eq, value: true } },\n    },\n  });\n  let teacherRoleId = \"\";\n  roleData.rolesConnection?.edges?.forEach((item) => {\n    if (item?.node?.name === \"Teacher\") {\n      teacherRoleId = item.node.id;\n    }\n  });\n  const orgId = (await apiWaitForOrganizationOfPage()) as string;\n  const filter = {\n    filter: {\n      roleId: {\n        operator: UuidOperator.Eq,\n        value: teacherRoleId,\n      },\n      organizationId: {\n        operator: UuidOperator.Eq,\n        value: orgId,\n      },\n      OR: [\n        {\n          familyName: {\n            operator: StringOperator.Contains,\n            value: name,\n            caseInsensitive: true,\n          },\n        },\n        {\n          givenName: {\n            operator: StringOperator.Contains,\n            value: name,\n            caseInsensitive: true,\n          },\n        },\n      ],\n    },\n    directionArgs: {\n      count: 15,\n    },\n  };\n  const {\n    data: { usersConnection },\n  } = await gqlapi.query<GetUsersByNameQuery, GetUsersByNameQueryVariables>({\n    query: GetUsersByNameDocument,\n    variables: filter,\n  });\n  const teacherList = usersConnection?.edges?.map((item) => {\n    return {\n      id: item?.node?.id as string,\n      name: `${item?.node?.givenName} ${item?.node?.familyName}` as string,\n    };\n  });\n  return teacherList;\n});\ntype IQueryUpdateAssessmentParams = {\n  id: Parameters<typeof api.assessmentsV2.updateAssessmentV2>[0];\n  data: Parameters<typeof api.assessmentsV2.updateAssessmentV2>[1];\n};\nexport const updateAssessmentV2 = createAsyncThunk<string, IQueryUpdateAssessmentParams>(\n  \"assessments/updateAssessment\",\n  async ({ id, data }) => {\n    await api.assessmentsV2.updateAssessmentV2(id, data);\n    return id;\n  }\n);\n\ntype IGetContentsResourseParams = Parameters<typeof api.contentsResources.getContentResourceUploadPath>[0];\ntype IGetContentsResourseResult = AsyncReturnType<typeof api.contentsResources.getContentResourceUploadPath>;\nexport const getContentResourceUploadPath = createAsyncThunk<IGetContentsResourseResult, IGetContentsResourseParams>(\n  \"content/getContentResourceUploadPath\",\n  (query) => {\n    return api.contentsResources.getContentResourceUploadPath(query);\n  }\n);\n\ntype IGetDownloadPathParams = Parameters<typeof api.contentsResources.getDownloadPath>[0];\ntype IGetDownloadPathResult = AsyncReturnType<typeof api.contentsResources.getDownloadPath>;\nexport const getDownloadPath = createAsyncThunk<IGetDownloadPathResult, IGetDownloadPathParams>(\"content/getDownloadPath\", (query) => {\n  return api.contentsResources.getDownloadPath(query);\n});\n\ninterface ActCreateDownoadParams extends LoadingMetaPayload {\n  resourceId: string;\n}\nexport const actCreateDownload = createAsyncThunk<IGetDownloadPathResult, ActCreateDownoadParams>(\n  \"content/actCreateDownload\",\n  ({ resourceId }) => api.contentsResources.getDownloadPath(resourceId)\n);\n\ninterface checkResourceExistParams extends LoadingMetaPayload {\n  resource_id: string;\n}\ntype checkResourceExistResult = ReturnType<typeof api.contentsResources.checkResourceExist>;\nexport const checkResourceExist = createAsyncThunk<checkResourceExistResult, checkResourceExistParams>(\n  \"content/checkResourceExist\",\n  ({ resource_id }) => {\n    return api.contentsResources.checkResourceExist(resource_id);\n  }\n)\n\nconst { reducer } = createSlice({\n  name: \"assessments\",\n  initialState,\n  reducers: {},\n  extraReducers: {\n    [getDetailAssessmentV2.fulfilled.type]: (state, { payload }: PayloadAction<AsyncTrunkReturned<typeof getDetailAssessmentV2>>) => {\n      state.assessmentDetailV2 = payload.detail;\n      state.my_id = payload.my_id;\n    },\n    [getDetailAssessmentV2.pending.type]: (state, { payload }: PayloadAction<AsyncTrunkReturned<typeof getDetailAssessmentV2>>) => {\n      state.assessmentDetailV2 = initialState.assessmentDetailV2;\n      state.my_id = initialState.my_id;\n    },\n    [getAssessmentListV2.fulfilled.type]: (state, { payload }: PayloadAction<AsyncTrunkReturned<typeof getAssessmentListV2>>) => {\n      state.assessmentListV2 = payload.assessments ?? [];\n      state.total = payload.total;\n    },\n    [getAssessmentListV2.pending.type]: (state, { payload }: PayloadAction<AsyncTrunkReturned<typeof getAssessmentListV2>>) => {\n      state.assessmentListV2 = initialState.assessmentListV2;\n      state.total = initialState.total;\n    },\n    [getContentResourceUploadPath.fulfilled.type]: (state, { payload }: any) => {\n      state.attachment_path = payload.path;\n      state.attachment_id = payload.resource_id;\n    },\n    [getUserListByName.fulfilled.type]: (state, { payload }: any) => {\n      state.teacherList = payload;\n    },\n    [getUserListByName.pending.type]: (state, { payload }: PayloadAction<AsyncTrunkReturned<typeof getUserListByName>>) => {\n      state.teacherList = initialState.teacherList;\n    },\n    [getUserListByName.rejected.type]: (state, {payload}: any) => {\n      // user service bug修好后 删掉\n      state.teacherList = [];\n    },\n  },\n});\n\nexport default reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}