{"ast":null,"code":"import _asyncToGenerator from\"/Users/evik/kl/project-2024/klasmart-assessment-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/evik/kl/project-2024/klasmart-assessment-frontend/node_modules/@babel/runtime/regenerator/index.js\";var BaseURL=\"\".concat(process.env.REACT_APP_BASE_DOMAIN).concat(process.env.REACT_APP_BASE_API);export function addQueryParams(rawQuery){var query=rawQuery||{};var keys=Object.keys(query).filter(function(key){return\"undefined\"!==typeof query[key];});return keys.length?\"?\".concat(keys.map(function(key){return typeof query[key]===\"object\"&&!Array.isArray(query[key])?addQueryParams(query[key]).substring(1):addQueryParam(query,key);}).join(\"&\")):\"\";}export function addQueryParam(query,key){return encodeURIComponent(key)+\"=\"+encodeURIComponent(Array.isArray(query[key])?query[key].join(\",\"):query[key]);}var safeParseResponse=function safeParseResponse(response){return response.json().then(function(data){return data;}).catch(function(e){return response.text;});};export function dFetch(_x,_x2,_x3){return _dFetch.apply(this,arguments);}function _dFetch(){_dFetch=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(path,query,method){var headers;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:headers=new Headers();headers.append(\"Accept\",\"application/json\");headers.append(\"Content-Type\",\"application/json\");return _context2.abrupt(\"return\",fetch(\"\".concat(BaseURL).concat(path).concat(addQueryParams(query)),{method:method!==null&&method!==void 0?method:\"get\",credentials:\"include\",headers:headers}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return safeParseResponse(response);case 2:data=_context.sent;if(response.ok){_context.next=5;break;}throw data;case 5:return _context.abrupt(\"return\",data);case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x4){return _ref.apply(this,arguments);};}()));case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _dFetch.apply(this,arguments);}","map":{"version":3,"names":["BaseURL","process","env","REACT_APP_BASE_DOMAIN","REACT_APP_BASE_API","addQueryParams","rawQuery","query","keys","Object","filter","key","length","map","Array","isArray","substring","addQueryParam","join","encodeURIComponent","safeParseResponse","response","json","then","data","catch","e","text","dFetch","path","method","headers","Headers","append","fetch","credentials","ok"],"sources":["/Users/evik/kl/project-2024/klasmart-assessment-frontend/src/components/Dashboard/tools.ts"],"sourcesContent":["export type RequestQueryParamsType = Record<string | number, any>;\n\nconst BaseURL = `${process.env.REACT_APP_BASE_DOMAIN}${process.env.REACT_APP_BASE_API}`;\n\nexport function addQueryParams(rawQuery?: RequestQueryParamsType): string {\n  const query = rawQuery || {};\n  const keys = Object.keys(query).filter((key) => \"undefined\" !== typeof query[key]);\n  return keys.length\n    ? `?${keys\n        .map((key) =>\n          typeof query[key] === \"object\" && !Array.isArray(query[key])\n            ? addQueryParams(query[key] as object).substring(1)\n            : addQueryParam(query, key)\n        )\n        .join(\"&\")}`\n    : \"\";\n}\nexport function addQueryParam(query: RequestQueryParamsType, key: string) {\n  return encodeURIComponent(key) + \"=\" + encodeURIComponent(Array.isArray(query[key]) ? query[key].join(\",\") : query[key]);\n}\n\nconst safeParseResponse = <T = any>(response: Response): Promise<T> =>\n  response\n    .json()\n    .then((data) => data)\n    .catch((e) => response.text);\n\nexport async function dFetch(path: string, query: any, method?: \"get\" | \"post\") {\n  const headers = new Headers();\n  headers.append(`Accept`, `application/json`);\n  headers.append(`Content-Type`, `application/json`);\n\n  return fetch(`${BaseURL}${path}${addQueryParams(query)}`, {\n    method: method ?? \"get\",\n    credentials: `include`,\n    headers,\n  }).then(async (response) => {\n    const data = await safeParseResponse(response);\n    if (!response.ok) throw data;\n    return data;\n  });\n}\n"],"mappings":"+RAEA,GAAMA,CAAAA,OAAO,WAAMC,OAAO,CAACC,GAAR,CAAYC,qBAAlB,SAA0CF,OAAO,CAACC,GAAR,CAAYE,kBAAtD,CAAb,CAEA,MAAO,SAASC,CAAAA,cAAT,CAAwBC,QAAxB,CAAmE,CACxE,GAAMC,CAAAA,KAAK,CAAGD,QAAQ,EAAI,EAA1B,CACA,GAAME,CAAAA,IAAI,CAAGC,MAAM,CAACD,IAAP,CAAYD,KAAZ,EAAmBG,MAAnB,CAA0B,SAACC,GAAD,QAAS,cAAgB,MAAOJ,CAAAA,KAAK,CAACI,GAAD,CAArC,EAA1B,CAAb,CACA,MAAOH,CAAAA,IAAI,CAACI,MAAL,YACCJ,IAAI,CACLK,GADC,CACG,SAACF,GAAD,QACH,OAAOJ,CAAAA,KAAK,CAACI,GAAD,CAAZ,GAAsB,QAAtB,EAAkC,CAACG,KAAK,CAACC,OAAN,CAAcR,KAAK,CAACI,GAAD,CAAnB,CAAnC,CACIN,cAAc,CAACE,KAAK,CAACI,GAAD,CAAN,CAAd,CAAqCK,SAArC,CAA+C,CAA/C,CADJ,CAEIC,aAAa,CAACV,KAAD,CAAQI,GAAR,CAHd,EADH,EAMDO,IANC,CAMI,GANJ,CADD,EAQH,EARJ,CASD,CACD,MAAO,SAASD,CAAAA,aAAT,CAAuBV,KAAvB,CAAsDI,GAAtD,CAAmE,CACxE,MAAOQ,CAAAA,kBAAkB,CAACR,GAAD,CAAlB,CAA0B,GAA1B,CAAgCQ,kBAAkB,CAACL,KAAK,CAACC,OAAN,CAAcR,KAAK,CAACI,GAAD,CAAnB,EAA4BJ,KAAK,CAACI,GAAD,CAAL,CAAWO,IAAX,CAAgB,GAAhB,CAA5B,CAAmDX,KAAK,CAACI,GAAD,CAAzD,CAAzD,CACD,CAED,GAAMS,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAAUC,QAAV,QACxBA,CAAAA,QAAQ,CACLC,IADH,GAEGC,IAFH,CAEQ,SAACC,IAAD,QAAUA,CAAAA,IAAV,EAFR,EAGGC,KAHH,CAGS,SAACC,CAAD,QAAOL,CAAAA,QAAQ,CAACM,IAAhB,EAHT,CADwB,EAA1B,CAMA,eAAsBC,CAAAA,MAAtB,mD,mFAAO,kBAAsBC,IAAtB,CAAoCtB,KAApC,CAAgDuB,MAAhD,kIACCC,OADD,CACW,GAAIC,CAAAA,OAAJ,EADX,CAELD,OAAO,CAACE,MAAR,8BACAF,OAAO,CAACE,MAAR,oCAHK,iCAKEC,KAAK,WAAIlC,OAAJ,SAAc6B,IAAd,SAAqBxB,cAAc,CAACE,KAAD,CAAnC,EAA8C,CACxDuB,MAAM,CAAEA,MAAF,SAAEA,MAAF,UAAEA,MAAF,CAAY,KADsC,CAExDK,WAAW,UAF6C,CAGxDJ,OAAO,CAAPA,OAHwD,CAA9C,CAAL,CAIJR,IAJI,0FAIC,iBAAOF,QAAP,iJACaD,CAAAA,iBAAiB,CAACC,QAAD,CAD9B,QACAG,IADA,kBAEDH,QAAQ,CAACe,EAFR,8BAEkBZ,CAAAA,IAFlB,wCAGCA,IAHD,wDAJD,gEALF,0D"},"metadata":{},"sourceType":"module"}