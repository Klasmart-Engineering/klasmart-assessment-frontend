{"ast":null,"code":"import _toConsumableArray from\"/Users/evik/kl/project-2024/klasmart-assessment-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/evik/kl/project-2024/klasmart-assessment-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/evik/kl/project-2024/klasmart-assessment-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/evik/kl/project-2024/klasmart-assessment-frontend/node_modules/@babel/runtime/regenerator/index.js\";import{uploadFile}from\"@api/extra\";import PermissionType from\"@api/PermissionType\";import{NoOutcome}from\"@components/TipImages\";import{usePermission}from\"@hooks/usePermission\";import useQueryCms from\"@hooks/useQueryCms\";import{getContentResourceUploadPath,getDetailAssessmentV2,updateAssessmentV2}from\"@reducers/assessments\";import{actAsyncConfirm}from\"@reducers/confirm\";import{actSuccess,actWarning}from\"@reducers/notify\";import{unwrapResult}from\"@reduxjs/toolkit\";import{setQuery}from\"@utilities/urlUtilities\";import{cloneDeep}from\"lodash\";import React,{useEffect,useMemo,useState}from\"react\";import{useForm}from\"react-hook-form\";import{useDispatch,useSelector}from\"react-redux\";import{useHistory}from\"react-router-dom\";import{AssessmentTypeValues}from\"../../components/AssessmentType\";import{d}from\"../../locale/LocaleManager\";import{ModelAssessment}from\"../../models/ModelAssessment\";import LayoutPair from\"../ContentEdit/Layout\";import{AssessmentStatus}from\"../ListAssessment/types\";import{DetailForm}from\"./DetailForm\";import{DetailHeader}from\"./DetailHeader\";import{Homefun}from\"./HomefunView\";import{MaterialView}from\"./MaterialView\";import{Dimension,MultiSelect,Subtitle}from\"./MultiSelect\";import{OverallOutcomes}from\"./OverallOutcomes\";import{StudentView}from\"./StudentView\";import{OutcomeStatus,StudentParticipate}from\"./type\";// export const setQuery = (search: string, hash: Record<string, string | number | boolean>): string => {\n//   const query = new URLSearchParams(search);\n//   Object.keys(hash).forEach((key) => query.set(key, String(hash[key])));\n//   return query.toString();\n// };\n// export const toQueryString = (hash: Record<string, any>): string => {\n//   const search = new URLSearchParams(hash);\n//   return `?${search.toString()}`;\n// };\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useQuery=function useQuery(){var _useQueryCms=useQueryCms(),id=_useQueryCms.id,editindex=_useQueryCms.editindex,querys=_useQueryCms.querys;var assessment_type=querys.get(\"assessment_type\")||AssessmentTypeValues.live;return useMemo(function(){return{assessment_type:assessment_type,editindex:editindex,id:id};},[assessment_type,editindex,id]);};export function DetailAssessment(){var _assessmentDetailV2$t;var dispatch=useDispatch();var history=useHistory();var _useSelector=useSelector(function(state){return state.assessments;}),assessmentDetailV2=_useSelector.assessmentDetailV2,my_id=_useSelector.my_id,attachment_id=_useSelector.attachment_id;var _useQuery=useQuery(),assessment_type=_useQuery.assessment_type,editindex=_useQuery.editindex,id=_useQuery.id;var isStudy=assessment_type===AssessmentTypeValues.study;var isClass=assessment_type===AssessmentTypeValues.class;var isReview=assessment_type===AssessmentTypeValues.review;var isHomefun=assessment_type===AssessmentTypeValues.homeFun;var formMethods=useForm();var _useState=useState(),_useState2=_slicedToArray(_useState,2),students=_useState2[0],setStudents=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),contents=_useState4[0],setContents=_useState4[1];var initStudentViewItems=useMemo(function(){if(isReview){return ModelAssessment.getReviewStudentsItems(assessmentDetailV2.diff_content_students);}else{return ModelAssessment.getStudentViewItems(assessmentDetailV2.students,assessmentDetailV2.contents,assessmentDetailV2.outcomes,assessment_type);}},[assessmentDetailV2.contents,assessmentDetailV2.diff_content_students,assessmentDetailV2.outcomes,assessmentDetailV2.students,assessment_type,isReview]);var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),computedStudentViewItems=_useState6[0],setComputedStudentViewItems=_useState6[1];var overallOutcomes=useMemo(function(){var outcomes=ModelAssessment.getOverallOutcomes(computedStudentViewItems?computedStudentViewItems:initStudentViewItems);return outcomes;},[computedStudentViewItems,initStudentViewItems]);var attendanceList=useMemo(function(){if(students){return students===null||students===void 0?void 0:students.filter(function(student){return student.status===StudentParticipate.Participate;});}else{var _assessmentDetailV2$s;return(_assessmentDetailV2$s=assessmentDetailV2.students)===null||_assessmentDetailV2$s===void 0?void 0:_assessmentDetailV2$s.filter(function(student){return student.status===StudentParticipate.Participate;});}},[assessmentDetailV2.students,students]);var _useState7=useState(isHomefun?Dimension.submitted:Dimension.student),_useState8=_slicedToArray(_useState7,2),dimension=_useState8[0],setDimension=_useState8[1];var ViewDimension=function ViewDimension(){if(isHomefun){return[{label:d(\"Submitted\").t(\"assessment_hfs_submitted\"),value:Dimension.submitted},{label:d(\"Not Submitted\").t(\"assessment_hfs_not_submitted\"),value:Dimension.notSubmitted},{label:d(\"All\").t(\"assessment_hfs_all\"),value:Dimension.all}];}else{return[{label:d(\"View by Students\").t(\"assess_detail_view_by_students\"),value:Dimension.student},{label:d(\"View by Lesson Material\").t(\"assess_detail_view_by_lesson_material\"),value:Dimension.material}];}};var initSubDimension=useMemo(function(){return ModelAssessment.getInitSubDimension(dimension,computedStudentViewItems?computedStudentViewItems:initStudentViewItems);},[computedStudentViewItems,dimension,initStudentViewItems]);var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),subDimesion=_useState10[0],setSubDimension=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),selectedSubdimension=_useState12[0],setSelectedSubdimension=_useState12[1];var perm=usePermission([PermissionType.edit_in_progress_assessment_439,PermissionType.edit_attendance_for_in_progress_assessment_438]);var perm_439=Boolean(perm.edit_in_progress_assessment_439);var hasEditPerm=Boolean(perm_439||perm.edit_attendance_for_in_progress_assessment_438);var isMyAssessmentlist=(_assessmentDetailV2$t=assessmentDetailV2.teachers)===null||_assessmentDetailV2$t===void 0?void 0:_assessmentDetailV2$t.filter(function(item){return item.id===my_id;});var isMyAssessment=Boolean(isMyAssessmentlist&&isMyAssessmentlist.length>0);var hasRemainTime=assessmentDetailV2.remaining_time?assessmentDetailV2.remaining_time>0:false;var isComplete=assessmentDetailV2.status===AssessmentStatus.complete;var editable=isStudy||isReview||isHomefun?isMyAssessment&&perm_439&&!hasRemainTime&&!isComplete:isMyAssessment&&perm_439&&!isComplete&&!hasRemainTime;var completeRate=useMemo(function(){var _ModelAssessment$getC=ModelAssessment.getCompleteRateV2(computedStudentViewItems?computedStudentViewItems:initStudentViewItems),all=_ModelAssessment$getC.all,attempt=_ModelAssessment$getC.attempt;if(all===0)return d(\"N/A\").t(\"assess_column_n_a\");if(attempt===0)return\"0\";return\"\".concat(Math.round(attempt/all*100),\"%\");},[computedStudentViewItems,initStudentViewItems]);var defaultStudents=useMemo(function(){if(students){return students;}else if(isReview){return assessmentDetailV2.diff_content_students;}else{return assessmentDetailV2.students;}},[assessmentDetailV2.diff_content_students,assessmentDetailV2.students,isReview,students]);var handleGoBack=function handleGoBack(){history.goBack();};var handleDetailSave=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _ModelAssessment$getU,_contents,_students,data,_ref2,payload;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!id){_context.next=8;break;}_ModelAssessment$getU=ModelAssessment.getUpdateAssessmentData(assessment_type,contents?contents:assessmentDetailV2.contents,computedStudentViewItems?computedStudentViewItems:initStudentViewItems),_contents=_ModelAssessment$getU._contents,_students=_ModelAssessment$getU._students;data={action:\"Draft\",contents:isReview||isHomefun?undefined:_toConsumableArray(_contents),id:id,students:_toConsumableArray(_students)};_context.next=5;return dispatch(updateAssessmentV2({id:id,data:data}));case 5:_ref2=_context.sent;payload=_ref2.payload;if(payload){dispatch(actSuccess(d(\"Saved Successfully.\").t(\"assess_msg_save_successfully\")));history.replace({search:setQuery(history.location.search,{id:payload,editindex:editindex+1})});}case 8:case\"end\":return _context.stop();}}},_callee);}));return function handleDetailSave(){return _ref.apply(this,arguments);};}();var handleDetailComplete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var notFillItem,hasNotAttempted,content,_unwrapResult,isConfirmed,_students2,hasNotFillItem,_ModelAssessment$getU2,_contents,_students,data,_ref4,payload;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:notFillItem=overallOutcomes.find(function(oItem){var _oItem$partial_attend;return!oItem.skip&&!oItem.none_achieved&&(oItem===null||oItem===void 0?void 0:oItem.attendance_ids)&&(oItem===null||oItem===void 0?void 0:oItem.attendance_ids.length)===0&&((_oItem$partial_attend=oItem.partial_attendance_ids)===null||_oItem$partial_attend===void 0?void 0:_oItem$partial_attend.length)===0;});if(!notFillItem){_context2.next=3;break;}return _context2.abrupt(\"return\",Promise.reject(dispatch(actWarning(d(\"Please fill in all the information.\").t(\"assess_msg_missing_infor\")))));case 3:if(!(assessment_type===AssessmentTypeValues.study)){_context2.next=15;break;}hasNotAttempted=ModelAssessment.getCompleteStatus(computedStudentViewItems);if(!hasNotAttempted){_context2.next=15;break;}content=d(\"You cannot change the assessment after clicking Complete.\").t(\"assess_msg_cannot_delete\");_context2.t0=unwrapResult;_context2.next=10;return dispatch(actAsyncConfirm({content:content,hideCancel:false}));case 10:_context2.t1=_context2.sent;_unwrapResult=(0,_context2.t0)(_context2.t1);isConfirmed=_unwrapResult.isConfirmed;if(isConfirmed){_context2.next=15;break;}return _context2.abrupt(\"return\",Promise.reject());case 15:if(!isHomefun){_context2.next=20;break;}_students2=computedStudentViewItems?computedStudentViewItems:initStudentViewItems;hasNotFillItem=_students2===null||_students2===void 0?void 0:_students2.some(function(sItem){return sItem.results&&sItem.results[0]&&sItem.results[0].outcomes&&sItem.results[0].outcomes.some(function(oItem){return oItem.status===OutcomeStatus.Unknown;});});if(!hasNotFillItem){_context2.next=20;break;}return _context2.abrupt(\"return\",Promise.reject(dispatch(actWarning(d(\"Please fill in all the information.\").t(\"assess_msg_missing_infor\")))));case 20:if(!id){_context2.next=28;break;}_ModelAssessment$getU2=ModelAssessment.getUpdateAssessmentData(assessment_type,contents?contents:assessmentDetailV2.contents,computedStudentViewItems?computedStudentViewItems:initStudentViewItems),_contents=_ModelAssessment$getU2._contents,_students=_ModelAssessment$getU2._students;data={action:\"Complete\",contents:isReview?undefined:_toConsumableArray(_contents),id:id,students:_toConsumableArray(_students)};_context2.next=25;return dispatch(updateAssessmentV2({id:id,data:data}));case 25:_ref4=_context2.sent;payload=_ref4.payload;if(payload){dispatch(actSuccess(d(\"Completed Successfully.\").t(\"assess_msg_compete_successfully\")));history.replace({search:setQuery(history.location.search,{id:payload,editindex:editindex+1})});}case 28:case\"end\":return _context2.stop();}}},_callee2);}));return function handleDetailComplete(){return _ref3.apply(this,arguments);};}();var handleChangeStudent=function handleChangeStudent(students){students&&setStudents(_toConsumableArray(students));var selectedStudents;if(isReview){var newStudent=ModelAssessment.getReviewStudentsItems(students);selectedStudents=ModelAssessment.getStudentViewItemByStudent(newStudent,computedStudentViewItems?computedStudentViewItems:initStudentViewItems);}else{selectedStudents=ModelAssessment.getStudentViewItemByStudent(students,computedStudentViewItems?computedStudentViewItems:initStudentViewItems);}setComputedStudentViewItems(selectedStudents);var subDimension=ModelAssessment.getInitSubDimension(dimension,selectedStudents);setSubDimension(subDimension);setSelectedSubdimension(subDimension);};var handleChangeContents=function handleChangeContents(contents){contents&&setContents(_toConsumableArray(contents));var selectedContents=ModelAssessment.getStudentViewItemsByContent(computedStudentViewItems?computedStudentViewItems:initStudentViewItems,contents);setComputedStudentViewItems(selectedContents);var subDimension=ModelAssessment.getInitSubDimension(dimension,selectedContents);setSubDimension(subDimension);setSelectedSubdimension(subDimension);};var handleChangeComputedStudentViewItems=function handleChangeComputedStudentViewItems(studentViewItems){studentViewItems&&setComputedStudentViewItems(_toConsumableArray(studentViewItems));};var handleChangeAllAchieved=function handleChangeAllAchieved(checked,outcome_id){var _computedStudentViewItems=computedStudentViewItems?cloneDeep(computedStudentViewItems):cloneDeep(initStudentViewItems);_computedStudentViewItems===null||_computedStudentViewItems===void 0?void 0:_computedStudentViewItems.forEach(function(sItem){var _sItem$results;sItem===null||sItem===void 0?void 0:(_sItem$results=sItem.results)===null||_sItem$results===void 0?void 0:_sItem$results.forEach(function(rItem){var _rItem$outcomes;rItem===null||rItem===void 0?void 0:(_rItem$outcomes=rItem.outcomes)===null||_rItem$outcomes===void 0?void 0:_rItem$outcomes.forEach(function(oItem){if(oItem.outcome_id===outcome_id){oItem.status=checked?OutcomeStatus.Achieved:OutcomeStatus.Unknown;}});});});setComputedStudentViewItems(_computedStudentViewItems);};var handleChangeMaterialAllAchieved=function handleChangeMaterialAllAchieved(checked,content_id,outcome_id){var _computedStudentViewItems=computedStudentViewItems?cloneDeep(computedStudentViewItems):cloneDeep(initStudentViewItems);_computedStudentViewItems===null||_computedStudentViewItems===void 0?void 0:_computedStudentViewItems.forEach(function(sItem){var _sItem$results2;sItem===null||sItem===void 0?void 0:(_sItem$results2=sItem.results)===null||_sItem$results2===void 0?void 0:_sItem$results2.forEach(function(rItem){if(rItem.content_id===content_id){var _rItem$outcomes2;rItem===null||rItem===void 0?void 0:(_rItem$outcomes2=rItem.outcomes)===null||_rItem$outcomes2===void 0?void 0:_rItem$outcomes2.forEach(function(oItem){if(oItem.outcome_id===outcome_id){oItem.status=checked?OutcomeStatus.Achieved:OutcomeStatus.Unknown;}});}});});setComputedStudentViewItems(_computedStudentViewItems);};var handleChangeMaterialNoneAchieved=function handleChangeMaterialNoneAchieved(checked,content_id,outcome_id){var _computedStudentViewItems=computedStudentViewItems?cloneDeep(computedStudentViewItems):cloneDeep(initStudentViewItems);_computedStudentViewItems===null||_computedStudentViewItems===void 0?void 0:_computedStudentViewItems.forEach(function(sItem){var _sItem$results3;sItem===null||sItem===void 0?void 0:(_sItem$results3=sItem.results)===null||_sItem$results3===void 0?void 0:_sItem$results3.forEach(function(rItem){if(rItem.content_id===content_id){var _rItem$outcomes3;rItem===null||rItem===void 0?void 0:(_rItem$outcomes3=rItem.outcomes)===null||_rItem$outcomes3===void 0?void 0:_rItem$outcomes3.forEach(function(oItem){if(oItem.outcome_id===outcome_id){oItem.status=checked?OutcomeStatus.NotAchieved:OutcomeStatus.Unknown;}});}});});setComputedStudentViewItems(_computedStudentViewItems);};var handleChangeMatarialStudentStatus=function handleChangeMatarialStudentStatus(checked,student_id,content_id,outcome_id){var _computedStudentViewItems=computedStudentViewItems?cloneDeep(computedStudentViewItems):cloneDeep(initStudentViewItems);_computedStudentViewItems===null||_computedStudentViewItems===void 0?void 0:_computedStudentViewItems.forEach(function(sItem){if(sItem.student_id===student_id){var _sItem$results4;sItem===null||sItem===void 0?void 0:(_sItem$results4=sItem.results)===null||_sItem$results4===void 0?void 0:_sItem$results4.forEach(function(rItem){if(rItem.content_id===content_id){var _rItem$outcomes4;rItem===null||rItem===void 0?void 0:(_rItem$outcomes4=rItem.outcomes)===null||_rItem$outcomes4===void 0?void 0:_rItem$outcomes4.forEach(function(oItem){if(oItem.outcome_id===outcome_id){oItem.status=checked?OutcomeStatus.Achieved:OutcomeStatus.Unknown;}});}});}});setComputedStudentViewItems(_computedStudentViewItems);};var handleChangeNoneAchieved=function handleChangeNoneAchieved(checked,outcome_id){var _computedStudentViewItems=computedStudentViewItems?cloneDeep(computedStudentViewItems):cloneDeep(initStudentViewItems);_computedStudentViewItems===null||_computedStudentViewItems===void 0?void 0:_computedStudentViewItems.forEach(function(sItem){var _sItem$results5;sItem===null||sItem===void 0?void 0:(_sItem$results5=sItem.results)===null||_sItem$results5===void 0?void 0:_sItem$results5.forEach(function(rItem){var _rItem$outcomes5;rItem===null||rItem===void 0?void 0:(_rItem$outcomes5=rItem.outcomes)===null||_rItem$outcomes5===void 0?void 0:_rItem$outcomes5.forEach(function(oItem){if(oItem.outcome_id===outcome_id){oItem.status=checked?OutcomeStatus.NotAchieved:OutcomeStatus.Unknown;}});});});setComputedStudentViewItems(_computedStudentViewItems);};var handleChangeStudentStatus=function handleChangeStudentStatus(checked,student_id,outcome_id){var _computedStudentViewItems=computedStudentViewItems?cloneDeep(computedStudentViewItems):cloneDeep(initStudentViewItems);_computedStudentViewItems===null||_computedStudentViewItems===void 0?void 0:_computedStudentViewItems.forEach(function(sItem){if(sItem.student_id===student_id){var _sItem$results6;sItem===null||sItem===void 0?void 0:(_sItem$results6=sItem.results)===null||_sItem$results6===void 0?void 0:_sItem$results6.forEach(function(rItem){var _rItem$outcomes6;rItem===null||rItem===void 0?void 0:(_rItem$outcomes6=rItem.outcomes)===null||_rItem$outcomes6===void 0?void 0:_rItem$outcomes6.forEach(function(oItem){if(oItem.outcome_id===outcome_id){oItem.status=checked?OutcomeStatus.Achieved:OutcomeStatus.Unknown;}});});}});setComputedStudentViewItems(_computedStudentViewItems);};var handleChangeNotCovered=function handleChangeNotCovered(checked,outcome_id){var _computedStudentViewItems=computedStudentViewItems?cloneDeep(computedStudentViewItems):cloneDeep(initStudentViewItems);_computedStudentViewItems===null||_computedStudentViewItems===void 0?void 0:_computedStudentViewItems.forEach(function(sItem){var _sItem$results7;sItem===null||sItem===void 0?void 0:(_sItem$results7=sItem.results)===null||_sItem$results7===void 0?void 0:_sItem$results7.forEach(function(rItem){var _rItem$outcomes7;rItem===null||rItem===void 0?void 0:(_rItem$outcomes7=rItem.outcomes)===null||_rItem$outcomes7===void 0?void 0:_rItem$outcomes7.forEach(function(oItem){if(oItem.outcome_id===outcome_id){oItem.status=checked?OutcomeStatus.NotCovered:OutcomeStatus.Unknown;}});});});setComputedStudentViewItems(_computedStudentViewItems);};var handleChangeDimension=function handleChangeDimension(value){setDimension(value);var _subDimension=ModelAssessment.getInitSubDimension(value,computedStudentViewItems?computedStudentViewItems:initStudentViewItems);setSubDimension(_subDimension);setSelectedSubdimension(_subDimension);};var handleChangeSubdimension=function handleChangeSubdimension(value){setSelectedSubdimension(value);};var handleChangeHomefunStudnet=function handleChangeHomefunStudnet(students){setComputedStudentViewItems(students);};var handleSaveDrawFeedback=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(studentId,assignment_id,imgObj){var extension,_ref6,payload,path,resource_id,newStudents;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:extension=imgObj.name.split(\".\").pop();_context3.next=3;return dispatch(getContentResourceUploadPath({partition:\"drawing_feedback\",extension:extension}));case 3:_ref6=_context3.sent;payload=_ref6.payload;path=payload.path,resource_id=payload.resource_id;if(resource_id){uploadFile(path,imgObj);newStudents=cloneDeep(computedStudentViewItems?computedStudentViewItems:initStudentViewItems);newStudents===null||newStudents===void 0?void 0:newStudents.forEach(function(sItem){if(sItem.student_id===studentId){var results=sItem.results;if(results&&results[0]&&results[0].student_feed_backs&&results[0].student_feed_backs[0]){var student_feed_back=results[0].student_feed_backs[0];if(student_feed_back&&student_feed_back!==null&&student_feed_back!==void 0&&student_feed_back.assignments){student_feed_back.assignments.forEach(function(item){if(item.id===assignment_id){item.review_attachment_id=resource_id;}});}}}});setComputedStudentViewItems(newStudents);}case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function handleSaveDrawFeedback(_x,_x2,_x3){return _ref5.apply(this,arguments);};}();var rightside=/*#__PURE__*/_jsxs(_Fragment,{children:[isHomefun&&/*#__PURE__*/_jsx(Subtitle,{text:d(\"Learning Outcome Assessment\").t(\"assessment_learning_outcome_assessment\")}),!isClass&&/*#__PURE__*/_jsx(MultiSelect,{mainDimension:ViewDimension(),assessment_type:assessment_type,onChangeDimension:handleChangeDimension,dimension:dimension,subDimension:subDimesion?subDimesion:initSubDimension||[],onChangeSubdimension:handleChangeSubdimension}),!isReview&&!isHomefun&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Subtitle,{text:dimension===Dimension.student?d(\"Learning Outcome Assessment\").t(\"assessment_learning_outcome_assessment\"):d(\"Lesson Plan Assessment\").t(\"assess_detail_lesson_plan_assessment\")}),overallOutcomes&&overallOutcomes.length?/*#__PURE__*/_jsx(OverallOutcomes,{attendanceList:attendanceList,overallOutcomes:overallOutcomes,editable:editable,onChangeAllAchieved:handleChangeAllAchieved,onChangeNoneAchieved:handleChangeNoneAchieved,onChangeStudentStatus:handleChangeStudentStatus,onChangeNotCovered:handleChangeNotCovered}):/*#__PURE__*/_jsx(NoOutcome,{})]}),!isClass&&!isHomefun&&dimension===Dimension.student&&/*#__PURE__*/_jsxs(_Fragment,{children:[!isReview&&/*#__PURE__*/_jsx(Subtitle,{text:d(\"Score Assessment\").t(\"assess_detail_score_assessment\")}),/*#__PURE__*/_jsx(StudentView,{dimension:dimension,subDimension:selectedSubdimension?selectedSubdimension:initSubDimension||[],studentViewItems:computedStudentViewItems?computedStudentViewItems:initStudentViewItems,editable:editable,roomId:assessmentDetailV2.room_id,assessment_type:assessment_type,is_anyone_attempted:assessmentDetailV2.is_anyone_attempted,onChangeComputedStudentViewItems:handleChangeComputedStudentViewItems})]}),!isClass&&!isHomefun&&!isReview&&dimension===Dimension.material&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Subtitle,{text:d(\"Lesson Material Assessment\").t(\"assessment_lesson_material_assessment\")}),/*#__PURE__*/_jsx(MaterialView,{dimension:dimension,subDimension:selectedSubdimension?selectedSubdimension:initSubDimension||[],studentViewItems:computedStudentViewItems?computedStudentViewItems:initStudentViewItems,students:students?students:assessmentDetailV2.students,contents:contents?contents:assessmentDetailV2.contents,editable:editable,roomId:assessmentDetailV2.room_id,onChangeMaterialAllAchieved:handleChangeMaterialAllAchieved,onChangeMaterialNoneAchieved:handleChangeMaterialNoneAchieved,onChangeMatarialStudentStatus:handleChangeMatarialStudentStatus,onChangeComputedStudentViewItems:handleChangeComputedStudentViewItems})]}),isHomefun&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Subtitle,{text:d(\"Comments & Ratings\").t(\"assessment_hfs_comment_rating\")}),/*#__PURE__*/_jsx(Homefun,{editable:editable,dimension:dimension,attachment_id:attachment_id,subDimension:selectedSubdimension?selectedSubdimension:initSubDimension||[],students:computedStudentViewItems?computedStudentViewItems:initStudentViewItems,onChangeHomefunStudent:handleChangeHomefunStudnet,onSaveDrawFeedback:handleSaveDrawFeedback})]})]});useEffect(function(){dispatch(getDetailAssessmentV2({id:id,metaLoading:true}));},[dispatch,id,editindex]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(DetailHeader,{name:d(\"Assessment Details\").t(\"assess_assessment_details\"),onBack:handleGoBack,onComplete:handleDetailComplete,onSave:handleDetailSave,editable:editable}),/*#__PURE__*/_jsxs(LayoutPair,{breakpoint:1536,leftWidth:603,rightWidth:1205,spacing:32,basePadding:0,padding:40,children:[/*#__PURE__*/_jsx(DetailForm,{assessmentDetail:assessmentDetailV2,students:defaultStudents,contents:contents?contents:assessmentDetailV2.contents,assessmentType:assessment_type,formMethods:formMethods,editable:editable,onChangeStudent:handleChangeStudent,onChangeContents:handleChangeContents,completeRate:completeRate,hasEditPerm:hasEditPerm}),rightside]})]});}DetailAssessment.routeBasePath=\"/assessments/details\";","map":{"version":3,"names":["uploadFile","PermissionType","NoOutcome","usePermission","useQueryCms","getContentResourceUploadPath","getDetailAssessmentV2","updateAssessmentV2","actAsyncConfirm","actSuccess","actWarning","unwrapResult","setQuery","cloneDeep","React","useEffect","useMemo","useState","useForm","useDispatch","useSelector","useHistory","AssessmentTypeValues","d","ModelAssessment","LayoutPair","AssessmentStatus","DetailForm","DetailHeader","Homefun","MaterialView","Dimension","MultiSelect","Subtitle","OverallOutcomes","StudentView","OutcomeStatus","StudentParticipate","useQuery","id","editindex","querys","assessment_type","get","live","DetailAssessment","dispatch","history","state","assessments","assessmentDetailV2","my_id","attachment_id","isStudy","study","isClass","class","isReview","review","isHomefun","homeFun","formMethods","students","setStudents","contents","setContents","initStudentViewItems","getReviewStudentsItems","diff_content_students","getStudentViewItems","outcomes","computedStudentViewItems","setComputedStudentViewItems","overallOutcomes","getOverallOutcomes","attendanceList","filter","student","status","Participate","submitted","dimension","setDimension","ViewDimension","label","t","value","notSubmitted","all","material","initSubDimension","getInitSubDimension","subDimesion","setSubDimension","selectedSubdimension","setSelectedSubdimension","perm","edit_in_progress_assessment_439","edit_attendance_for_in_progress_assessment_438","perm_439","Boolean","hasEditPerm","isMyAssessmentlist","teachers","item","isMyAssessment","length","hasRemainTime","remaining_time","isComplete","complete","editable","completeRate","getCompleteRateV2","attempt","Math","round","defaultStudents","handleGoBack","goBack","handleDetailSave","getUpdateAssessmentData","_contents","_students","data","action","undefined","payload","replace","search","location","handleDetailComplete","notFillItem","find","oItem","skip","none_achieved","attendance_ids","partial_attendance_ids","Promise","reject","hasNotAttempted","getCompleteStatus","content","hideCancel","isConfirmed","hasNotFillItem","some","sItem","results","Unknown","handleChangeStudent","selectedStudents","newStudent","getStudentViewItemByStudent","subDimension","handleChangeContents","selectedContents","getStudentViewItemsByContent","handleChangeComputedStudentViewItems","studentViewItems","handleChangeAllAchieved","checked","outcome_id","_computedStudentViewItems","forEach","rItem","Achieved","handleChangeMaterialAllAchieved","content_id","handleChangeMaterialNoneAchieved","NotAchieved","handleChangeMatarialStudentStatus","student_id","handleChangeNoneAchieved","handleChangeStudentStatus","handleChangeNotCovered","NotCovered","handleChangeDimension","_subDimension","handleChangeSubdimension","handleChangeHomefunStudnet","handleSaveDrawFeedback","studentId","assignment_id","imgObj","extension","name","split","pop","partition","path","resource_id","newStudents","student_feed_backs","student_feed_back","assignments","review_attachment_id","rightside","room_id","is_anyone_attempted","metaLoading","routeBasePath"],"sources":["/Users/evik/kl/project-2024/klasmart-assessment-frontend/src/pages/DetailAssessment/index.tsx"],"sourcesContent":["import { V2AssessmentUpdateReq } from \"@api/api.auto\";\nimport { uploadFile } from \"@api/extra\";\nimport PermissionType from \"@api/PermissionType\";\nimport { NoOutcome } from \"@components/TipImages\";\nimport { usePermission } from \"@hooks/usePermission\";\nimport useQueryCms from \"@hooks/useQueryCms\";\nimport { getContentResourceUploadPath, getDetailAssessmentV2, updateAssessmentV2 } from \"@reducers/assessments\";\nimport { actAsyncConfirm } from \"@reducers/confirm\";\nimport { actSuccess, actWarning } from \"@reducers/notify\";\nimport { AsyncTrunkReturned } from \"@reducers/type\";\nimport { PayloadAction, unwrapResult } from \"@reduxjs/toolkit\";\nimport { setQuery } from \"@utilities/urlUtilities\";\nimport { cloneDeep } from \"lodash\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { AssessmentTypeValues } from \"../../components/AssessmentType\";\nimport { d } from \"../../locale/LocaleManager\";\nimport { ModelAssessment } from \"../../models/ModelAssessment\";\nimport { AppDispatch, RootState } from \"../../reducers\";\nimport LayoutPair from \"../ContentEdit/Layout\";\nimport { AssessmentStatus, DetailAssessmentResult } from \"../ListAssessment/types\";\nimport { DetailForm } from \"./DetailForm\";\nimport { DetailHeader } from \"./DetailHeader\";\nimport { Homefun } from \"./HomefunView\";\nimport { MaterialView, MaterialViewProps } from \"./MaterialView\";\nimport { Dimension, MultiSelect, MultiSelectProps, Subtitle } from \"./MultiSelect\";\nimport { OverallOutcomes, OverallOutcomesProps } from \"./OverallOutcomes\";\nimport { StudentView } from \"./StudentView\";\nimport { OutcomeStatus, StudentParticipate, StudentProps, StudentViewItemsProps, SubDimensionOptions, UpdateAssessmentDataOmitAction } from \"./type\";\n\n// export const setQuery = (search: string, hash: Record<string, string | number | boolean>): string => {\n//   const query = new URLSearchParams(search);\n//   Object.keys(hash).forEach((key) => query.set(key, String(hash[key])));\n//   return query.toString();\n// };\n// export const toQueryString = (hash: Record<string, any>): string => {\n//   const search = new URLSearchParams(hash);\n//   return `?${search.toString()}`;\n// };\n\nconst useQuery = () => {\n  const { id, editindex, querys } = useQueryCms();\n  const assessment_type = (querys.get(\"assessment_type\") as AssessmentTypeValues) || AssessmentTypeValues.live;\n  return useMemo(() => {\n    return { assessment_type, editindex, id };\n  }, [assessment_type, editindex, id]);\n};\nexport function DetailAssessment() {\n  const dispatch = useDispatch<AppDispatch>();\n  const history = useHistory();\n  const { assessmentDetailV2, my_id, attachment_id } = useSelector<RootState, RootState[\"assessments\"]>((state) => state.assessments);\n  const { assessment_type, editindex, id } = useQuery();\n  const isStudy = assessment_type === AssessmentTypeValues.study;\n  const isClass = assessment_type === AssessmentTypeValues.class;\n  const isReview = assessment_type === AssessmentTypeValues.review;\n  const isHomefun = assessment_type === AssessmentTypeValues.homeFun;\n  const formMethods = useForm<UpdateAssessmentDataOmitAction>();\n  const [students, setStudents] = useState<StudentProps[]>();\n  const [contents, setContents] = useState<DetailAssessmentResult[\"contents\"]>();\n  const initStudentViewItems = useMemo(() => {\n    if (isReview) {\n      return ModelAssessment.getReviewStudentsItems(assessmentDetailV2.diff_content_students);\n    } else {\n      return ModelAssessment.getStudentViewItems(\n        assessmentDetailV2.students,\n        assessmentDetailV2.contents,\n        assessmentDetailV2.outcomes,\n        assessment_type\n      );\n    }\n  }, [\n    assessmentDetailV2.contents,\n    assessmentDetailV2.diff_content_students,\n    assessmentDetailV2.outcomes,\n    assessmentDetailV2.students,\n    assessment_type,\n    isReview,\n  ]);\n  const [computedStudentViewItems, setComputedStudentViewItems] = useState<StudentViewItemsProps[] | undefined>();\n  const overallOutcomes = useMemo(() => {\n    const outcomes = ModelAssessment.getOverallOutcomes(computedStudentViewItems ? computedStudentViewItems : initStudentViewItems);\n    return outcomes;\n  }, [computedStudentViewItems, initStudentViewItems]);\n  const attendanceList = useMemo(() => {\n    if (students) {\n      return students?.filter((student: StudentProps) => student.status === StudentParticipate.Participate);\n    } else {\n      return assessmentDetailV2.students?.filter(\n        (student: StudentProps) => student.status === StudentParticipate.Participate\n      );\n    }\n  }, [assessmentDetailV2.students, students]);\n  const [dimension, setDimension] = useState<Dimension>(isHomefun ? Dimension.submitted : Dimension.student);\n  const ViewDimension = () => {\n    if (isHomefun) {\n      return [\n        { label: d(\"Submitted\").t(\"assessment_hfs_submitted\"), value: Dimension.submitted },\n        { label: d(\"Not Submitted\").t(\"assessment_hfs_not_submitted\"), value: Dimension.notSubmitted },\n        { label: d(\"All\").t(\"assessment_hfs_all\"), value: Dimension.all },\n      ];\n    } else {\n      return [\n        { label: d(\"View by Students\").t(\"assess_detail_view_by_students\"), value: Dimension.student },\n        { label: d(\"View by Lesson Material\").t(\"assess_detail_view_by_lesson_material\"), value: Dimension.material },\n      ];\n    }\n  };\n  const initSubDimension = useMemo(() => {\n    return ModelAssessment.getInitSubDimension(dimension, computedStudentViewItems ? computedStudentViewItems : initStudentViewItems);\n  }, [computedStudentViewItems, dimension, initStudentViewItems]);\n  const [subDimesion, setSubDimension] = useState<SubDimensionOptions[] | undefined>();\n  const [selectedSubdimension, setSelectedSubdimension] = useState<SubDimensionOptions[] | undefined>();\n  const perm = usePermission([\n    PermissionType.edit_in_progress_assessment_439, \n    PermissionType.edit_attendance_for_in_progress_assessment_438\n  ]);\n  const perm_439 = Boolean(perm.edit_in_progress_assessment_439);\n  const hasEditPerm = Boolean(perm_439 || perm.edit_attendance_for_in_progress_assessment_438);\n  const isMyAssessmentlist = assessmentDetailV2.teachers?.filter((item) => item.id === my_id);\n  const isMyAssessment = Boolean(isMyAssessmentlist && isMyAssessmentlist.length > 0);\n  const hasRemainTime = assessmentDetailV2.remaining_time ? assessmentDetailV2.remaining_time > 0 : false;\n  const isComplete = assessmentDetailV2.status === AssessmentStatus.complete;\n  const editable =\n    isStudy || isReview || isHomefun\n      ? isMyAssessment && perm_439 && !hasRemainTime && !isComplete\n      : isMyAssessment && perm_439 && !isComplete && !hasRemainTime;\n  const completeRate = useMemo(() => {\n    const { all, attempt } = ModelAssessment.getCompleteRateV2(computedStudentViewItems ? computedStudentViewItems : initStudentViewItems);\n    if (all === 0) return d(\"N/A\").t(\"assess_column_n_a\");\n    if (attempt === 0) return \"0\";\n    return `${Math.round((attempt / all) * 100)}%`;\n  }, [computedStudentViewItems, initStudentViewItems]);\n\n  const defaultStudents = useMemo(() => {\n    if (students) {\n      return students;\n    } else if (isReview) {\n      return assessmentDetailV2.diff_content_students;\n    } else {\n      return assessmentDetailV2.students;\n    }\n  }, [assessmentDetailV2.diff_content_students, assessmentDetailV2.students, isReview, students]);\n\n  const handleGoBack = () => {\n    history.goBack();\n  };\n  const handleDetailSave = async () => {\n    if (id) {\n      const { _contents, _students } = ModelAssessment.getUpdateAssessmentData(\n        assessment_type,\n        contents ? contents : assessmentDetailV2.contents,\n        computedStudentViewItems ? computedStudentViewItems : initStudentViewItems\n      );\n      const data: V2AssessmentUpdateReq = {\n        action: \"Draft\",\n        contents: isReview || isHomefun ? undefined : [..._contents],\n        id: id,\n        students: [..._students],\n      };\n      const { payload } = (await dispatch(updateAssessmentV2({ id: id!, data }))) as unknown as PayloadAction<\n        AsyncTrunkReturned<typeof updateAssessmentV2>\n      >;\n      if (payload) {\n        dispatch(actSuccess(d(\"Saved Successfully.\").t(\"assess_msg_save_successfully\")));\n        history.replace({\n          search: setQuery(history.location.search, { id: payload, editindex: editindex + 1 }),\n        });\n      }\n    }\n  };\n  const handleDetailComplete = async () => {\n    const notFillItem = overallOutcomes.find(\n      (oItem) =>\n        !oItem.skip &&\n        !oItem.none_achieved &&\n        oItem?.attendance_ids &&\n        oItem?.attendance_ids.length === 0 &&\n        oItem.partial_attendance_ids?.length === 0\n    );\n    if (notFillItem) {\n      return Promise.reject(dispatch(actWarning(d(\"Please fill in all the information.\").t(\"assess_msg_missing_infor\"))));\n    }\n    if (assessment_type === AssessmentTypeValues.study) {\n      const hasNotAttempted = ModelAssessment.getCompleteStatus(computedStudentViewItems);\n      if (hasNotAttempted) {\n        const content = d(\"You cannot change the assessment after clicking Complete.\").t(\"assess_msg_cannot_delete\");\n        const { isConfirmed } = unwrapResult(await dispatch(actAsyncConfirm({ content, hideCancel: false })));\n        if (!isConfirmed) return Promise.reject();\n      }\n    }\n    if (isHomefun) {\n      const students = computedStudentViewItems ? computedStudentViewItems : initStudentViewItems;\n      const hasNotFillItem = students?.some((sItem) => {\n        return (\n          sItem.results &&\n          sItem.results[0] &&\n          sItem.results[0].outcomes &&\n          sItem.results[0].outcomes.some((oItem) => oItem.status === OutcomeStatus.Unknown)\n        );\n      });\n      if (hasNotFillItem) {\n        return Promise.reject(dispatch(actWarning(d(\"Please fill in all the information.\").t(\"assess_msg_missing_infor\"))));\n      }\n    }\n    if (id) {\n      const { _contents, _students } = ModelAssessment.getUpdateAssessmentData(\n        assessment_type,\n        contents ? contents : assessmentDetailV2.contents,\n        computedStudentViewItems ? computedStudentViewItems : initStudentViewItems\n      );\n      const data: V2AssessmentUpdateReq = {\n        action: \"Complete\",\n        contents: isReview ? undefined : [..._contents],\n        id,\n        students: [..._students],\n      };\n      const { payload } = (await dispatch(updateAssessmentV2({ id, data }))) as unknown as PayloadAction<\n        AsyncTrunkReturned<typeof updateAssessmentV2>\n      >;\n      if (payload) {\n        dispatch(actSuccess(d(\"Completed Successfully.\").t(\"assess_msg_compete_successfully\")));\n        history.replace({\n          search: setQuery(history.location.search, { id: payload, editindex: editindex + 1 }),\n        });\n      }\n    }\n  };\n  const handleChangeStudent = (students: DetailAssessmentResult[\"students\"]) => {\n    students && setStudents([...students]);\n    let selectedStudents: StudentViewItemsProps[] | undefined;\n    if (isReview) {\n      const newStudent = ModelAssessment.getReviewStudentsItems(students);\n      selectedStudents = ModelAssessment.getStudentViewItemByStudent(\n        newStudent,\n        computedStudentViewItems ? computedStudentViewItems : initStudentViewItems\n      );\n    } else {\n      selectedStudents = ModelAssessment.getStudentViewItemByStudent(\n        students,\n        computedStudentViewItems ? computedStudentViewItems : initStudentViewItems\n      );\n    }\n    setComputedStudentViewItems(selectedStudents);\n    const subDimension = ModelAssessment.getInitSubDimension(dimension, selectedStudents)\n    setSubDimension(subDimension);\n    setSelectedSubdimension(subDimension);\n  };\n  const handleChangeContents = (contents: DetailAssessmentResult[\"contents\"]) => {\n    contents && setContents([...contents]);\n    const selectedContents = ModelAssessment.getStudentViewItemsByContent(\n      computedStudentViewItems ? computedStudentViewItems : initStudentViewItems,\n      contents\n    );\n    setComputedStudentViewItems(selectedContents);\n    const subDimension = ModelAssessment.getInitSubDimension(dimension, selectedContents)\n    setSubDimension(subDimension);\n    setSelectedSubdimension(subDimension);\n  };\n  const handleChangeComputedStudentViewItems = (studentViewItems?: StudentViewItemsProps[]) => {\n    studentViewItems && setComputedStudentViewItems([...studentViewItems]);\n  };\n  const handleChangeAllAchieved: OverallOutcomesProps[\"onChangeAllAchieved\"] = (checked: boolean, outcome_id?: string) => {\n    const _computedStudentViewItems = computedStudentViewItems ? cloneDeep(computedStudentViewItems) : cloneDeep(initStudentViewItems);\n    _computedStudentViewItems?.forEach((sItem) => {\n      sItem?.results?.forEach((rItem) => {\n        rItem?.outcomes?.forEach((oItem) => {\n          if (oItem.outcome_id === outcome_id) {\n            oItem.status = checked ? OutcomeStatus.Achieved : OutcomeStatus.Unknown;\n          }\n        });\n      });\n    });\n    setComputedStudentViewItems(_computedStudentViewItems);\n  };\n  const handleChangeMaterialAllAchieved: MaterialViewProps[\"onChangeMaterialAllAchieved\"] = (\n    checked: boolean,\n    content_id?: string,\n    outcome_id?: string\n  ) => {\n    const _computedStudentViewItems = computedStudentViewItems ? cloneDeep(computedStudentViewItems) : cloneDeep(initStudentViewItems);\n    _computedStudentViewItems?.forEach((sItem) => {\n      sItem?.results?.forEach((rItem) => {\n        if (rItem.content_id === content_id) {\n          rItem?.outcomes?.forEach((oItem) => {\n            if (oItem.outcome_id === outcome_id) {\n              oItem.status = checked ? OutcomeStatus.Achieved : OutcomeStatus.Unknown;\n            }\n          });\n        }\n      });\n    });\n    setComputedStudentViewItems(_computedStudentViewItems);\n  };\n  const handleChangeMaterialNoneAchieved: MaterialViewProps[\"onChangeMaterialNoneAchieved\"] = (\n    checked: boolean,\n    content_id?: string,\n    outcome_id?: string\n  ) => {\n    const _computedStudentViewItems = computedStudentViewItems ? cloneDeep(computedStudentViewItems) : cloneDeep(initStudentViewItems);\n    _computedStudentViewItems?.forEach((sItem) => {\n      sItem?.results?.forEach((rItem) => {\n        if (rItem.content_id === content_id) {\n          rItem?.outcomes?.forEach((oItem) => {\n            if (oItem.outcome_id === outcome_id) {\n              oItem.status = checked ? OutcomeStatus.NotAchieved : OutcomeStatus.Unknown;\n            }\n          });\n        }\n      });\n    });\n    setComputedStudentViewItems(_computedStudentViewItems);\n  };\n  const handleChangeMatarialStudentStatus: MaterialViewProps[\"onChangeMatarialStudentStatus\"] = (\n    checked: boolean,\n    student_id?: string,\n    content_id?: string,\n    outcome_id?: string\n  ) => {\n    const _computedStudentViewItems = computedStudentViewItems ? cloneDeep(computedStudentViewItems) : cloneDeep(initStudentViewItems);\n    _computedStudentViewItems?.forEach((sItem) => {\n      if (sItem.student_id === student_id) {\n        sItem?.results?.forEach((rItem) => {\n          if (rItem.content_id === content_id) {\n            rItem?.outcomes?.forEach((oItem) => {\n              if (oItem.outcome_id === outcome_id) {\n                oItem.status = checked ? OutcomeStatus.Achieved : OutcomeStatus.Unknown;\n              }\n            });\n          }\n        });\n      }\n    });\n    setComputedStudentViewItems(_computedStudentViewItems);\n  };\n  const handleChangeNoneAchieved: OverallOutcomesProps[\"onChangeNoneAchieved\"] = (checked: boolean, outcome_id?: string) => {\n    const _computedStudentViewItems = computedStudentViewItems ? cloneDeep(computedStudentViewItems) : cloneDeep(initStudentViewItems);\n    _computedStudentViewItems?.forEach((sItem) => {\n      sItem?.results?.forEach((rItem) => {\n        rItem?.outcomes?.forEach((oItem) => {\n          if (oItem.outcome_id === outcome_id) {\n            oItem.status = checked ? OutcomeStatus.NotAchieved : OutcomeStatus.Unknown;\n          }\n        });\n      });\n    });\n    setComputedStudentViewItems(_computedStudentViewItems);\n  };\n  const handleChangeStudentStatus: OverallOutcomesProps[\"onChangeStudentStatus\"] = (\n    checked: boolean,\n    student_id?: string,\n    outcome_id?: string\n  ) => {\n    const _computedStudentViewItems = computedStudentViewItems ? cloneDeep(computedStudentViewItems) : cloneDeep(initStudentViewItems);\n    _computedStudentViewItems?.forEach((sItem) => {\n      if (sItem.student_id === student_id) {\n        sItem?.results?.forEach((rItem) => {\n          rItem?.outcomes?.forEach((oItem) => {\n            if (oItem.outcome_id === outcome_id) {\n              oItem.status = checked ? OutcomeStatus.Achieved : OutcomeStatus.Unknown;\n            }\n          });\n        });\n      }\n    });\n    setComputedStudentViewItems(_computedStudentViewItems);\n  };\n  const handleChangeNotCovered: OverallOutcomesProps[\"onChangeNotCovered\"] = (checked: boolean, outcome_id?: string) => {\n    const _computedStudentViewItems = computedStudentViewItems ? cloneDeep(computedStudentViewItems) : cloneDeep(initStudentViewItems);\n    _computedStudentViewItems?.forEach((sItem) => {\n      sItem?.results?.forEach((rItem) => {\n        rItem?.outcomes?.forEach((oItem) => {\n          if (oItem.outcome_id === outcome_id) {\n            oItem.status = checked ? OutcomeStatus.NotCovered : OutcomeStatus.Unknown;\n          }\n        });\n      });\n    });\n    setComputedStudentViewItems(_computedStudentViewItems);\n  };\n  const handleChangeDimension: MultiSelectProps[\"onChangeDimension\"] = (value: Dimension) => {\n    setDimension(value);\n    const _subDimension = ModelAssessment.getInitSubDimension(\n      value,\n      computedStudentViewItems ? computedStudentViewItems : initStudentViewItems\n    );\n    setSubDimension(_subDimension);\n    setSelectedSubdimension(_subDimension);\n  };\n  const handleChangeSubdimension: MultiSelectProps[\"onChangeSubdimension\"] = (value: SubDimensionOptions[]) => {\n    setSelectedSubdimension(value);\n  };\n  const handleChangeHomefunStudnet = (students?: StudentViewItemsProps[]) => {\n    setComputedStudentViewItems(students);\n  };\n  const handleSaveDrawFeedback = async (studentId?: string, assignment_id?: string, imgObj?: any) => {\n    const extension = imgObj.name.split(\".\").pop();\n    const { payload } = (await dispatch(\n      getContentResourceUploadPath({ partition: \"drawing_feedback\", extension })\n    )) as unknown as PayloadAction<AsyncTrunkReturned<typeof getContentResourceUploadPath>>;\n    const { path, resource_id } = payload;\n    if (resource_id) {\n      uploadFile(path, imgObj);\n      const newStudents = cloneDeep(computedStudentViewItems ? computedStudentViewItems : initStudentViewItems);\n      newStudents?.forEach((sItem) => {\n        if (sItem.student_id === studentId) {\n          const { results } = sItem;\n          if (results && results[0] && results[0].student_feed_backs && results[0].student_feed_backs[0]) {\n            const student_feed_back = results[0].student_feed_backs[0];\n            if (student_feed_back && student_feed_back?.assignments) {\n              student_feed_back.assignments.forEach((item) => {\n                if (item.id === assignment_id) {\n                  item.review_attachment_id = resource_id;\n                }\n              });\n            }\n          }\n        }\n      });\n      setComputedStudentViewItems(newStudents);\n    }\n  };\n  const rightside = (\n    <>\n      {isHomefun && <Subtitle text={d(\"Learning Outcome Assessment\").t(\"assessment_learning_outcome_assessment\")} />}\n      {!isClass && (\n        <MultiSelect\n          mainDimension={ViewDimension()}\n          assessment_type={assessment_type}\n          onChangeDimension={handleChangeDimension}\n          dimension={dimension}\n          subDimension={subDimesion ? subDimesion : initSubDimension || []}\n          onChangeSubdimension={handleChangeSubdimension}\n        />\n      )}\n      {!isReview && !isHomefun && (\n        <>\n          <Subtitle\n            text={\n              dimension === Dimension.student\n                ? d(\"Learning Outcome Assessment\").t(\"assessment_learning_outcome_assessment\")\n                : d(\"Lesson Plan Assessment\").t(\"assess_detail_lesson_plan_assessment\")\n            }\n          />\n          {overallOutcomes && overallOutcomes.length ? (\n            <OverallOutcomes\n              attendanceList={attendanceList}\n              overallOutcomes={overallOutcomes}\n              editable={editable}\n              onChangeAllAchieved={handleChangeAllAchieved}\n              onChangeNoneAchieved={handleChangeNoneAchieved}\n              onChangeStudentStatus={handleChangeStudentStatus}\n              onChangeNotCovered={handleChangeNotCovered}\n            />\n          ) : (\n            <NoOutcome />\n          )}\n        </>\n      )}\n      {!isClass && !isHomefun && dimension === Dimension.student && (\n        <>\n          {!isReview && <Subtitle text={d(\"Score Assessment\").t(\"assess_detail_score_assessment\")} />}\n          <StudentView\n            dimension={dimension}\n            subDimension={selectedSubdimension ? selectedSubdimension : initSubDimension || []}\n            studentViewItems={computedStudentViewItems ? computedStudentViewItems : initStudentViewItems}\n            editable={editable}\n            roomId={assessmentDetailV2.room_id}\n            assessment_type={assessment_type}\n            is_anyone_attempted={assessmentDetailV2.is_anyone_attempted}\n            onChangeComputedStudentViewItems={handleChangeComputedStudentViewItems}\n          />\n        </>\n      )}\n      {!isClass && !isHomefun && !isReview && dimension === Dimension.material && (\n        <>\n          <Subtitle text={d(\"Lesson Material Assessment\").t(\"assessment_lesson_material_assessment\")} />\n          <MaterialView\n            dimension={dimension}\n            subDimension={selectedSubdimension ? selectedSubdimension : initSubDimension || []}\n            studentViewItems={computedStudentViewItems ? computedStudentViewItems : initStudentViewItems}\n            students={students ? students : assessmentDetailV2.students}\n            contents={contents ? contents : assessmentDetailV2.contents}\n            editable={editable}\n            roomId={assessmentDetailV2.room_id}\n            onChangeMaterialAllAchieved={handleChangeMaterialAllAchieved}\n            onChangeMaterialNoneAchieved={handleChangeMaterialNoneAchieved}\n            onChangeMatarialStudentStatus={handleChangeMatarialStudentStatus}\n            onChangeComputedStudentViewItems={handleChangeComputedStudentViewItems}\n          />\n        </>\n      )}\n      {isHomefun && (\n        <>\n          <Subtitle text={d(\"Comments & Ratings\").t(\"assessment_hfs_comment_rating\")} />\n          <Homefun\n            editable={editable}\n            dimension={dimension}\n            attachment_id={attachment_id}\n            subDimension={selectedSubdimension ? selectedSubdimension : initSubDimension || []}\n            students={computedStudentViewItems ? computedStudentViewItems : initStudentViewItems}\n            onChangeHomefunStudent={handleChangeHomefunStudnet}\n            onSaveDrawFeedback={handleSaveDrawFeedback}\n          />\n        </>\n      )}\n    </>\n  );\n  useEffect(() => {\n    dispatch(getDetailAssessmentV2({ id, metaLoading: true }));\n  }, [dispatch, id, editindex]);\n  return (\n    <>\n      <DetailHeader\n        name={d(\"Assessment Details\").t(\"assess_assessment_details\")}\n        onBack={handleGoBack}\n        onComplete={handleDetailComplete}\n        onSave={handleDetailSave}\n        editable={editable}\n      />\n      <LayoutPair breakpoint={1536} leftWidth={603} rightWidth={1205} spacing={32} basePadding={0} padding={40}>\n        <DetailForm\n          assessmentDetail={assessmentDetailV2}\n          students={defaultStudents}\n          contents={contents ? contents : assessmentDetailV2.contents}\n          assessmentType={assessment_type}\n          formMethods={formMethods}\n          editable={editable}\n          onChangeStudent={handleChangeStudent}\n          onChangeContents={handleChangeContents}\n          completeRate={completeRate}\n          hasEditPerm={hasEditPerm}\n        />\n        {rightside}\n      </LayoutPair>\n    </>\n  );\n}\n\nDetailAssessment.routeBasePath = \"/assessments/details\";\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}