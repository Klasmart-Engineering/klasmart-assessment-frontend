{"ast":null,"code":"import produce from\"immer\";import{useMemo}from\"react\";function toHash(list){return list&&list.reduce(function(result,key){result[key]=true;return result;},{});}export function CheckboxGroup(props){var _props$value,_props$allValue;var render=props.render,onChange=props.onChange;// eslint-disable-next-line react-hooks/exhaustive-deps\nvar value=(_props$value=props.value)!==null&&_props$value!==void 0?_props$value:[];// eslint-disable-next-line react-hooks/exhaustive-deps\nvar allValue=(_props$allValue=props.allValue)!==null&&_props$allValue!==void 0?_props$allValue:[];var hashValue=useMemo(function(){return toHash(value);},[value]);var isAllvalue=allValue.length>0&&allValue.every(function(item){return value.indexOf(item)>=0;});var registerChange=useMemo(function(){return function(event){var _event$target=event.target,checked=_event$target.checked,value=_event$target.value;var newhashValue=produce(hashValue,function(draft){checked?draft[value]=true:delete draft[value];});var list=Object.keys(newhashValue);onChange(list.length?list:[]);};},[hashValue,onChange]);var registerAllChange=useMemo(function(){return function(event){var checked=event.target.checked;onChange(checked?allValue:[]);};},[onChange,allValue]);return render({hashValue:hashValue,registerChange:registerChange,registerAllChange:registerAllChange,isAllvalue:isAllvalue});}","map":{"version":3,"names":["produce","useMemo","toHash","list","reduce","result","key","CheckboxGroup","props","render","onChange","value","allValue","hashValue","isAllvalue","length","every","item","indexOf","registerChange","event","target","checked","newhashValue","draft","Object","keys","registerAllChange"],"sources":["/Users/evik/kl/project-2024/klasmart-assessment-frontend/src/components/CheckboxGroup/CheckboxGroup.tsx"],"sourcesContent":["import produce from \"immer\";\nimport { ChangeEvent, ReactElement, useMemo } from \"react\";\n\ntype HashValue = Record<string, boolean>;\n\nexport interface CheckboxGroupContext {\n  registerChange: (event: ChangeEvent<HTMLInputElement>) => any;\n  registerAllChange: CheckboxGroupContext[\"registerChange\"];\n  hashValue: HashValue;\n  isAllvalue: boolean;\n}\n\ninterface CheckboxGroupProps {\n  render: (props: CheckboxGroupContext) => ReactElement;\n  value?: string[];\n  allValue?: CheckboxGroupProps[\"value\"];\n  onChange: (value: string[] | undefined) => any;\n}\n\nfunction toHash(list: string[]): HashValue {\n  return (\n    list &&\n    list.reduce<HashValue>((result, key) => {\n      result[key] = true;\n      return result;\n    }, {})\n  );\n}\n\nexport function CheckboxGroup(props: CheckboxGroupProps) {\n  const { render, onChange } = props;\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const value = props.value ?? [];\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const allValue = props.allValue ?? [];\n  const hashValue = useMemo(() => toHash(value), [value]);\n  const isAllvalue = allValue.length > 0  && allValue.every(item => value.indexOf(item) >= 0);\n  const registerChange = useMemo<CheckboxGroupContext[\"registerChange\"]>(\n    () => (event) => {\n      const { checked, value } = event.target;\n      const newhashValue = produce(hashValue, (draft) => {\n        checked ? (draft[value] = true) : delete draft[value];\n      });\n      const list = Object.keys(newhashValue);\n      onChange(list.length ? list : []);\n    },\n    [hashValue, onChange]\n  );\n  const registerAllChange = useMemo<CheckboxGroupContext[\"registerAllChange\"]>(\n    () => (event) => {\n      const { checked } = event.target;\n      onChange(checked ? allValue : []);\n    },\n    [onChange, allValue]\n  );\n  return render({ hashValue, registerChange, registerAllChange, isAllvalue });\n}\n"],"mappings":"AAAA,MAAOA,CAAAA,OAAP,KAAoB,OAApB,CACA,OAAoCC,OAApC,KAAmD,OAAnD,CAkBA,QAASC,CAAAA,MAAT,CAAgBC,IAAhB,CAA2C,CACzC,MACEA,CAAAA,IAAI,EACJA,IAAI,CAACC,MAAL,CAAuB,SAACC,MAAD,CAASC,GAAT,CAAiB,CACtCD,MAAM,CAACC,GAAD,CAAN,CAAc,IAAd,CACA,MAAOD,CAAAA,MAAP,CACD,CAHD,CAGG,EAHH,CAFF,CAOD,CAED,MAAO,SAASE,CAAAA,aAAT,CAAuBC,KAAvB,CAAkD,kCACvD,GAAQC,CAAAA,MAAR,CAA6BD,KAA7B,CAAQC,MAAR,CAAgBC,QAAhB,CAA6BF,KAA7B,CAAgBE,QAAhB,CACA;AACA,GAAMC,CAAAA,KAAK,eAAGH,KAAK,CAACG,KAAT,6CAAkB,EAA7B,CACA;AACA,GAAMC,CAAAA,QAAQ,kBAAGJ,KAAK,CAACI,QAAT,mDAAqB,EAAnC,CACA,GAAMC,CAAAA,SAAS,CAAGZ,OAAO,CAAC,iBAAMC,CAAAA,MAAM,CAACS,KAAD,CAAZ,EAAD,CAAsB,CAACA,KAAD,CAAtB,CAAzB,CACA,GAAMG,CAAAA,UAAU,CAAGF,QAAQ,CAACG,MAAT,CAAkB,CAAlB,EAAwBH,QAAQ,CAACI,KAAT,CAAe,SAAAC,IAAI,QAAIN,CAAAA,KAAK,CAACO,OAAN,CAAcD,IAAd,GAAuB,CAA3B,EAAnB,CAA3C,CACA,GAAME,CAAAA,cAAc,CAAGlB,OAAO,CAC5B,iBAAM,UAACmB,KAAD,CAAW,CACf,kBAA2BA,KAAK,CAACC,MAAjC,CAAQC,OAAR,eAAQA,OAAR,CAAiBX,KAAjB,eAAiBA,KAAjB,CACA,GAAMY,CAAAA,YAAY,CAAGvB,OAAO,CAACa,SAAD,CAAY,SAACW,KAAD,CAAW,CACjDF,OAAO,CAAIE,KAAK,CAACb,KAAD,CAAL,CAAe,IAAnB,CAA2B,MAAOa,CAAAA,KAAK,CAACb,KAAD,CAA9C,CACD,CAF2B,CAA5B,CAGA,GAAMR,CAAAA,IAAI,CAAGsB,MAAM,CAACC,IAAP,CAAYH,YAAZ,CAAb,CACAb,QAAQ,CAACP,IAAI,CAACY,MAAL,CAAcZ,IAAd,CAAqB,EAAtB,CAAR,CACD,CAPD,EAD4B,CAS5B,CAACU,SAAD,CAAYH,QAAZ,CAT4B,CAA9B,CAWA,GAAMiB,CAAAA,iBAAiB,CAAG1B,OAAO,CAC/B,iBAAM,UAACmB,KAAD,CAAW,CACf,GAAQE,CAAAA,OAAR,CAAoBF,KAAK,CAACC,MAA1B,CAAQC,OAAR,CACAZ,QAAQ,CAACY,OAAO,CAAGV,QAAH,CAAc,EAAtB,CAAR,CACD,CAHD,EAD+B,CAK/B,CAACF,QAAD,CAAWE,QAAX,CAL+B,CAAjC,CAOA,MAAOH,CAAAA,MAAM,CAAC,CAAEI,SAAS,CAATA,SAAF,CAAaM,cAAc,CAAdA,cAAb,CAA6BQ,iBAAiB,CAAjBA,iBAA7B,CAAgDb,UAAU,CAAVA,UAAhD,CAAD,CAAb,CACD"},"metadata":{},"sourceType":"module"}