/*!
 * MIT License
 * 
 * Copyright (c) 2020 Yoav Niran
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],e):"object"==typeof exports?exports.rpldy=e(require("react"),require("react-dom")):t.rpldy=e(t.react,t["react-dom"])}(window,(function(t,e){return function(t){function e(e){for(var r,u,i=e[0],c=e[1],l=e[2],d=0,f=[];d<i.length;d++)u=i[d],Object.prototype.hasOwnProperty.call(a,u)&&a[u]&&f.push(a[u][0]),a[u]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);for(s&&s(e);f.length;)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(r=!1)}r&&(o.splice(e--,1),t=u(u.s=n[0]))}return t}var r={},a={uiCore:0},o=[];function u(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.m=t,u.c=r,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)u.d(n,r,function(e){return t[e]}.bind(null,r));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="";var i=window.webpackJsonprpldy=window.webpackJsonprpldy||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var s=c;return o.push([0,"polyfills"]),n()}({0:function(t,e,n){n("9SVt"),n("KkDc"),n("jRAa"),n("QELF"),n("h0aC"),t.exports=n("lFlW")},"9SVt":function(t,e,n){"use strict";n.r(e),n.d(e,"addLife",(function(){return ut})),n.d(e,"isLE",(function(){return K}));var r=n("04Ix"),a=n.n(r),o=n("RSWj"),u=n.n(o),i=n("HnXd"),c=n.n(i),l=n("M5Mt"),s=n.n(l),d=n("OBge"),f=n.n(d),p=n("FLGM"),E=n.n(p),v=n("5PDf"),g=n.n(v),h=n("kT1S"),b=n.n(h),S=n("eLKs"),m=n.n(S),T=n("+oHS"),A=n.n(T),O=n("zLi2"),L=n.n(O),R=n("i5y0"),I=n.n(R),_=n("KYsz"),y=n.n(_),C=n("STz3"),D=n.n(C),w=n("cdeZ"),F=n.n(w),P=n("UtpJ"),x=n.n(P),N=n("/FZm"),B=n.n(N),U=n("ZbhI"),j=n.n(U),H=n("JlUD"),M=n.n(H),k=n("KkDc"),G=Object(k.devFreeze)({allowRegisterNonExistent:!0,canAddEvents:!0,canRemoveEvents:!0,collectStats:!1}),q=function(t,e){if(!Object(k.isFunction)(t))throw new Error("'".concat(e,"' is not a valid function"))},z=function(t){return void 0===t},Q=n("CtDf"),V=n.n(Q)()("__le__"),X=function(t){return t?t[V]:null},Z=function(t){var e=X(t);if(!e)throw new Error("Didnt find LE internal object. Something very bad happened!");return e},K=function(t){return!!X(t)},W=function(t,e,n){var r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];q(n,"cb");var o=Z(t);if(!o.options.allowRegisterNonExistent&&!~j()(r=o.events).call(r,e))throw new Error("Cannot register for event ".concat(e.toString()," that wasn't already defined (allowRegisterNonExistent = false)"));var u={name:e,cb:n,once:a},i=o.registry[e]||[];return B()(i).call(i,(function(t){return t.cb===n}))||(i.push(u),o.registry[e]=i),function(){return at.call(t,e,n)}},J=function(t,e){var n,r,a=Z(t).registry;return e?a[e]?x()(n=a[e]).call(n):[]:F()(r=D()(a)).call(r)},Y={on:function(t,e){return W(this,t,e)},once:function(t,e){return W(this,t,e,!0)},off:at,getEvents:function(){var t;return x()(t=Z(this).events).call(t)}},$=function(){var t;return y()(t=I()(Y)).call(t,(function(t,e){var n=L()(e,2),r=n[0],a=n[1];return t[r]={value:a},t}),{})},tt={trigger:function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var o,u,i,c=J(this,t);c.length&&(o=E()(u=g()(i=E()(c).call(c,(function(n){return n.once&&rt(e,t,n.cb),r.length?1===r.length?n.cb(r[0]):2===r.length?n.cb(r[0],r[1]):3===r.length?n.cb(r[0],r[1],r[2]):n.cb.apply(n,r):n.cb()}))).call(i,(function(t){return!z(t)}))).call(u,(function(t){return M()(t)?t:f.a.resolve(t)})));return o&&(o.length?o:void 0)},addEvent:function(t){var e=Z(this);if(!e.options.canAddEvents)throw new Error("Cannot add new events (canAddEvents = false)");var n;if(~j()(n=e.events).call(n,t))throw new Error("Event '".concat(t,"' already defined"));e.events.push(t)},removeEvent:function(t){var e=Z(this);if(!e.options.canRemoveEvents)throw new Error("Cannot remove events (canRemoveEvents = false)");var n,r,a=j()(n=e.events).call(n,t);s()(r=e.events).call(r,a,1)},hasEvent:function(t){var e,n=Z(this);return!!~j()(e=n.events).call(e,t)},hasEventRegistrations:function(t){return!!J(this,t).length},assign:function(t){var e=Z(this);return ot(t,e.options,e.events,e.registry,e.stats),et(t)}},et=function(t){var e;return y()(e=A()(tt)).call(e,(function(e,n){var r;return e[n]=m()(r=tt[n]).call(r,t),e}),b()({target:t},tt))},nt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Z(t).registry;!r[e]||!n&&r[e].length||delete r[e]},rt=function(t,e,n){var r,a=Z(t).registry;a[e]&&(n?(a[e]=g()(r=a[e]).call(r,(function(t){return t.cb!==n})),nt(t,e)):nt(t,e,!0))};function at(t,e){rt(this,t,e)}var ot=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};c()(t,b()(a()({},V,{value:u()({registry:r,events:n,options:e,stats:o})}),$()))},ut=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return t=t||{},n=b()(b()({},G),n),K(t)||ot(t,n,e),et(t)};e.default=ut},KkDc:function(t,e,n){"use strict";n.r(e),n.d(e,"BATCH_STATES",(function(){return l})),n.d(e,"FILE_STATES",(function(){return s})),n.d(e,"invariant",(function(){return u.a})),n.d(e,"throttle",(function(){return c.a})),n.d(e,"logger",(function(){return r})),n.d(e,"triggerCancellable",(function(){return I})),n.d(e,"triggerUpdater",(function(){return y})),n.d(e,"createBatchItem",(function(){return B})),n.d(e,"request",(function(){return K})),n.d(e,"parseResponseHeaders",(function(){return Z})),n.d(e,"isFunction",(function(){return W})),n.d(e,"isPlainObject",(function(){return lt})),n.d(e,"isSamePropInArrays",(function(){return et})),n.d(e,"devFreeze",(function(){return nt})),n.d(e,"merge",(function(){return pt})),n.d(e,"getMerge",(function(){return ft})),n.d(e,"clone",(function(){return Et})),n.d(e,"pick",(function(){return vt}));var r={};n.r(r),n.d(r,"isDebugOn",(function(){return p})),n.d(r,"setDebug",(function(){return E})),n.d(r,"debugLog",(function(){return v}));var a,o=n("QLaP"),u=n.n(o),i=n("uDTZ"),c=n.n(i),l={ADDED:"added",PROCESSING:"processing",UPLOADING:"uploading",CANCELLED:"cancelled",FINISHED:"finished",ABORTED:"aborted"},s={ADDED:"added",UPLOADING:"uploading",CANCELLED:"cancelled",FINISHED:"finished",ERROR:"error",ABORTED:"aborted"},d=n("ZbhI"),f=n.n(d),p=function(){var t;"boolean"!=typeof a&&(a=!!~f()(t=window.location.search).call(t,"rpldy_debug=true")||!0===window["__rupy-logger-debug__"]);return a},E=function(t){window["__rupy-logger-debug__"]=t,a=!!t||null},v=function(){var t;p()&&(t=console).log.apply(t,arguments)},g=n("a0dU"),h=n.n(g),b=n("TEMH"),S=n.n(b),m=n("OBge"),T=n.n(m),A=n("o+MX"),O=n.n(A),L=n("SPx3"),R=n.n(L),I=function(t,e){for(var n,r=function(){var e=R()(h.a.mark((function e(n){var r,a,o,u,i,c,l,s=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=!1,o=s.length,u=new Array(o>1?o-1:0),i=1;i<o;i++)u[i-1]=s[i];if(!(c=t.apply(void 0,O()(r=[n]).call(r,u)))||!c.length){e.next=8;break}return e.next=6,T.a.all(c);case 6:l=e.sent,a=!!~S()(l).call(l,(function(t){return!1===t}));case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];return e?r.apply(void 0,O()(n=[e]).call(n,o)):r},_=function(t){return null==t},y=function(t,e){for(var n,r=function(){var e=R()(h.a.mark((function e(n){var r,a,o,u,i,c,l,s=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=s.length,u=new Array(o>1?o-1:0),i=1;i<o;i++)u[i-1]=s[i];if(!(c=t.apply(void 0,O()(r=[n]).call(r,u)))||!c.length){e.next=7;break}return e.next=5,T.a.all(c);case 5:for(l=e.sent;_(a)&&l.length;)a=l.pop();case 7:return e.abrupt("return",_(a)?void 0:a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];return e?r.apply(void 0,O()(n=[e]).call(n,o)):r},C=n("LYCE"),D=n.n(C),w=n("nhkr"),F=n.n(w),P=n("CtDf"),x=n.n(P)()("__rpldy-bi__"),N=0,B=function(t,e){var n;N+=1;var r={id:t.id?t.id:O()(n="".concat(e,".item-")).call(n,N),batchId:e,state:s.ADDED,completed:0,loaded:0,aborted:!1,recycled:!1};if(D()(r,x,{value:!0,writable:!0}),"object"===F()(t)&&!0===t[x]&&(r.recycled=!0,t=t.file||t.url),"string"==typeof t)r=function(t,e){return t.url=e,t}(r,t);else{if(!function(t){return t&&(t instanceof Blob||t instanceof File||"object"===F()(t)&&t.name&&t.type)}(t))throw new Error("Unknown type of file added: ".concat(F()(t)));r=function(t,e){return t.file=e,t}(r,t)}return r},U=n("+oHS"),j=n.n(U),H=n("RXMP"),M=n.n(H),k=function(t,e){var n;e&&M()(n=j()(e)).call(n,(function(n){void 0!==e[n]&&t.setRequestHeader(n,e[n])}))},G=n("zLi2"),q=n.n(G),z=n("RKTd"),Q=n.n(z),V=n("KYsz"),X=n.n(V),Z=function(t){var e;try{var n,r;e=X()(n=Q()(r=t.getAllResponseHeaders()).call(r).split(/[\r\n]+/)).call(n,(function(t,e){var n=e.split(": "),r=q()(n,2),a=r[0],o=r[1];return t[a]=o,t}),{})}catch(e){v("uploady.request: failed to read response headers",t)}return e},K=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new XMLHttpRequest,a=new T.a((function(a,o){r.onerror=function(){return o(r)},r.ontimeout=function(){return o(r)},r.onabort=function(){return o(r)},r.onload=function(){return a(r)},r.open(n.method||"GET",t),k(r,n.headers),r.withCredentials=!!n.withCredentials,n.preSend&&n.preSend(r),r.send(e)}));return a.xhr=r,a},W=function(t){return"function"==typeof t},J=n("/FZm"),Y=n.n(J),$=n("FLGM"),tt=n.n($),et=function(t,e,n){var r=!0,a=function(t){var e,n=O()(e=[]).call(e,t);return function(t){return tt()(t).call(t,(function(t){return tt()(n).call(n,(function(e){return t[e]})).join()}))}}(n);if(t&&e&&t.length===e.length){var o=a(t),u=a(e);r=!!Y()(o).call(o,(function(t,e){return t!==u[e]}))}return!r},nt=(n("9yv6"),function(t){return t}),rt=n("OWCx"),at=n.n(rt),ot=n("6UaR"),ut=n.n(ot),it=n("zKQ6"),ct=n.n(it),lt=function(t){var e;return!!t&&"object"===F()(t)&&("Object"===(null===(e=ct()(t))||void 0===e?void 0:e.constructor.name)||null===ct()(t))},st=function(t){return lt(t)||ut()(t)},dt=function(t,e){var n=j()(t);return e.withSymbols?O()(n).call(n,at()(t)):n},ft=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=function e(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return n&&a.length&&M()(a).call(a,(function(r){var a;r&&M()(a=dt(r,t)).call(a,(function(a){var o=r[a];(void 0!==o||t.undefinedOverwrites)&&(st(o)?(void 0!==n[a]&&lt(n[a])||(n[a]=ut()(o)?[]:{}),e(n[a],o)):n[a]=o)}))})),n};return e},pt=ft(),Et=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pt;return st(t)?e(ut()(t)?[]:{},t):t},vt=function(t,e){var n;return t&&X()(n=j()(t)).call(n,(function(n,r){return~f()(e).call(e,r)&&(n[r]=t[r]),n}),{})}},QELF:function(t,e,n){"use strict";n.r(e),n.d(e,"UPLOADER_EVENTS",(function(){return Q})),n.d(e,"DEFAULT_OPTIONS",(function(){return _})),n.d(e,"composeEnhancers",(function(){return Mt})),n.d(e,"createUploader",(function(){return Ht})),n.d(e,"send",(function(){return xt.send})),n.d(e,"XHR_SENDER_TYPE",(function(){return xt.XHR_SENDER_TYPE}));var r,a=n("RXMP"),o=n.n(a),u=n("M5Mt"),i=n.n(u),c=n("UtpJ"),l=n.n(c),s=n("a0dU"),d=n.n(s),f=n("o+MX"),p=n.n(f),E=n("SPx3"),v=n.n(E),g=n("STz3"),h=n.n(g),b=n("9SVt"),S=n("KkDc"),m=n("6UaR"),T=n.n(m),A=n("5PDf"),O=n.n(A),L=n("FLGM"),R=n.n(L),I=function(){return!0},_=Object(S.devFreeze)({autoUpload:!0,inputFieldName:"file",concurrent:!1,maxConcurrent:2,grouped:!1,maxGroupSize:5,method:"POST",params:{},fileFilter:I,forceJsonResponse:!1,withCredentials:!1,destination:{},send:null,sendWithFormData:!0}),y=0,C=function(t,e,n){var r;return R()(r=O()(Array.prototype).call(e,n||I)).call(r,(function(e){return Object(S.createBatchItem)(e,t)}))},D=function(t,e,n){var r="batch-".concat(y+=1),a=t instanceof FileList||"[object FileList]"===t.toString();return t=T()(t)||a?t:[t],{id:r,uploaderId:e,items:C(r,t,n.fileFilter),state:S.BATCH_STATES.ADDED,completed:0,loaded:0}},w=n("KYsz"),F=n.n(w),P=n("zLi2"),x=n.n(P),N=n("Vi3r"),B=n.n(N),U=(n("LYCE"),n("+oHS")),j=n.n(U),H=(n("OWCx"),n("ZbhI")),M=n.n(H),k=n("CtDf"),G=n.n(k),q=(Object(S.getMerge)({withSymbols:!0}),G()("__rpldy-sstt-proxy__"),G()("__rpldy-sstt-state__"),function(t,e){0}),z=function(t){var e=t;return{state:e,update:function(t){try{q(),t(e)}finally{q()}return e},unwrap:function(t){return t||e}}},Q=Object(S.devFreeze)({BATCH_ADD:"BATCH-ADD",BATCH_START:"BATCH-START",BATCH_PROGRESS:"BATCH_PROGRESS",BATCH_FINISH:"BATCH-FINISH",BATCH_ABORT:"BATCH-ABORT",BATCH_CANCEL:"BATCH-CANCEL",ITEM_START:"FILE-START",ITEM_CANCEL:"FILE-CANCEL",ITEM_PROGRESS:"FILE-PROGRESS",ITEM_FINISH:"FILE-FINISH",ITEM_ABORT:"FILE-ABORT",ITEM_ERROR:"FILE-ERROR",ITEM_FINALIZE:"FILE-FINALIZE",REQUEST_PRE_SEND:"REQUEST_PRE_SEND"}),V=Object(S.devFreeze)({ITEM_PROGRESS:"ITEM_PROGRESS",BATCH_PROGRESS:"BATCH_PROGRESS"}),X=n("cdeZ"),Z=n.n(X),K=n("OBge"),W=n.n(K),J=n("04Ix"),Y=n.n(J),$=n("mnMc"),tt=n.n($),et=n("kT1S"),nt=n.n(et),rt=[S.BATCH_STATES.ADDED,S.BATCH_STATES.PROCESSING,S.BATCH_STATES.UPLOADING],at=function(t,e){return t.batches[e].batch},ot=function(t,e,n){return t.getState().items[e].batchId===n},ut=function(t,e){var n=t.getState(),r=n.items[e];return n.batches[r.batchId]},it=function(t,e){return ut(t,e).batch},ct=function(t,e){var n,r=function(t,e){return at(t.getState(),e)}(t,e),a=R()(n=r.items).call(n,(function(t){return t.id}));t.updateState((function(t){o()(a).call(a,(function(e){var n;delete t.items[e];var r,a=M()(n=t.itemQueue).call(n,e);~a&&i()(r=t.itemQueue).call(r,a,1)}))}))},lt=function(t,e){t.updateState((function(t){delete t.batches[e]}))},st=function(t,e){var n=it(t,e),r=n.id;S.logger.debugLog("uploady.uploader.processor: cancelling batch: ",{batch:n}),t.updateState((function(t){at(t,r).state=S.BATCH_STATES.CANCELLED})),Et(t,r,Q.BATCH_CANCEL),ct(t,r),lt(t,r)},dt=function(t,e){var n=it(t,e);return t.getState().currentBatch!==n.id},ft=function(){var t=v()(d.a.mark((function t(e,n){var r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=it(e,n),t.next=3,e.cancellable(Q.BATCH_START,r);case 3:return(a=t.sent)||e.updateState((function(t){t.currentBatch=r.id})),t.abrupt("return",!a);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),pt=function(t){var e=t.getState().currentBatch;e&&function(t){var e=t.getState().itemQueue;return 0===e.length||dt(t,e[0])}(t)&&(Et(t,e,Q.BATCH_FINISH),ct(t,e),lt(t,e))},Et=function(t,e,n){var r,a=t.getState(),o=at(a,e),u=a.items,i=nt()(nt()({},o),{},{items:R()(r=o.items).call(r,(function(t){var e=t.id;return u[e]}))});t.trigger(n,i)},vt=function(t,e){var n=it(t,e);return tt()(rt).call(rt,n.state)},gt=(r={},Y()(r,S.FILE_STATES.ADDED,Q.ITEM_START),Y()(r,S.FILE_STATES.FINISHED,Q.ITEM_FINISH),Y()(r,S.FILE_STATES.ERROR,Q.ITEM_ERROR),Y()(r,S.FILE_STATES.CANCELLED,Q.ITEM_CANCEL),Y()(r,S.FILE_STATES.ABORTED,Q.ITEM_ABORT),Y()(r,S.FILE_STATES.UPLOADING,Q.ITEM_PROGRESS),r),ht=[S.FILE_STATES.FINISHED,S.FILE_STATES.ERROR,S.FILE_STATES.CANCELLED,S.FILE_STATES.ABORTED],bt=function(t){return!!~M()(ht).call(ht,t.state)},St=function(t,e,n){return o()(e).call(e,(function(e){var n,r=t.getState(),a=e.id,o=e.info;if(S.logger.debugLog("uploader.processor.queue: request finished for item - ",{id:a,info:o}),r.items[a]){t.updateState((function(t){var e=t.items[a];e.state=o.state,e.uploadResponse=o.response,bt(e)&&delete t.aborts[a]}));var u=t.getState().items[a];o.state===S.FILE_STATES.FINISHED&&u.completed<100&&t.handleItemProgress(u,100,u.file?u.file.size:0),t.trigger(gt[u.state],u),bt(u)&&t.trigger(Q.ITEM_FINALIZE,u)}var c=M()(n=r.itemQueue).call(n,a);~c&&t.updateState((function(t){var e,n;i()(e=t.itemQueue).call(e,c,1);var r,o=M()(n=t.activeIds).call(n,a);~o&&i()(r=t.activeIds).call(r,o,1)}))})),pt(t),n(t)},mt=Object(S.getMerge)({undefinedOverwrites:!0}),Tt=function(){var t=v()(d.a.mark((function t(e,n,r){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(S.triggerUpdater)(e.trigger,Q.REQUEST_PRE_SEND,{items:R()(n).call(n,(function(t){return t})),options:r});case 2:if(!(a=t.sent)){t.next=10;break}if(S.logger.debugLog("uploader.queue: REQUEST_PRE_SEND event returned updated items/options",a),!a.items){t.next=9;break}if(a.items.length===n.length&&Object(S.isSamePropInArrays)(a.items,n,["id","batchId","recycled"])){t.next=8;break}throw new Error("REQUEST_PRE_SEND event handlers must return same items with same ids");case 8:n=a.items;case 9:a.options&&(r=mt({},r,a.options));case 10:return t.abrupt("return",{items:n,options:r,cancelled:!1===a});case 11:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),At=function(){var t=v()(d.a.mark((function t(e,n){var r,a,u,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=R()(n).call(n,(function(t){return t.id})),e.updateState((function(t){var e;t.activeIds=p()(e=t.activeIds).call(e,r)})),t.next=4,Tt(e,n,e.getState().batches[n[0].batchId].batchOptions);case 4:return(a=t.sent).cancelled||(e.updateState((function(t){var e;o()(e=a.items).call(e,(function(e){t.items[e.id]=e})),t.batches[n[0].batchId].batchOptions=a.options})),i=e.getState(),a.items=R()(u=a.items).call(u,(function(t){return i.items[t.id]})),a.options=i.batches[n[0].batchId].batchOptions),t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Ot=function(t,e,n){t.updateState((function(t){o()(e).call(e,(function(e){t.items[e.id].state=S.FILE_STATES.UPLOADING,t.aborts[e.id]=n.abort}))}))},Lt=function(){var t=v()(d.a.mark((function t(e,n,r){var a,o,u,i,c,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.items,o=n.options,u=e.getState().batches[a[0].batchId].batch,i=e.sender.send(a,u,o),Ot(e,a,i),t.next=6,i.request;case 6:c=t.sent,l=R()(a).call(a,(function(t){return{id:t.id,info:c}})),St(e,l,r);case 9:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),Rt=function(t,e,n,r){var a,o=O()(a=R()(n).call(n,(function(t,n){return t?e[n].id:null}))).call(a,Boolean);if(o.length){var u=R()(o).call(o,(function(t){return{id:t,info:{status:0,state:S.FILE_STATES.CANCELLED,response:"cancel"}}}));St(t,u,r)}return!!o.length},It=function(t,e){return e.getState().items[t]},_t=function(){var t=v()(d.a.mark((function t(e,n,r){var a,o,u,i,c,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.getState(),u=h()(o.items),u=O()(u).call(u,(function(t){return!!~M()(n).call(n,t.id)})),t.next=5,W.a.all(R()(u).call(u,(function(t){return e.cancellable(Q.ITEM_START,t)})));case 5:if(i=t.sent,!(c=O()(a=R()(i).call(i,(function(t,n){return t?null:It(u[n].id,e)}))).call(a,Boolean)).length){t.next=12;break}return t.next=10,At(e,c);case 10:(l=t.sent).cancelled?i=R()(n).call(n,(function(){return!0})):Lt(e,l,r);case 12:if(Rt(e,u,i,r)){t.next=15;break}return t.next=15,r(e);case 15:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),yt=function(t,e){var n,r;return!!~M()(n=Z()(r=t.getState().activeIds).call(r)).call(n,e)},Ct=function(t){var e,n=t.getState().itemQueue,r=function(t){for(var e=t.getState(),n=e.itemQueue,r=e.items,a=0,o=n[a];o&&(yt(t,o)||!vt(t,o)||r[o].state!==S.FILE_STATES.ADDED);)o=n[a+=1];return o?a:-1}(t),a=n[r];if(a){var o=ut(t,a),u=o.batch.id,i=o.batchOptions.maxGroupSize||0;if(o.batchOptions.grouped&&i>1){e=[];for(var c=!0;e.length<i&&c;)e.push(a),c=(a=n[r+e.length])&&ot(t,a,u)}else e=[a]}return e},Dt=function(){var t=v()(d.a.mark((function t(e){var n,r,a,o,u,i,c,l,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=Ct(e))){t.next=13;break}if(r=e.getCurrentActiveCount(),a=e.getOptions(),o=a.concurrent,u=void 0===o?0:o,i=a.maxConcurrent,c=void 0===i?0:i,r&&!(u&&r<c)){t.next=13;break}if(S.logger.debugLog("uploader.processor: Processing next upload - ",{ids:n,state:e.getState(),currentCount:r}),l=!1,!dt(e,n[0])){t.next=12;break}return t.next=9,ft(e,n[0]);case 9:s=t.sent,(l=!s)&&(st(e,n[0]),Dt(e));case 12:l||_t(e,n,Dt);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),wt=Dt,Ft=function(t,e,n){var r=!1,a=t.getState(),o=a.items[e];return o&&function(t){return t===S.FILE_STATES.ADDED||t===S.FILE_STATES.UPLOADING}(o.state)&&(S.logger.debugLog("uploader.queue: aborting item in progress - ",o),o.state===S.FILE_STATES.UPLOADING?(t.updateState((function(t){t.items[e].state=S.FILE_STATES.ABORTED})),r=a.aborts[e]()):(St(t,[{id:e,info:{status:0,state:S.FILE_STATES.ABORTED,response:"aborted"}}],n),r=!0)),r},Pt=function(t,e,n,r,a){var u=z({itemQueue:[],currentBatch:null,batches:{},items:{},activeIds:[],aborts:{}}),i=u.state,c=u.update,l=function(t){for(var e,r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return n.apply(void 0,p()(e=[t]).call(e,B()(R()(a).call(a,(function(t){return t})))))},s=function(){return i},d=function(t){c(t)},f=function(t){var e;if(i.items[t.id])throw new Error(p()(e="Uploader queue conflict - item ".concat(t.id," already exists (recycled: ")).call(e,String(t.recycled),")"));d((function(e){e.items[t.id]=t,e.itemQueue.push(t.id)}))},E=function(t,e,n){i.items[t.id]&&(d((function(r){var a=r.items[t.id];a.loaded=n,a.completed=e})),l(Q.ITEM_PROGRESS,s().items[t.id]))};r.on(V.ITEM_PROGRESS,E),r.on(V.BATCH_PROGRESS,(function(t){var e,n=null===(e=i.batches[t.id])||void 0===e?void 0:e.batch.items;if(n){var r=F()(n).call(n,(function(t,e){return t[0]+=e.completed,t[1]+=e.loaded,t}),[0,0]),a=x()(r,2),o=a[0],u=a[1];d((function(e){var r=e.batches[t.id].batch;r.completed=o/n.length,r.loaded=u})),l(Q.BATCH_PROGRESS,i.batches[t.id].batch)}}));var v={getOptions:function(){return t},getCurrentActiveCount:function(){return i.activeIds.length},getState:s,updateState:d,trigger:l,cancellable:function(t){for(var n,r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return e.apply(void 0,p()(n=[t]).call(n,B()(R()(a).call(a,(function(t){return t})))))},sender:r,handleItemProgress:E};S.logger.isDebugOn()&&(window["__rpldy_".concat(a,"_queue_state")]=v);return{updateState:d,getState:v.getState,uploadBatch:function(t,e){var n;d((function(n){n.batches[t.id]={batch:t,batchOptions:e}})),o()(n=t.items).call(n,f),wt(v)},abortItem:function(t){return function(t,e,n){return Ft(t,e,n)}(v,t,wt)},abortBatch:function(t){!function(t,e,n){var r,a=t.getState().batches[e],u=null==a?void 0:a.batch;u&&u.state!==S.BATCH_STATES.CANCELLED&&u.state!==S.BATCH_STATES.FINISHED&&(o()(r=u.items).call(r,(function(e){return Ft(t,e.id,n)})),t.updateState((function(t){at(t,e).state=S.BATCH_STATES.ABORTED})),Et(t,e,Q.BATCH_ABORT))}(v,t,wt)},abortAll:function(){var t,e,n,r;e=wt,r=(t=v).getState().items,o()(n=j()(r)).call(n,(function(n){return Ft(t,n,e)}))}}},xt=n("jRAa"),Nt=function(t,e,n,r){!function(t,e,n,r){o()(t).call(t,(function(t){var a,o;S.logger.debugLog(p()(a=p()(o="uploady.uploader.processor: file: ".concat(t.id," progress event: loaded(")).call(o,n,") - completed(")).call(a,e,")")),r(V.ITEM_PROGRESS,t,e,n)}))}(t,Math.min(n.loaded/n.total*100,100)/t.length,n.loaded/t.length,r),r(V.BATCH_PROGRESS,e)},Bt=function(t,e,n){var r=Object(S.triggerCancellable)(t),a=function(){var t=Object(b.default)({send:function(t,n,r){var a=r.destination,o=null==a?void 0:a.url;if(!o)throw new Error("Destination URL not found! Can't send files without it");var u=Object(S.throttle)((function(r){return Nt(t,n,r,e)}),50,!0),i=Object(S.isFunction)(r.send)?r.send:xt.default;return i(t,o,{method:(null==a?void 0:a.method)||r.method||_.method,paramName:(null==a?void 0:a.filesParamName)||r.inputFieldName||"file",params:nt()(nt()({},r.params),null==a?void 0:a.params),forceJsonResponse:r.forceJsonResponse,withCredentials:r.withCredentials,formatGroupParamName:r.formatGroupParamName,headers:null==a?void 0:a.headers,sendWithFormData:r.sendWithFormData},u)}},h()(V)),e=t.trigger;return t.target}(),o=Pt(e,r,t,a,n);return{process:function(t,e){o.uploadBatch(t,e)},abortBatch:function(t){o.abortBatch(t)},abort:function(t){t?o.abortItem(t):o.abortAll()}}},Ut=h()(Q),jt=0,Ht=function(t){var e="uploader-".concat(jt+=1),n=!1,r=[],a={};S.logger.debugLog("uploady.uploader: creating new instance (".concat(e,")"),{options:t,counter:jt});var u=function(t){return nt()(nt()(nt()({},_),t),{},{destination:t&&t.destination?(e=t.destination,nt()({filesParamName:"file",params:{}},e)):null});var e}(t),c=function(){var t=v()(d.a.mark((function t(e,n){var a,o,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=Object(S.merge)({},u,n),!(o=D(e,E.id,a)).items.length){t.next=9;break}return t.next=5,g(Q.BATCH_ADD,o,a);case 5:t.sent?(o.state=S.BATCH_STATES.CANCELLED,f(Q.BATCH_CANCEL,o)):(S.logger.debugLog(p()(i="uploady.uploader [".concat(E.id,"]: new items added - auto upload = ")).call(i,String(a.autoUpload)),o.items),a.autoUpload?m.process(o,a):r.push({batch:o,uploadOptions:a})),t.next=10;break;case 9:S.logger.debugLog("uploady.uploader: no items to add. batch ".concat(o.id," is empty. check fileFilter if this isn't intended"));case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),s=Object(b.default)({id:e,update:function(t){return u=Object(S.merge)({},u,t),E},add:c,upload:function(){var t;o()(t=i()(r).call(r,0)).call(t,(function(t){var e=t.batch,n=t.uploadOptions;return m.process(e,n)}))},abort:function(t){m.abort(t)},abortBatch:function(t){m.abortBatch(t)},getOptions:function(){return Object(S.clone)(u)},getPending:function(){return l()(r).call(r)},clearPending:function(){i()(r).call(r,0)},registerExtension:function(t,e){Object(S.invariant)(n,"Uploady - uploader extensions can only be registered by enhancers"),Object(S.invariant)(!a[t],"Uploady - uploader extension by this name [%s] already exists",t),S.logger.debugLog("uploady.uploader: registering extension: ".concat(t.toString()),e),a[t]=e},getExtension:function(t){return a[t]}},Ut,{canAddEvents:!1,canRemoveEvents:!1}),f=s.trigger,E=s.target,g=Object(S.triggerCancellable)(f);if(u.enhancer){n=!0;var h=u.enhancer(E,f);n=!1,E=h||E}var m=Bt(f,u,E.id);return Object(S.devFreeze)(E)},Mt=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return F()(e).call(e,(function(t,e){var n;return e.apply(void 0,p()(n=[t]).call(n,r))||t}),t)}};e.default=Ht},cDcd:function(e,n){e.exports=t},faye:function(t,n){t.exports=e},h0aC:function(t,e,n){"use strict";n.r(e),n.d(e,"useBatchAddListener",(function(){return I})),n.d(e,"useBatchStartListener",(function(){return _})),n.d(e,"useBatchProgressListener",(function(){return w})),n.d(e,"useBatchFinishListener",(function(){return y})),n.d(e,"useBatchCancelledListener",(function(){return C})),n.d(e,"useBatchAbortListener",(function(){return D})),n.d(e,"useItemStartListener",(function(){return F})),n.d(e,"useItemFinishListener",(function(){return P})),n.d(e,"useItemProgressListener",(function(){return j})),n.d(e,"useItemCancelListener",(function(){return x})),n.d(e,"useItemErrorListener",(function(){return N})),n.d(e,"useItemAbortListener",(function(){return B})),n.d(e,"useItemFinalizeListener",(function(){return U})),n.d(e,"useRequestPreSend",(function(){return H})),n.d(e,"generateUploaderEventHook",(function(){return L})),n.d(e,"generateUploaderEventHookWithState",(function(){return O})),n.d(e,"logWarning",(function(){return R})),n.d(e,"UploadyContext",(function(){return i})),n.d(e,"createContextApi",(function(){return u})),n.d(e,"useUploadOptions",(function(){return s})),n.d(e,"assertContext",(function(){return l})),n.d(e,"useWithForwardRef",(function(){return c})),n.d(e,"useAbortAll",(function(){return p})),n.d(e,"useAbortBatch",(function(){return f})),n.d(e,"useAbortItem",(function(){return d}));var r=n("cDcd"),a=n.n(r),o=n("KkDc"),u=function(t,e){var n,r;e?n=e:o.logger.debugLog("Uploady context - didn't receive input field ref - waiting for external ref");var a=function(){var t;return null===(t=n)||void 0===t?void 0:t.current},u=function t(){var e=a();Object(o.invariant)(e,"Uploady - Context. File input isn't available"),e.removeEventListener("change",t);var n=r;r=null,i(e.files,n)},i=function(e,n){t.add(e,n)};return{hasUploader:function(){return!!t},setExternalFileInput:function(t){n=t},showFileUpload:function(t){var e=a();Object(o.invariant)(e,"Uploady - Context. File input isn't available"),r=t,e.removeEventListener("change",u),e.addEventListener("change",u),e.value="",e.click()},upload:i,processPending:function(){t.upload()},setOptions:function(e){t.update(e)},getOptions:function(){return t.getOptions()},getExtension:function(e){return t.getExtension(e)},abort:function(e){t.abort(e)},abortBatch:function(e){t.abortBatch(e)},on:function(e,n){return t.on(e,n)},once:function(e,n){return t.once(e,n)},off:function(e,n){return t.off(e,n)}}},i=a.a.createContext(null),c=function(t){var e=Object(r.useRef)(null),n=Object(r.useCallback)((function(n){t&&(Object(o.isFunction)(t)?t(n):t.current=n),e.current=n}),[t]);return{ref:e,setRef:n}},l=function(t){return Object(o.invariant)(t&&t.hasUploader(),"Uploady - valid UploadyContext not found. Make sure you render inside <Uploady>"),t},s=function(t){var e=l(Object(r.useContext)(i));return t&&e.setOptions(t),e.getOptions()},d=function(){var t=l(Object(r.useContext)(i));return Object(r.useCallback)((function(e){return t.abort(e)}),[t])},f=function(){var t=l(Object(r.useContext)(i));return Object(r.useCallback)((function(e){return t.abortBatch(e)}),[t])},p=function(){var t=l(Object(r.useContext)(i));return Object(r.useCallback)((function(){return t.abort()}),[t])},E=n("kT1S"),v=n.n(E),g=n("QELF"),h=n("o+MX"),b=n.n(h),S=n("zLi2"),m=n.n(S),T=n("lFlW"),A=function(t,e){var n=l(Object(r.useContext)(T.UploadyContext)),a=n.on,o=n.off;Object(r.useEffect)((function(){return a(t,e),function(){o(t,e)}}),[t,e,a,o])},O=function(t,e){return function(n,a){var o=Object(r.useState)(null),u=m()(o,2),i=u[0],c=u[1],l=Object(r.useCallback)((function(t){if(!a||t.id===a){for(var r,o,u=arguments.length,i=new Array(u>1?u-1:0),l=1;l<u;l++)i[l-1]=arguments[l];if(c(e.apply(void 0,b()(r=[t]).call(r,i))),n)n.apply(void 0,b()(o=[t]).call(o,i))}}),[n,a]);return A(t,l),i}},L=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n,a){var o=Object(r.useCallback)((function(t){for(var r,o=arguments.length,u=new Array(o>1?o-1:0),i=1;i<o;i++)u[i-1]=arguments[i];return!n||e&&a&&t.id!==a?void 0:n.apply(void 0,b()(r=[t]).call(r,u))}),[n,a]);A(t,o)}},R=function(t,e){0},I=L(g.UPLOADER_EVENTS.BATCH_ADD,!1),_=L(g.UPLOADER_EVENTS.BATCH_START),y=L(g.UPLOADER_EVENTS.BATCH_FINISH),C=L(g.UPLOADER_EVENTS.BATCH_CANCEL),D=L(g.UPLOADER_EVENTS.BATCH_ABORT),w=O(g.UPLOADER_EVENTS.BATCH_PROGRESS,(function(t){return v()({},t)})),F=L(g.UPLOADER_EVENTS.ITEM_START),P=L(g.UPLOADER_EVENTS.ITEM_FINISH),x=L(g.UPLOADER_EVENTS.ITEM_CANCEL),N=L(g.UPLOADER_EVENTS.ITEM_ERROR),B=L(g.UPLOADER_EVENTS.ITEM_ABORT),U=L(g.UPLOADER_EVENTS.ITEM_FINALIZE),j=O(g.UPLOADER_EVENTS.ITEM_PROGRESS,(function(t){return v()({},t)})),H=L(g.UPLOADER_EVENTS.REQUEST_PRE_SEND,!1)},jRAa:function(t,e,n){"use strict";n.r(e),n.d(e,"send",(function(){return y})),n.d(e,"XHR_SENDER_TYPE",(function(){return g}));var r=n("o+MX"),a=n.n(r),o=n("a0dU"),u=n.n(o),i=n("SPx3"),c=n.n(i),l=n("ZbhI"),s=n.n(l),d=n("UtpJ"),f=n.n(d),p=n("kT1S"),E=n.n(p),v=n("KkDc"),g="rpldy-sender",h=n("zLi2"),b=n.n(h),S=n("i5y0"),m=n.n(S),T=n("RXMP"),A=n.n(T),O=function(t,e){var n,r=new FormData;(function(t,e,n){var r=1===e.length;A()(e).call(e,(function(e,o){var u,i=r?n.paramName:Object(v.isFunction)(n.formatGroupParamName)?n.formatGroupParamName(o,n.paramName):a()(u="".concat(n.paramName,"[")).call(u,o,"]");e.file?t.set(i,e.file,e.file.name):e.url&&t.set(i,e.url)}))}(r,t,e),e.params)&&A()(n=m()(e.params)).call(n,(function(t){var e=b()(t,2),n=e[0],a=e[1];return r.set(n,a)}));return r},L=[200,201,202,203,204],R=function(t,e,n,r){var a=function(t,e){var n;if(e.sendWithFormData)v.logger.debugLog("uploady.sender: sending ".concat(t.length," item(s) as form data")),n=O(t,e);else{if(t.length>1)throw new Error("XHR Sender - Request without form data can only contain 1 item. received ".concat(t.length));var r=t[0];v.logger.debugLog("uploady.sender: sending item ".concat(r.id," as request body")),n=r.file||r.url}return n}(t,n),o=Object(v.request)(e,a,E()(E()({},Object(v.pick)(n,["method","headers","withCredentials"])),{},{preSend:function(e){e.upload.onprogress=function(e){e.lengthComputable&&r&&r(e,f()(t).call(t))}}}));return{url:e,count:t.length,pXhr:o,xhr:o.xhr,aborted:!1}},I=function(t,e,n){var r=t,a=e&&e["content-type"];if(n.forceJsonResponse||a&&~s()(a).call(a,"json"))try{r=JSON.parse(t)}catch(t){}return r},_=function(){var t=c()(u.a.mark((function t(e,n){var r,a,o,i,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=0,t.prev=1,t.next=4,e.pXhr;case 4:i=t.sent,v.logger.debugLog("uploady.sender: received upload response ",i),r=~s()(L).call(L,i.status)?v.FILE_STATES.FINISHED:v.FILE_STATES.ERROR,o=i.status,c=Object(v.parseResponseHeaders)(i),a={data:I(i.response,c,n),headers:c},t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),e.aborted?(r=v.FILE_STATES.ABORTED,a="aborted"):(v.logger.debugLog("uploady.sender: upload failed: ",t.t0),r=v.FILE_STATES.ERROR,a=t.t0);case 15:return t.abrupt("return",{status:o,state:r,response:a});case 16:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,n){return t.apply(this,arguments)}}(),y=function(t,e,n,r){v.logger.debugLog("uploady.sender: sending file: ",{items:t,url:e,options:n});var o=R(t,e,n,r);return{request:_(o,n),abort:function(){return function(t){var e,n=!1,r=t.aborted,o=t.xhr;!r&&o.readyState&&4!==o.readyState&&(v.logger.debugLog(a()(e="uploady.sender: cancelling request with ".concat(t.count," items to: ")).call(e,t.url)),o.abort(),t.aborted=!0,n=!0);return n}(o)},senderType:g}};e.default=y},lFlW:function(t,e,n){"use strict";n.r(e),n.d(e,"Uploady",(function(){return T})),n.d(e,"useFileInput",(function(){return C})),n.d(e,"withRequestPreSendUpdate",(function(){return x})),n.d(e,"UploadyContext",(function(){return f.UploadyContext})),n.d(e,"assertContext",(function(){return f.assertContext})),n.d(e,"useUploadOptions",(function(){return f.useUploadOptions})),n.d(e,"useBatchAddListener",(function(){return f.useBatchAddListener})),n.d(e,"useBatchStartListener",(function(){return f.useBatchStartListener})),n.d(e,"useBatchProgressListener",(function(){return f.useBatchProgressListener})),n.d(e,"useBatchFinishListener",(function(){return f.useBatchFinishListener})),n.d(e,"useBatchCancelledListener",(function(){return f.useBatchCancelledListener})),n.d(e,"useBatchAbortListener",(function(){return f.useBatchAbortListener})),n.d(e,"useItemStartListener",(function(){return f.useItemStartListener})),n.d(e,"useItemFinishListener",(function(){return f.useItemFinishListener})),n.d(e,"useItemProgressListener",(function(){return f.useItemProgressListener})),n.d(e,"useItemCancelListener",(function(){return f.useItemCancelListener})),n.d(e,"useItemErrorListener",(function(){return f.useItemErrorListener})),n.d(e,"useItemAbortListener",(function(){return f.useItemAbortListener})),n.d(e,"useItemFinalizeListener",(function(){return f.useItemFinalizeListener})),n.d(e,"useRequestPreSend",(function(){return f.useRequestPreSend})),n.d(e,"useAbortAll",(function(){return f.useAbortAll})),n.d(e,"useAbortBatch",(function(){return f.useAbortBatch})),n.d(e,"useAbortItem",(function(){return f.useAbortItem})),n.d(e,"UPLOADER_EVENTS",(function(){return S.UPLOADER_EVENTS})),n.d(e,"DEFAULT_OPTIONS",(function(){return S.DEFAULT_OPTIONS})),n.d(e,"composeEnhancers",(function(){return S.composeEnhancers})),n.d(e,"createUploader",(function(){return S.createUploader})),n.d(e,"send",(function(){return S.send})),n.d(e,"XHR_SENDER_TYPE",(function(){return S.XHR_SENDER_TYPE}));var r=n("EcSs"),a=n.n(r),o=n("tpxy"),u=n.n(o),i=n("cDcd"),c=n.n(i),l=n("faye"),s=n.n(l),d=n("KkDc"),f=n("h0aC"),p=n("zLi2"),E=n.n(p),v=n("i5y0"),g=n.n(v),h=n("RXMP"),b=n.n(h),S=n("QELF"),m=Object(i.memo)(Object(i.forwardRef)((function(t,e){var n=t.uploader,r=t.container,o=u()(t,["uploader","container"]),i=n.getOptions(),l=r&&1===r.nodeType;return Object(d.invariant)(l,"Uploady - Container for file input must be a valid dom element"),r&&l?s.a.createPortal(c.a.createElement("input",a()({},o,{name:i.inputFieldName,type:"file",ref:e})),r):null}))),T=function(t){var e=t.multiple,n=void 0===e||e,r=t.capture,a=t.accept,o=t.webkitdirectory,l=t.listeners,s=t.debug,p=t.children,v=t.inputFieldContainer,h=t.customInput,T=t.fileInputId,A=u()(t,["multiple","capture","accept","webkitdirectory","listeners","debug","children","inputFieldContainer","customInput","fileInputId"]);d.logger.setDebug(!!s),d.logger.debugLog("@@@@@@ Uploady Rendering @@@@@@",t);var O=v||document.body,L=Object(i.useRef)(),R=function(t,e){var n=Object(i.useMemo)((function(){return d.logger.debugLog("Uploady creating a new uploader instance",t),Object(S.default)(t)}),[t.enhancer]);return n.update(t),Object(i.useEffect)((function(){var t;e&&(d.logger.debugLog("Uploady setting event listeners",e),b()(t=g()(e)).call(t,(function(t){var e=E()(t,2),r=e[0],a=e[1];n.on(r,a)})));return function(){var t;e&&(d.logger.debugLog("Uploady removing event listeners",e),b()(t=g()(e)).call(t,(function(t){var e=E()(t,2),r=e[0],a=e[1];return n.off(r,a)})))}}),[e,n]),n}(A,l),I=Object(i.useMemo)((function(){return Object(f.createContextApi)(R,h?null:L)}),[R,L,h]);return c.a.createElement(f.UploadyContext.Provider,{value:I},h?null:c.a.createElement(m,{container:O,uploader:R,multiple:n,capture:r,accept:a,webkitdirectory:o,style:{display:"none"},ref:L,id:T}),p)},A=n("UtpJ"),O=n.n(A),L=n("o+MX"),R=n.n(L),I=n("pPxq"),_=n.n(I),y=function(t){var e=t.closest("form"),n={filesParamName:t.getAttribute("name"),method:void 0,url:void 0};if(e){var r,a=e.getAttribute("method"),o=function(t){var e,n,r,a,o,u,i,c,l=window.location,s=t.getAttribute("action")||"";switch(s=s.replace(/\s/g,""),!0){case""===s:s=l.href;break;case _()(s).call(s,"/"):s=R()(e=R()(n="".concat(l.protocol,"//")).call(n,l.host)).call(e,s);break;case!/:\/\//.test(s):c=R()(r=O()(a=l.pathname.split("/")).call(a,0,-1)).call(r,"").join("/"),s=R()(o=R()(u=R()(i="".concat(l.protocol,"//")).call(i,l.host)).call(u,c)).call(o,s)}return s}(e);n.method=a?a.toUpperCase():void 0,n.url=o,d.logger.debugLog(R()(r="Uploady.useFileInput: using custom input's parent form url ".concat(n.url," and method ")).call(r,n.method||""))}return n},C=function(t){var e=Object(f.assertContext)(Object(i.useContext)(f.UploadyContext));e.setExternalFileInput(t),Object(i.useEffect)((function(){if(t.current&&t.current.closest){var n=t.current,r=e.getOptions();if(!r.destination||!r.destination.url){var a=y(n);e.setOptions({destination:a})}}}),[t,e])},D=n("OBge"),w=n.n(D),F=n("/FZm"),P=n.n(F),x=function(t){return function(e){var n=Object(f.assertContext)(Object(i.useContext)(f.UploadyContext)),r=e.id,o=Object(i.useState)({update:null,data:null}),u=E()(o,2),l=u[0],s=u[1];return Object(i.useLayoutEffect)((function(){var t=function t(e){var a;return P()(a=e.items).call(a,(function(t){return t.id===r}))&&new w.a((function(r){s((function(){return{update:function(e){n.off(S.UPLOADER_EVENTS.REQUEST_PRE_SEND,t),r(e)},data:e}}))}))};return r&&n.on(S.UPLOADER_EVENTS.REQUEST_PRE_SEND,t),function(){r&&n.off(S.UPLOADER_EVENTS.REQUEST_PRE_SEND,t)}}),[n,r]),c.a.createElement(t,a()({},e,{updateRequest:l.update,requestData:l.data}))}};e.default=T}})}));
//# sourceMappingURL=rpldy-ui-core.umd.min.js.map