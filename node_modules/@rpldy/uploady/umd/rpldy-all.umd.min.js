/*!
 * MIT License
 * 
 * Copyright (c) 2020 Yoav Niran
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):"object"==typeof exports?exports.rpldy=t(require("react"),require("react-dom")):e.rpldy=t(e.react,e["react-dom"])}(window,(function(e,t){return function(e){function t(t){for(var r,o,i=t[0],c=t[1],s=t[2],d=0,f=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(l&&l(t);f.length;)f.shift()();return u.push.apply(u,s||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(r=!1)}r&&(u.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={main:0},u=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window.webpackJsonprpldy=window.webpackJsonprpldy||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var l=c;return u.push(["MIuT","polyfills"]),n()}({MIuT:function(e,t,n){"use strict";n.r(t),n.d(t,"chunkedSender",(function(){return i})),n.d(t,"lifeEvents",(function(){return c})),n.d(t,"mockSender",(function(){return s})),n.d(t,"retry",(function(){return d})),n.d(t,"safeStorage",(function(){return f})),n.d(t,"sender",(function(){return u})),n.d(t,"shared",(function(){return a})),n.d(t,"simpleState",(function(){return o})),n.d(t,"tusSender",(function(){return p})),n.d(t,"uploader",(function(){return l})),n.d(t,"chunkedUploady",(function(){return g})),n.d(t,"retryHooks",(function(){return m})),n.d(t,"sharedUi",(function(){return h})),n.d(t,"tusUploady",(function(){return b})),n.d(t,"uploadButton",(function(){return S})),n.d(t,"uploadDropZone",(function(){return E})),n.d(t,"uploadPreview",(function(){return y})),n.d(t,"uploadUrlInput",(function(){return R})),n.d(t,"uploady",(function(){return v}));var r={};n.r(r),n.d(r,"isDebugOn",(function(){return _})),n.d(r,"setDebug",(function(){return A})),n.d(r,"debugLog",(function(){return U}));var a={};n.r(a),n.d(a,"BATCH_STATES",(function(){return C})),n.d(a,"FILE_STATES",(function(){return T})),n.d(a,"invariant",(function(){return O.a})),n.d(a,"throttle",(function(){return w.a})),n.d(a,"logger",(function(){return r})),n.d(a,"triggerCancellable",(function(){return K})),n.d(a,"triggerUpdater",(function(){return X})),n.d(a,"createBatchItem",(function(){return ne})),n.d(a,"request",(function(){return he})),n.d(a,"parseResponseHeaders",(function(){return ve})),n.d(a,"isFunction",(function(){return ge})),n.d(a,"isPlainObject",(function(){return Te})),n.d(a,"isSamePropInArrays",(function(){return ye})),n.d(a,"devFreeze",(function(){return Re})),n.d(a,"merge",(function(){return Ae})),n.d(a,"getMerge",(function(){return _e})),n.d(a,"clone",(function(){return Ue})),n.d(a,"pick",(function(){return Pe}));var u={};n.r(u),n.d(u,"default",(function(){return Ye})),n.d(u,"send",(function(){return Ve})),n.d(u,"XHR_SENDER_TYPE",(function(){return Me}));var o={};n.r(o),n.d(o,"default",(function(){return gt})),n.d(o,"unwrap",(function(){return ht}));var i={};n.r(i),n.d(i,"default",(function(){return Nt})),n.d(i,"CHUNK_EVENTS",(function(){return mt})),n.d(i,"CHUNKING_SUPPORT",(function(){return Ze})),n.d(i,"CHUNKED_SENDER_TYPE",(function(){return bt})),n.d(i,"CHUNKED_DEFAULT_OPTIONS",(function(){return We})),n.d(i,"getChunkedEnhancer",(function(){return Pt})),n.d(i,"createChunkedSender",(function(){return Ut})),n.d(i,"getChunkDataFromFile",(function(){return $e}));var c={};n.r(c),n.d(c,"default",(function(){return bn})),n.d(c,"addLife",(function(){return mn})),n.d(c,"isLE",(function(){return rn}));var s={};n.r(s),n.d(s,"default",(function(){return kn})),n.d(s,"MOCK_SENDER_TYPE",(function(){return Sn})),n.d(s,"createMockSender",(function(){return Ln})),n.d(s,"getMockSenderEnhancer",(function(){return On}));var l={};n.r(l),n.d(l,"default",(function(){return Sr})),n.d(l,"UPLOADER_EVENTS",(function(){return Un})),n.d(l,"DEFAULT_OPTIONS",(function(){return Cn})),n.d(l,"composeEnhancers",(function(){return br})),n.d(l,"createUploader",(function(){return mr})),n.d(l,"send",(function(){return Ve})),n.d(l,"XHR_SENDER_TYPE",(function(){return Me}));var d={};n.r(d),n.d(d,"default",(function(){return Or})),n.d(d,"retryEnhancer",(function(){return Lr})),n.d(d,"RETRY_EVENT",(function(){return yr})),n.d(d,"RETRY_EXT",(function(){return Er}));var f={};n.r(f),n.d(f,"safeLocalStorage",(function(){return Tr})),n.d(f,"safeSessionStorage",(function(){return Dr}));var p={};n.r(p),n.d(p,"CHUNKING_SUPPORT",(function(){return Ze})),n.d(p,"TUS_SENDER_TYPE",(function(){return qr})),n.d(p,"getTusEnhancer",(function(){return Sa})),n.d(p,"clearResumables",(function(){return Fr})),n.d(p,"TUS_EXT",(function(){return jr})),n.d(p,"default",(function(){return Ea}));var v={};n.r(v),n.d(v,"default",(function(){return Ga})),n.d(v,"Uploady",(function(){return Fa})),n.d(v,"useFileInput",(function(){return qa})),n.d(v,"withRequestPreSendUpdate",(function(){return za})),n.d(v,"UploadyContext",(function(){return Ca})),n.d(v,"assertContext",(function(){return Da})),n.d(v,"useUploadOptions",(function(){return xa})),n.d(v,"useBatchAddListener",(function(){return Ya})),n.d(v,"useBatchStartListener",(function(){return Wa})),n.d(v,"useBatchProgressListener",(function(){return eu})),n.d(v,"useBatchFinishListener",(function(){return Ja})),n.d(v,"useBatchCancelledListener",(function(){return Za})),n.d(v,"useBatchAbortListener",(function(){return $a})),n.d(v,"useItemStartListener",(function(){return tu})),n.d(v,"useItemFinishListener",(function(){return nu})),n.d(v,"useItemProgressListener",(function(){return iu})),n.d(v,"useItemCancelListener",(function(){return ru})),n.d(v,"useItemErrorListener",(function(){return au})),n.d(v,"useItemAbortListener",(function(){return uu})),n.d(v,"useItemFinalizeListener",(function(){return ou})),n.d(v,"useRequestPreSend",(function(){return cu})),n.d(v,"useAbortAll",(function(){return Ua})),n.d(v,"useAbortBatch",(function(){return Aa})),n.d(v,"useAbortItem",(function(){return _a})),n.d(v,"UPLOADER_EVENTS",(function(){return Un})),n.d(v,"DEFAULT_OPTIONS",(function(){return Cn})),n.d(v,"composeEnhancers",(function(){return br})),n.d(v,"createUploader",(function(){return mr})),n.d(v,"send",(function(){return Ve})),n.d(v,"XHR_SENDER_TYPE",(function(){return Me}));var h={};n.r(h),n.d(h,"useBatchAddListener",(function(){return Ya})),n.d(h,"useBatchStartListener",(function(){return Wa})),n.d(h,"useBatchProgressListener",(function(){return eu})),n.d(h,"useBatchFinishListener",(function(){return Ja})),n.d(h,"useBatchCancelledListener",(function(){return Za})),n.d(h,"useBatchAbortListener",(function(){return $a})),n.d(h,"useItemStartListener",(function(){return tu})),n.d(h,"useItemFinishListener",(function(){return nu})),n.d(h,"useItemProgressListener",(function(){return iu})),n.d(h,"useItemCancelListener",(function(){return ru})),n.d(h,"useItemErrorListener",(function(){return au})),n.d(h,"useItemAbortListener",(function(){return uu})),n.d(h,"useItemFinalizeListener",(function(){return ou})),n.d(h,"useRequestPreSend",(function(){return cu})),n.d(h,"generateUploaderEventHook",(function(){return Xa})),n.d(h,"generateUploaderEventHookWithState",(function(){return Qa})),n.d(h,"logWarning",(function(){return Va})),n.d(h,"UploadyContext",(function(){return Ca})),n.d(h,"createContextApi",(function(){return wa})),n.d(h,"useUploadOptions",(function(){return xa})),n.d(h,"assertContext",(function(){return Da})),n.d(h,"useWithForwardRef",(function(){return Ta})),n.d(h,"useAbortAll",(function(){return Ua})),n.d(h,"useAbortBatch",(function(){return Aa})),n.d(h,"useAbortItem",(function(){return _a}));var g={};n.r(g),n.d(g,"default",(function(){return fu})),n.d(g,"ChunkedUploady",(function(){return su})),n.d(g,"Uploady",(function(){return Fa})),n.d(g,"useFileInput",(function(){return qa})),n.d(g,"withRequestPreSendUpdate",(function(){return za})),n.d(g,"UploadyContext",(function(){return Ca})),n.d(g,"assertContext",(function(){return Da})),n.d(g,"useUploadOptions",(function(){return xa})),n.d(g,"useBatchAddListener",(function(){return Ya})),n.d(g,"useBatchStartListener",(function(){return Wa})),n.d(g,"useBatchProgressListener",(function(){return eu})),n.d(g,"useBatchFinishListener",(function(){return Ja})),n.d(g,"useBatchCancelledListener",(function(){return Za})),n.d(g,"useBatchAbortListener",(function(){return $a})),n.d(g,"useItemStartListener",(function(){return tu})),n.d(g,"useItemFinishListener",(function(){return nu})),n.d(g,"useItemProgressListener",(function(){return iu})),n.d(g,"useItemCancelListener",(function(){return ru})),n.d(g,"useItemErrorListener",(function(){return au})),n.d(g,"useItemAbortListener",(function(){return uu})),n.d(g,"useItemFinalizeListener",(function(){return ou})),n.d(g,"useRequestPreSend",(function(){return cu})),n.d(g,"useAbortAll",(function(){return Ua})),n.d(g,"useAbortBatch",(function(){return Aa})),n.d(g,"useAbortItem",(function(){return _a})),n.d(g,"UPLOADER_EVENTS",(function(){return Un})),n.d(g,"DEFAULT_OPTIONS",(function(){return Cn})),n.d(g,"composeEnhancers",(function(){return br})),n.d(g,"createUploader",(function(){return mr})),n.d(g,"send",(function(){return Ve})),n.d(g,"XHR_SENDER_TYPE",(function(){return Me})),n.d(g,"useChunkStartListener",(function(){return lu})),n.d(g,"useChunkFinishListener",(function(){return du}));var m={};n.r(m),n.d(m,"default",(function(){return mu})),n.d(m,"RETRY_EVENT",(function(){return yr})),n.d(m,"retryEnhancer",(function(){return Or})),n.d(m,"useRetry",(function(){return vu})),n.d(m,"useBatchRetry",(function(){return hu})),n.d(m,"useRetryListener",(function(){return gu}));var b={};n.r(b),n.d(b,"default",(function(){return Eu})),n.d(b,"TusUploady",(function(){return bu})),n.d(b,"useClearResumableStore",(function(){return Su})),n.d(b,"Uploady",(function(){return Fa})),n.d(b,"useFileInput",(function(){return qa})),n.d(b,"withRequestPreSendUpdate",(function(){return za})),n.d(b,"UploadyContext",(function(){return Ca})),n.d(b,"assertContext",(function(){return Da})),n.d(b,"useUploadOptions",(function(){return xa})),n.d(b,"useBatchAddListener",(function(){return Ya})),n.d(b,"useBatchStartListener",(function(){return Wa})),n.d(b,"useBatchProgressListener",(function(){return eu})),n.d(b,"useBatchFinishListener",(function(){return Ja})),n.d(b,"useBatchCancelledListener",(function(){return Za})),n.d(b,"useBatchAbortListener",(function(){return $a})),n.d(b,"useItemStartListener",(function(){return tu})),n.d(b,"useItemFinishListener",(function(){return nu})),n.d(b,"useItemProgressListener",(function(){return iu})),n.d(b,"useItemCancelListener",(function(){return ru})),n.d(b,"useItemErrorListener",(function(){return au})),n.d(b,"useItemAbortListener",(function(){return uu})),n.d(b,"useItemFinalizeListener",(function(){return ou})),n.d(b,"useRequestPreSend",(function(){return cu})),n.d(b,"useAbortAll",(function(){return Ua})),n.d(b,"useAbortBatch",(function(){return Aa})),n.d(b,"useAbortItem",(function(){return _a})),n.d(b,"UPLOADER_EVENTS",(function(){return Un})),n.d(b,"DEFAULT_OPTIONS",(function(){return Cn})),n.d(b,"composeEnhancers",(function(){return br})),n.d(b,"createUploader",(function(){return mr})),n.d(b,"send",(function(){return Ve})),n.d(b,"XHR_SENDER_TYPE",(function(){return Me}));var S={};n.r(S),n.d(S,"default",(function(){return Iu})),n.d(S,"UploadButton",(function(){return Ru})),n.d(S,"asUploadButton",(function(){return yu}));var E={};n.r(E),n.d(E,"default",(function(){return ku})),n.d(E,"UploadDropZone",(function(){return Ou}));var y={};n.r(y),n.d(y,"PREVIEW_TYPES",(function(){return wu})),n.d(y,"default",(function(){return Nu})),n.d(y,"UploadPreview",(function(){return Pu}));var R={};n.r(R),n.d(R,"default",(function(){return Hu})),n.d(R,"UploadUrlInput",(function(){return Fu}));var I,L=n("QLaP"),O=n.n(L),k=n("uDTZ"),w=n.n(k),C={ADDED:"added",PROCESSING:"processing",UPLOADING:"uploading",CANCELLED:"cancelled",FINISHED:"finished",ABORTED:"aborted"},T={ADDED:"added",UPLOADING:"uploading",CANCELLED:"cancelled",FINISHED:"finished",ERROR:"error",ABORTED:"aborted"},D=n("ZbhI"),x=n.n(D),_=function(){var e;"boolean"!=typeof I&&(I=!!~x()(e=window.location.search).call(e,"rpldy_debug=true")||!0===window["__rupy-logger-debug__"]);return I},A=function(e){window["__rupy-logger-debug__"]=e,I=!!e||null},U=function(){var e;_()&&(e=console).log.apply(e,arguments)},P=n("a0dU"),N=n.n(P),B=n("TEMH"),F=n.n(B),H=n("OBge"),M=n.n(H),j=n("o+MX"),q=n.n(j),z=n("SPx3"),G=n.n(z),K=function(e,t){for(var n,r=function(){var t=G()(N.a.mark((function t(n){var r,a,u,o,i,c,s,l=arguments;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a=!1,u=l.length,o=new Array(u>1?u-1:0),i=1;i<u;i++)o[i-1]=l[i];if(!(c=e.apply(void 0,q()(r=[n]).call(r,o)))||!c.length){t.next=8;break}return t.next=6,M.a.all(c);case 6:s=t.sent,a=!!~F()(s).call(s,(function(e){return!1===e}));case 8:return t.abrupt("return",a);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a=arguments.length,u=new Array(a>2?a-2:0),o=2;o<a;o++)u[o-2]=arguments[o];return t?r.apply(void 0,q()(n=[t]).call(n,u)):r},Q=function(e){return null==e},X=function(e,t){for(var n,r=function(){var t=G()(N.a.mark((function t(n){var r,a,u,o,i,c,s,l=arguments;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(u=l.length,o=new Array(u>1?u-1:0),i=1;i<u;i++)o[i-1]=l[i];if(!(c=e.apply(void 0,q()(r=[n]).call(r,o)))||!c.length){t.next=7;break}return t.next=5,M.a.all(c);case 5:for(s=t.sent;Q(a)&&s.length;)a=s.pop();case 7:return t.abrupt("return",Q(a)?void 0:a);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a=arguments.length,u=new Array(a>2?a-2:0),o=2;o<a;o++)u[o-2]=arguments[o];return t?r.apply(void 0,q()(n=[t]).call(n,u)):r},V=n("LYCE"),Y=n.n(V),W=n("nhkr"),J=n.n(W),Z=n("CtDf"),$=n.n(Z),ee=$()("__rpldy-bi__"),te=0,ne=function(e,t){var n;te+=1;var r={id:e.id?e.id:q()(n="".concat(t,".item-")).call(n,te),batchId:t,state:T.ADDED,completed:0,loaded:0,aborted:!1,recycled:!1};if(Y()(r,ee,{value:!0,writable:!0}),"object"===J()(e)&&!0===e[ee]&&(r.recycled=!0,e=e.file||e.url),"string"==typeof e)r=function(e,t){return e.url=t,e}(r,e);else{if(!function(e){return e&&(e instanceof Blob||e instanceof File||"object"===J()(e)&&e.name&&e.type)}(e))throw new Error("Unknown type of file added: ".concat(J()(e)));r=function(e,t){return e.file=t,e}(r,e)}return r},re=n("+oHS"),ae=n.n(re),ue=n("RXMP"),oe=n.n(ue),ie=function(e,t){var n;t&&oe()(n=ae()(t)).call(n,(function(n){void 0!==t[n]&&e.setRequestHeader(n,t[n])}))},ce=n("zLi2"),se=n.n(ce),le=n("RKTd"),de=n.n(le),fe=n("KYsz"),pe=n.n(fe),ve=function(e){var t;try{var n,r;t=pe()(n=de()(r=e.getAllResponseHeaders()).call(r).split(/[\r\n]+/)).call(n,(function(e,t){var n=t.split(": "),r=se()(n,2),a=r[0],u=r[1];return e[a]=u,e}),{})}catch(t){U("uploady.request: failed to read response headers",e)}return t},he=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new XMLHttpRequest,a=new M.a((function(a,u){r.onerror=function(){return u(r)},r.ontimeout=function(){return u(r)},r.onabort=function(){return u(r)},r.onload=function(){return a(r)},r.open(n.method||"GET",e),ie(r,n.headers),r.withCredentials=!!n.withCredentials,n.preSend&&n.preSend(r),r.send(t)}));return a.xhr=r,a},ge=function(e){return"function"==typeof e},me=n("/FZm"),be=n.n(me),Se=n("FLGM"),Ee=n.n(Se),ye=function(e,t,n){var r=!0,a=function(e){var t,n=q()(t=[]).call(t,e);return function(e){return Ee()(e).call(e,(function(e){return Ee()(n).call(n,(function(t){return e[t]})).join()}))}}(n);if(e&&t&&e.length===t.length){var u=a(e),o=a(t);r=!!be()(u).call(u,(function(e,t){return e!==o[t]}))}return!r},Re=(n("9yv6"),function(e){return e}),Ie=n("OWCx"),Le=n.n(Ie),Oe=n("6UaR"),ke=n.n(Oe),we=n("zKQ6"),Ce=n.n(we),Te=function(e){var t;return!!e&&"object"===J()(e)&&("Object"===(null===(t=Ce()(e))||void 0===t?void 0:t.constructor.name)||null===Ce()(e))},De=function(e){return Te(e)||ke()(e)},xe=function(e,t){var n=ae()(e);return t.withSymbols?q()(n).call(n,Le()(e)):n},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function t(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),u=1;u<r;u++)a[u-1]=arguments[u];return n&&a.length&&oe()(a).call(a,(function(r){var a;r&&oe()(a=xe(r,e)).call(a,(function(a){var u=r[a];(void 0!==u||e.undefinedOverwrites)&&(De(u)?(void 0!==n[a]&&Te(n[a])||(n[a]=ke()(u)?[]:{}),t(n[a],u)):n[a]=u)}))})),n};return t},Ae=_e(),Ue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ae;return De(e)?t(ke()(e)?[]:{},e):e},Pe=function(e,t){var n;return e&&pe()(n=ae()(e)).call(n,(function(n,r){return~x()(t).call(t,r)&&(n[r]=e[r]),n}),{})},Ne=n("UtpJ"),Be=n.n(Ne),Fe=n("kT1S"),He=n.n(Fe),Me="rpldy-sender",je=n("i5y0"),qe=n.n(je),ze=function(e,t){var n,r=new FormData;(function(e,t,n){var r=1===t.length;oe()(t).call(t,(function(t,a){var u,o=r?n.paramName:ge(n.formatGroupParamName)?n.formatGroupParamName(a,n.paramName):q()(u="".concat(n.paramName,"[")).call(u,a,"]");t.file?e.set(o,t.file,t.file.name):t.url&&e.set(o,t.url)}))}(r,e,t),t.params)&&oe()(n=qe()(t.params)).call(n,(function(e){var t=se()(e,2),n=t[0],a=t[1];return r.set(n,a)}));return r},Ge=[200,201,202,203,204],Ke=function(e,t,n,a){var u=function(e,t){var n;if(t.sendWithFormData)r.debugLog("uploady.sender: sending ".concat(e.length," item(s) as form data")),n=ze(e,t);else{if(e.length>1)throw new Error("XHR Sender - Request without form data can only contain 1 item. received ".concat(e.length));var a=e[0];r.debugLog("uploady.sender: sending item ".concat(a.id," as request body")),n=a.file||a.url}return n}(e,n),o=he(t,u,He()(He()({},Pe(n,["method","headers","withCredentials"])),{},{preSend:function(t){t.upload.onprogress=function(t){t.lengthComputable&&a&&a(t,Be()(e).call(e))}}}));return{url:t,count:e.length,pXhr:o,xhr:o.xhr,aborted:!1}},Qe=function(e,t,n){var r=e,a=t&&t["content-type"];if(n.forceJsonResponse||a&&~x()(a).call(a,"json"))try{r=JSON.parse(e)}catch(e){}return r},Xe=function(){var e=G()(N.a.mark((function e(t,n){var a,u,o,i,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=0,e.prev=1,e.next=4,t.pXhr;case 4:i=e.sent,r.debugLog("uploady.sender: received upload response ",i),a=~x()(Ge).call(Ge,i.status)?T.FINISHED:T.ERROR,o=i.status,c=ve(i),u={data:Qe(i.response,c,n),headers:c},e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t.aborted?(a=T.ABORTED,u="aborted"):(r.debugLog("uploady.sender: upload failed: ",e.t0),a=T.ERROR,u=e.t0);case 15:return e.abrupt("return",{status:o,state:a,response:u});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}(),Ve=function(e,t,n,a){r.debugLog("uploady.sender: sending file: ",{items:e,url:t,options:n});var u=Ke(e,t,n,a);return{request:Xe(u,n),abort:function(){return function(e){var t,n=!1,a=e.aborted,u=e.xhr;!a&&u.readyState&&4!==u.readyState&&(r.debugLog(q()(t="uploady.sender: cancelling request with ".concat(e.count," items to: ")).call(t,e.url)),u.abort(),e.aborted=!0,n=!0);return n}(u)},senderType:Me}},Ye=Ve,We=Re({chunked:!0,chunkSize:5242880,retries:0,parallel:1}),Je=null,Ze=(Je=null,"Blob"in window&&(Je=Be()(Blob.prototype)||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),!!Je),$e=function(e,t,n){var r,a=null===(r=Je)||void 0===r?void 0:r.call(e,t,n,e.type);return a&&(a.name=e.name,a.lastModified=e.lastModified),a},et=n("sLxP"),tt=n.n(et),nt=n("06Pm"),rt=n.n(nt),at=n("X5/F"),ut=n.n(at),ot=n("K82H"),it=n.n(ot),ct=n("P0a4"),st=function(e){ut()(n,e);var t=it()(n);function n(e){var r;return rt()(this,n),(r=t.call(this,e)).name="ChunkedSendError",r}return n}(n.n(ct)()(Error)),lt=n("M5Mt"),dt=n.n(lt),ft=n("5PDf"),pt=n.n(ft),vt=(_e({withSymbols:!0}),$()("__rpldy-sstt-proxy__"),$()("__rpldy-sstt-state__"),function(e,t){0}),ht=function(e){return e},gt=function(e){var t=e;return{state:t,update:function(e){try{vt(),e(t)}finally{vt()}return t},unwrap:function(e){return e?ht(e):t}}},mt=Re({CHUNK_START:"CHUNK_START",CHUNK_FINISH:"CHUNK_FINISH"}),bt="rpldy-chunked-sender",St=function(){var e=G()(N.a.mark((function e(t,n,a,u,o){var i,c,s,l,d;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.requests[a]={id:a,abort:u.abort},e.next=3,u.request;case 3:c=e.sent,r.debugLog("chunkedSender: request finished for chunk: ".concat(a," - "),c),delete t.requests[a],~(s=F()(i=t.chunks).call(i,(function(e){return e.id===a})))&&(c.state===T.FINISHED?(d=dt()(l=t.chunks).call(l,s,1),o(mt.CHUNK_FINISH,{chunk:Pe(d[0],["id","start","end","index","attempt"]),item:ht(n),uploadData:c})):c.state!==T.ABORTED&&(t.chunks[s].attempt+=1),t.responses.push(c.response));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,a,u){return e.apply(this,arguments)}}(),Et=n("mnMc"),yt=n.n(Et),Rt=function(e){for(var t=[],n=ae()(e.requests),r=e.parallel||1,a=0;a<e.chunks.length&&n.length<r&&t.length<r;a++){var u=e.chunks[a];if(!yt()(n).call(n,u.id)){if(u.attempt&&!(u.attempt<e.retries))throw new st("chunk failure");t.push(u)}}return t},It=function(e,t,n){var r,a;return t&&q()(r=q()(a="bytes ".concat(e.start,"-")).call(a,e.start+t.size-1,"/")).call(r,n.file.size)},Lt=_e({undefinedOverwrites:!0}),Ot=function(){var e=G()(N.a.mark((function e(t,n,a,u,o){var i,c,s,l,d,f,p,v;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=He()(He()({},ht(n.sendOptions)),{},{headers:He()(He()({},n.sendOptions.headers),{},{"Content-Range":It(t,t.data,a)})}),s=ne(t.data,t.id),l=function(e){u(e,[t])},d=x()(i=n.chunks).call(i,t),e.next=6,X(o,mt.CHUNK_START,{item:ht(a),chunk:Pe(t,["id","start","end","index","attempt"]),chunkItem:s,sendOptions:c,url:n.url,chunkIndex:d,chunkCount:n.chunks.length,onProgress:u});case 6:return f=e.sent,(p=!1===f)&&r.debugLog(q()(v="chunkedSender.sendChunk: received false from CHUNK_START handler - skipping chunk ".concat(d,", item ")).call(v,a.id)),e.abrupt("return",p?{request:M.a.resolve({state:T.FINISHED,response:"skipping chunk as instructed by CHUNK_START handler",status:200}),abort:function(){return!0},senderType:"chunk-skipped-sender"}:Ye([s],(null==f?void 0:f.url)||n.url,Lt({},c,null==f?void 0:f.sendOptions),l));case 10:case"end":return e.stop()}}),e)})));return function(t,n,r,a,u){return e.apply(this,arguments)}}(),kt=function(e,t,n,a,u){var o,i,c;if(e.data||(e.data=$e(n.file,e.start,e.end)),!e.data)throw new st("chunk failure - failed to slice");r.debugLog(q()(o=q()(i=q()(c="chunkedSender.sendChunk: about to send chunk ".concat(e.id," [")).call(c,e.start,"-")).call(i,e.end,"] to: ")).call(o,t.url));var s=Ot(e,t,n,a,u);return{request:s.then((function(e){return e.request})),abort:function(){return s.then((function(e){return(0,e.abort)()})),!0},senderType:"chunk-passthrough-sender"}},wt=function(e,t){e(t instanceof st?{state:T.ERROR,response:"At least one chunk failed"}:{state:T.ERROR,response:t.message})},Ct=function(e,t,n){var a=!e.chunks.length;return a&&!e.error&&(e.finished=!0,r.debugLog("chunkedSender: chunked upload finished for item: ".concat(t.id),e.responses),n({state:T.FINISHED,response:e.responses})),a||e.error},Tt=function(){var e=G()(N.a.mark((function e(t,n,r,a,u,o){var i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=kt(u,t,n,r,o),e.next=3,St(t,n,u.id,i,o);case 3:Ct(t,n,a)||Dt(t,n,r,a,o);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a,u,o){return e.apply(this,arguments)}}(),Dt=function(){var e=G()(N.a.mark((function e(t,n,r,a,u){var o,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.finished&&!t.aborted&&(!(o=ae()(t.requests).length)||t.parallel&&t.parallel>o)){try{i=Rt(t)}catch(e){wt(a,e)}i&&oe()(i).call(i,(function(e){Tt(t,n,r,a,e,u).catch((function(e){t.error=!0,wt(a,e)}))}))}case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,a,u){return e.apply(this,arguments)}}(),xt=Dt,_t=function(e,t,n,a){var u=w()((function(r,a){var u,o=a[0].id;e.uploaded[o]=r.loaded;var i=pe()(u=ae()(e.uploaded)).call(u,(function(t,n){return t+e.uploaded[n]}),0);n({loaded:i,total:t.file.size},[t])}),100,!0);return{sendPromise:new M.a((function(n){xt(e,t,u,n,a)})),abort:function(){return function(e,t){var n;(r.debugLog("chunkedSender: aborting chunked upload for item: ".concat(t.id)),e.finished||e.aborted)||(oe()(n=ae()(e.requests)).call(n,(function(t){r.debugLog("chunkedSender: aborting chunk: ".concat(t)),e.requests[t].abort()})),e.aborted=!0);return e.aborted}(e,t)}}},At=function(e,t,n,a,u,o){var i,c=function(e,t){var n,r,a,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=t.chunkSize,i=u?e.file.size-u:e.file.size;if(i<=0)throw new st(q()(a="start byte ".concat(u," is invalid. File size: ")).call(a,e.file.size));var c=i<=o?1:Math.ceil(i/o);return Ee()(n=tt()(r=new Array(c)).call(r,null)).call(n,(function(t,n){var r,a=o*n+(u||0);return{id:q()(r="".concat(e.id,"_chunk-")).call(r,n),start:a,end:Math.min(a+o,e.file.size),data:null,attempt:0,uploaded:0,index:n}}))}(e,t,a.startByte);r.debugLog(q()(i="chunkedSender: created ".concat(c.length," chunks for: ")).call(i,e.file.name));var s=He()({finished:!1,aborted:!1,error:!1,uploaded:{},requests:{},responses:[],chunks:c,url:n,sendOptions:a},t),l=_t(s,e,u,o);return{request:l.sendPromise,abort:l.abort,senderType:bt}},Ut=function(e,t){var n=function(e){return Ae({},We,e)}(e);return{send:function(e,a,u,o){var i;return!n.chunked||e.length>1||e[0].url?(i=Ye(e,a,u,o),r.debugLog("chunkedSender: sending items as normal, un-chunked requests")):(r.debugLog("chunkedSender: sending file as a chunked request"),i=At(e[0],n,a,u,o,t)),i}}},Pt=function(e){return function(t,n){var r=Ut(e,n);return t.update({send:r.send}),t}},Nt=Pt,Bt=n("04Ix"),Ft=n.n(Bt),Ht=n("RSWj"),Mt=n.n(Ht),jt=n("HnXd"),qt=n.n(jt),zt=n("eLKs"),Gt=n.n(zt),Kt=n("STz3"),Qt=n.n(Kt),Xt=n("cdeZ"),Vt=n.n(Xt),Yt=n("JlUD"),Wt=n.n(Yt),Jt=Re({allowRegisterNonExistent:!0,canAddEvents:!0,canRemoveEvents:!0,collectStats:!1}),Zt=function(e,t){if(!ge(e))throw new Error("'".concat(t,"' is not a valid function"))},$t=function(e){return void 0===e},en=$()("__le__"),tn=function(e){return e?e[en]:null},nn=function(e){var t=tn(e);if(!t)throw new Error("Didnt find LE internal object. Something very bad happened!");return t},rn=function(e){return!!tn(e)},an=function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Zt(n,"cb");var u=nn(e);if(!u.options.allowRegisterNonExistent&&!~x()(r=u.events).call(r,t))throw new Error("Cannot register for event ".concat(t.toString()," that wasn't already defined (allowRegisterNonExistent = false)"));var o={name:t,cb:n,once:a},i=u.registry[t]||[];return be()(i).call(i,(function(e){return e.cb===n}))||(i.push(o),u.registry[t]=i),function(){return pn.call(e,t,n)}},un=function(e,t){var n,r,a=nn(e).registry;return t?a[t]?Be()(n=a[t]).call(n):[]:Vt()(r=Qt()(a)).call(r)},on={on:function(e,t){return an(this,e,t)},once:function(e,t){return an(this,e,t,!0)},off:pn,getEvents:function(){var e;return Be()(e=nn(this).events).call(e)}},cn=function(){var e;return pe()(e=qe()(on)).call(e,(function(e,t){var n=se()(t,2),r=n[0],a=n[1];return e[r]={value:a},e}),{})},sn={trigger:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var u,o,i,c=un(this,e);c.length&&(u=Ee()(o=pt()(i=Ee()(c).call(c,(function(n){return n.once&&fn(t,e,n.cb),r.length?1===r.length?n.cb(r[0]):2===r.length?n.cb(r[0],r[1]):3===r.length?n.cb(r[0],r[1],r[2]):n.cb.apply(n,r):n.cb()}))).call(i,(function(e){return!$t(e)}))).call(o,(function(e){return Wt()(e)?e:M.a.resolve(e)})));return u&&(u.length?u:void 0)},addEvent:function(e){var t=nn(this);if(!t.options.canAddEvents)throw new Error("Cannot add new events (canAddEvents = false)");var n;if(~x()(n=t.events).call(n,e))throw new Error("Event '".concat(e,"' already defined"));t.events.push(e)},removeEvent:function(e){var t=nn(this);if(!t.options.canRemoveEvents)throw new Error("Cannot remove events (canRemoveEvents = false)");var n,r,a=x()(n=t.events).call(n,e);dt()(r=t.events).call(r,a,1)},hasEvent:function(e){var t,n=nn(this);return!!~x()(t=n.events).call(t,e)},hasEventRegistrations:function(e){return!!un(this,e).length},assign:function(e){var t=nn(this);return gn(e,t.options,t.events,t.registry,t.stats),ln(e)}},ln=function(e){var t;return pe()(t=ae()(sn)).call(t,(function(t,n){var r;return t[n]=Gt()(r=sn[n]).call(r,e),t}),He()({target:e},sn))},dn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=nn(e).registry;!r[t]||!n&&r[t].length||delete r[t]},fn=function(e,t,n){var r,a=nn(e).registry;a[t]&&(n?(a[t]=pt()(r=a[t]).call(r,(function(e){return e.cb!==n})),dn(e,t)):dn(e,t,!0))};function pn(e,t){fn(this,e,t)}var vn,hn,gn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};qt()(e,He()(Ft()({},en,{value:Mt()({registry:r,events:n,options:t,stats:a})}),cn()))},mn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return e=e||{},n=He()(He()({},Jt),n),rn(e)||gn(e,n,t),ln(e)},bn=mn,Sn="rpldy-mock-sender",En=n("Kwsy"),yn=n.n(En),Rn=Re({delay:500,fileSize:1e6,progressIntervals:[10,25,50,75,99]}),In=function(e,t){return e.then((function(e){return r.debugLog("uploady.mockSender: mock request finished successfully"),{status:t.responseStatus||200,state:T.FINISHED,response:He()(He()({},e),{},{headers:{"x-request-type":"react-uploady.mockSender"},data:t.response||{mock:!0,success:!0}})}})).catch((function(){return r.debugLog("uploady.mockSender: mock request was aborted"),{status:0,state:T.ABORTED,response:"abort"}}))},Ln=function(e){var t=He()(He()({},Rn),e);return{send:function(e,n,a,u){r.debugLog("uploady.mockSender: about to make a mock request for items: ",e);var o=function(e,t){var n,r,a=performance.now(),u=[],o=!1,i=!1,c=null,s=null,l=null,d=function(){s&&(oe()(s).call(s,(function(e){clearTimeout(e)})),s=null)},f=new M.a((function(t,n){l=n,yn()((function(){i=!0,t({options:e,time:performance.now()-a,progressEvents:u}),d()}),e.delay||0)}));e.progressIntervals&&(s=Ee()(r=e.progressIntervals).call(r,(function(n){var r=n/100,a=(e.delay||0)*r;return yn()((function(){if(!o&&!i&&c){var n={total:e.fileSize||0,loaded:(e.fileSize||0)*r};u.push(n),c(n,t)}}),a)})));return{then:Gt()(n=f.then).call(n,f),abort:function(){return o=!0,i=!0,l&&l(),d(),!0},onProgress:function(e){c=e}}}(t,e);return o.onProgress(u),{request:In(o,t),abort:o.abort,senderType:Sn}},update:function(e){t=He()(He()({},t),e)}}},On=function(e){return function(t){var n=Ln(e);return t.update({send:n.send}),t}},kn=Ln,wn=function(){return!0},Cn=Re({autoUpload:!0,inputFieldName:"file",concurrent:!1,maxConcurrent:2,grouped:!1,maxGroupSize:5,method:"POST",params:{},fileFilter:wn,forceJsonResponse:!1,withCredentials:!1,destination:{},send:null,sendWithFormData:!0}),Tn=0,Dn=function(e,t,n){var r;return Ee()(r=pt()(Array.prototype).call(t,n||wn)).call(r,(function(t){return ne(t,e)}))},xn=function(e,t,n){var r="batch-".concat(Tn+=1),a=e instanceof FileList||"[object FileList]"===e.toString();return e=ke()(e)||a?e:[e],{id:r,uploaderId:t,items:Dn(r,e,n.fileFilter),state:C.ADDED,completed:0,loaded:0}},_n=n("Vi3r"),An=n.n(_n),Un=Re({BATCH_ADD:"BATCH-ADD",BATCH_START:"BATCH-START",BATCH_PROGRESS:"BATCH_PROGRESS",BATCH_FINISH:"BATCH-FINISH",BATCH_ABORT:"BATCH-ABORT",BATCH_CANCEL:"BATCH-CANCEL",ITEM_START:"FILE-START",ITEM_CANCEL:"FILE-CANCEL",ITEM_PROGRESS:"FILE-PROGRESS",ITEM_FINISH:"FILE-FINISH",ITEM_ABORT:"FILE-ABORT",ITEM_ERROR:"FILE-ERROR",ITEM_FINALIZE:"FILE-FINALIZE",REQUEST_PRE_SEND:"REQUEST_PRE_SEND"}),Pn=Re({ITEM_PROGRESS:"ITEM_PROGRESS",BATCH_PROGRESS:"BATCH_PROGRESS"}),Nn=[C.ADDED,C.PROCESSING,C.UPLOADING],Bn=function(e,t){return e.batches[t].batch},Fn=function(e,t,n){return e.getState().items[t].batchId===n},Hn=function(e,t){var n=e.getState(),r=n.items[t];return n.batches[r.batchId]},Mn=function(e,t){return Hn(e,t).batch},jn=function(e,t){var n,r=function(e,t){return Bn(e.getState(),t)}(e,t),a=Ee()(n=r.items).call(n,(function(e){return e.id}));e.updateState((function(e){oe()(a).call(a,(function(t){var n;delete e.items[t];var r,a=x()(n=e.itemQueue).call(n,t);~a&&dt()(r=e.itemQueue).call(r,a,1)}))}))},qn=function(e,t){e.updateState((function(e){delete e.batches[t]}))},zn=function(e,t){var n=Mn(e,t),a=n.id;r.debugLog("uploady.uploader.processor: cancelling batch: ",{batch:n}),e.updateState((function(e){Bn(e,a).state=C.CANCELLED})),Xn(e,a,Un.BATCH_CANCEL),jn(e,a),qn(e,a)},Gn=function(e,t){var n=Mn(e,t);return e.getState().currentBatch!==n.id},Kn=function(){var e=G()(N.a.mark((function e(t,n){var r,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Mn(t,n),e.next=3,t.cancellable(Un.BATCH_START,r);case 3:return(a=e.sent)||t.updateState((function(e){e.currentBatch=r.id})),e.abrupt("return",!a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Qn=function(e){var t=e.getState().currentBatch;t&&function(e){var t=e.getState().itemQueue;return 0===t.length||Gn(e,t[0])}(e)&&(Xn(e,t,Un.BATCH_FINISH),jn(e,t),qn(e,t))},Xn=function(e,t,n){var r,a=e.getState(),u=Bn(a,t),o=a.items,i=He()(He()({},ht(u)),{},{items:Ee()(r=u.items).call(r,(function(e){var t=e.id;return ht(o[t])}))});e.trigger(n,i)},Vn=function(e,t){var n=Mn(e,t);return yt()(Nn).call(Nn,n.state)},Yn=(vn={},Ft()(vn,T.ADDED,Un.ITEM_START),Ft()(vn,T.FINISHED,Un.ITEM_FINISH),Ft()(vn,T.ERROR,Un.ITEM_ERROR),Ft()(vn,T.CANCELLED,Un.ITEM_CANCEL),Ft()(vn,T.ABORTED,Un.ITEM_ABORT),Ft()(vn,T.UPLOADING,Un.ITEM_PROGRESS),vn),Wn=[T.FINISHED,T.ERROR,T.CANCELLED,T.ABORTED],Jn=function(e){return!!~x()(Wn).call(Wn,e.state)},Zn=function(e,t,n){return oe()(t).call(t,(function(t){var n,a=e.getState(),u=t.id,o=t.info;if(r.debugLog("uploader.processor.queue: request finished for item - ",{id:u,info:o}),a.items[u]){e.updateState((function(e){var t=e.items[u];t.state=o.state,t.uploadResponse=o.response,Jn(t)&&delete e.aborts[u]}));var i=e.getState().items[u];o.state===T.FINISHED&&i.completed<100&&e.handleItemProgress(i,100,i.file?i.file.size:0),e.trigger(Yn[i.state],i),Jn(i)&&e.trigger(Un.ITEM_FINALIZE,i)}var c=x()(n=a.itemQueue).call(n,u);~c&&e.updateState((function(e){var t,n;dt()(t=e.itemQueue).call(t,c,1);var r,a=x()(n=e.activeIds).call(n,u);~a&&dt()(r=e.activeIds).call(r,a,1)}))})),Qn(e),n(e)},$n=_e({undefinedOverwrites:!0}),er=function(){var e=G()(N.a.mark((function e(t,n,a){var u;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(t.trigger,Un.REQUEST_PRE_SEND,{items:Ee()(n).call(n,(function(e){return ht(e)})),options:ht(a)});case 2:if(!(u=e.sent)){e.next=10;break}if(r.debugLog("uploader.queue: REQUEST_PRE_SEND event returned updated items/options",u),!u.items){e.next=9;break}if(u.items.length===n.length&&ye(u.items,n,["id","batchId","recycled"])){e.next=8;break}throw new Error("REQUEST_PRE_SEND event handlers must return same items with same ids");case 8:n=u.items;case 9:u.options&&(a=$n({},a,u.options));case 10:return e.abrupt("return",{items:n,options:a,cancelled:!1===u});case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),tr=function(){var e=G()(N.a.mark((function e(t,n){var r,a,u,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ee()(n).call(n,(function(e){return e.id})),t.updateState((function(e){var t;e.activeIds=q()(t=e.activeIds).call(t,r)})),e.next=4,er(t,n,t.getState().batches[n[0].batchId].batchOptions);case 4:return(a=e.sent).cancelled||(t.updateState((function(e){var t;oe()(t=a.items).call(t,(function(t){e.items[t.id]=t})),e.batches[n[0].batchId].batchOptions=a.options})),o=t.getState(),a.items=Ee()(u=a.items).call(u,(function(e){return o.items[e.id]})),a.options=o.batches[n[0].batchId].batchOptions),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),nr=function(e,t,n){e.updateState((function(e){oe()(t).call(t,(function(t){e.items[t.id].state=T.UPLOADING,e.aborts[t.id]=n.abort}))}))},rr=function(){var e=G()(N.a.mark((function e(t,n,r){var a,u,o,i,c,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.items,u=n.options,o=t.getState().batches[a[0].batchId].batch,i=t.sender.send(a,o,u),nr(t,a,i),e.next=6,i.request;case 6:c=e.sent,s=Ee()(a).call(a,(function(e){return{id:e.id,info:c}})),Zn(t,s,r);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),ar=function(e,t,n,r){var a,u=pt()(a=Ee()(n).call(n,(function(e,n){return e?t[n].id:null}))).call(a,Boolean);if(u.length){var o=Ee()(u).call(u,(function(e){return{id:e,info:{status:0,state:T.CANCELLED,response:"cancel"}}}));Zn(e,o,r)}return!!u.length},ur=function(e,t){return t.getState().items[e]},or=function(){var e=G()(N.a.mark((function e(t,n,r){var a,u,o,i,c,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=t.getState(),o=Qt()(u.items),o=pt()(o).call(o,(function(e){return!!~x()(n).call(n,e.id)})),e.next=5,M.a.all(Ee()(o).call(o,(function(e){return t.cancellable(Un.ITEM_START,e)})));case 5:if(i=e.sent,!(c=pt()(a=Ee()(i).call(i,(function(e,n){return e?null:ur(o[n].id,t)}))).call(a,Boolean)).length){e.next=12;break}return e.next=10,tr(t,c);case 10:(s=e.sent).cancelled?i=Ee()(n).call(n,(function(){return!0})):rr(t,s,r);case 12:if(ar(t,o,i,r)){e.next=15;break}return e.next=15,r(t);case 15:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),ir=function(e,t){var n,r;return!!~x()(n=Vt()(r=e.getState().activeIds).call(r)).call(n,t)},cr=function(e){var t,n=e.getState().itemQueue,r=function(e){for(var t=e.getState(),n=t.itemQueue,r=t.items,a=0,u=n[a];u&&(ir(e,u)||!Vn(e,u)||r[u].state!==T.ADDED);)u=n[a+=1];return u?a:-1}(e),a=n[r];if(a){var u=Hn(e,a),o=u.batch.id,i=u.batchOptions.maxGroupSize||0;if(u.batchOptions.grouped&&i>1){t=[];for(var c=!0;t.length<i&&c;)t.push(a),c=(a=n[r+t.length])&&Fn(e,a,o)}else t=[a]}return t},sr=function(){var e=G()(N.a.mark((function e(t){var n,a,u,o,i,c,s,l,d;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=cr(t))){e.next=13;break}if(a=t.getCurrentActiveCount(),u=t.getOptions(),o=u.concurrent,i=void 0===o?0:o,c=u.maxConcurrent,s=void 0===c?0:c,a&&!(i&&a<s)){e.next=13;break}if(r.debugLog("uploader.processor: Processing next upload - ",{ids:n,state:t.getState(),currentCount:a}),l=!1,!Gn(t,n[0])){e.next=12;break}return e.next=9,Kn(t,n[0]);case 9:d=e.sent,(l=!d)&&(zn(t,n[0]),sr(t));case 12:l||or(t,n,sr);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),lr=sr,dr=function(e,t,n){var a=!1,u=e.getState(),o=u.items[t];return o&&function(e){return e===T.ADDED||e===T.UPLOADING}(o.state)&&(r.debugLog("uploader.queue: aborting item in progress - ",o),o.state===T.UPLOADING?(e.updateState((function(e){e.items[t].state=T.ABORTED})),a=u.aborts[t]()):(Zn(e,[{id:t,info:{status:0,state:T.ABORTED,response:"aborted"}}],n),a=!0)),a},fr=function(e,t,n,a,u){var o=gt({itemQueue:[],currentBatch:null,batches:{},items:{},activeIds:[],aborts:{}}),i=o.state,c=o.update,s=function(e){for(var t,r=arguments.length,a=new Array(r>1?r-1:0),u=1;u<r;u++)a[u-1]=arguments[u];return n.apply(void 0,q()(t=[e]).call(t,An()(Ee()(a).call(a,(function(e){return ht(e)})))))},l=function(){return i},d=function(e){c(e)},f=function(e){var t;if(i.items[e.id])throw new Error(q()(t="Uploader queue conflict - item ".concat(e.id," already exists (recycled: ")).call(t,String(e.recycled),")"));d((function(t){t.items[e.id]=e,t.itemQueue.push(e.id)}))},p=function(e,t,n){i.items[e.id]&&(d((function(r){var a=r.items[e.id];a.loaded=n,a.completed=t})),s(Un.ITEM_PROGRESS,l().items[e.id]))};a.on(Pn.ITEM_PROGRESS,p),a.on(Pn.BATCH_PROGRESS,(function(e){var t,n=null===(t=i.batches[e.id])||void 0===t?void 0:t.batch.items;if(n){var r=pe()(n).call(n,(function(e,t){return e[0]+=t.completed,e[1]+=t.loaded,e}),[0,0]),a=se()(r,2),u=a[0],o=a[1];d((function(t){var r=t.batches[e.id].batch;r.completed=u/n.length,r.loaded=o})),s(Un.BATCH_PROGRESS,i.batches[e.id].batch)}}));var v={getOptions:function(){return e},getCurrentActiveCount:function(){return i.activeIds.length},getState:l,updateState:d,trigger:s,cancellable:function(e){for(var n,r=arguments.length,a=new Array(r>1?r-1:0),u=1;u<r;u++)a[u-1]=arguments[u];return t.apply(void 0,q()(n=[e]).call(n,An()(Ee()(a).call(a,(function(e){return ht(e)})))))},sender:a,handleItemProgress:p};r.isDebugOn()&&(window["__rpldy_".concat(u,"_queue_state")]=v);return{updateState:d,getState:v.getState,uploadBatch:function(e,t){var n;d((function(n){n.batches[e.id]={batch:e,batchOptions:t}})),oe()(n=e.items).call(n,f),lr(v)},abortItem:function(e){return function(e,t,n){return dr(e,t,n)}(v,e,lr)},abortBatch:function(e){!function(e,t,n){var r,a=e.getState().batches[t],u=null==a?void 0:a.batch;u&&u.state!==C.CANCELLED&&u.state!==C.FINISHED&&(oe()(r=u.items).call(r,(function(t){return dr(e,t.id,n)})),e.updateState((function(e){Bn(e,t).state=C.ABORTED})),Xn(e,t,Un.BATCH_ABORT))}(v,e,lr)},abortAll:function(){var e,t,n,r;t=lr,r=(e=v).getState().items,oe()(n=ae()(r)).call(n,(function(n){return dr(e,n,t)}))}}},pr=function(e,t,n,a){!function(e,t,n,a){oe()(e).call(e,(function(e){var u,o;r.debugLog(q()(u=q()(o="uploady.uploader.processor: file: ".concat(e.id," progress event: loaded(")).call(o,n,") - completed(")).call(u,t,")")),a(Pn.ITEM_PROGRESS,e,t,n)}))}(e,Math.min(n.loaded/n.total*100,100)/e.length,n.loaded/e.length,a),a(Pn.BATCH_PROGRESS,t)},vr=function(e,t,n){var r=K(e),a=function(){var e=bn({send:function(e,n,r){var a=r.destination,u=null==a?void 0:a.url;if(!u)throw new Error("Destination URL not found! Can't send files without it");var o=w()((function(r){return pr(e,n,r,t)}),50,!0),i=ge(r.send)?r.send:Ye;return i(e,u,{method:(null==a?void 0:a.method)||r.method||Cn.method,paramName:(null==a?void 0:a.filesParamName)||r.inputFieldName||"file",params:He()(He()({},r.params),null==a?void 0:a.params),forceJsonResponse:r.forceJsonResponse,withCredentials:r.withCredentials,formatGroupParamName:r.formatGroupParamName,headers:null==a?void 0:a.headers,sendWithFormData:r.sendWithFormData},o)}},Qt()(Pn)),t=e.trigger;return e.target}(),u=fr(t,r,e,a,n);return{process:function(e,t){u.uploadBatch(e,t)},abortBatch:function(e){u.abortBatch(e)},abort:function(e){e?u.abortItem(e):u.abortAll()}}},hr=Qt()(Un),gr=0,mr=function(e){var t="uploader-".concat(gr+=1),n=!1,a=[],u={};r.debugLog("uploady.uploader: creating new instance (".concat(t,")"),{options:e,counter:gr});var o=function(e){return He()(He()(He()({},Cn),e),{},{destination:e&&e.destination?(t=e.destination,He()({filesParamName:"file",params:{}},t)):null});var t}(e),i=bn({id:t,update:function(e){return o=Ae({},o,e),s},add:function(){var e=G()(N.a.mark((function e(t,n){var u,i,d;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=Ae({},o,n),!(i=xn(t,s.id,u)).items.length){e.next=9;break}return e.next=5,l(Un.BATCH_ADD,i,u);case 5:e.sent?(i.state=C.CANCELLED,c(Un.BATCH_CANCEL,i)):(r.debugLog(q()(d="uploady.uploader [".concat(s.id,"]: new items added - auto upload = ")).call(d,String(u.autoUpload)),i.items),u.autoUpload?f.process(i,u):a.push({batch:i,uploadOptions:u})),e.next=10;break;case 9:r.debugLog("uploady.uploader: no items to add. batch ".concat(i.id," is empty. check fileFilter if this isn't intended"));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),upload:function(){var e;oe()(e=dt()(a).call(a,0)).call(e,(function(e){var t=e.batch,n=e.uploadOptions;return f.process(t,n)}))},abort:function(e){f.abort(e)},abortBatch:function(e){f.abortBatch(e)},getOptions:function(){return Ue(o)},getPending:function(){return Be()(a).call(a)},clearPending:function(){dt()(a).call(a,0)},registerExtension:function(e,t){O()(n,"Uploady - uploader extensions can only be registered by enhancers"),O()(!u[e],"Uploady - uploader extension by this name [%s] already exists",e),r.debugLog("uploady.uploader: registering extension: ".concat(e.toString()),t),u[e]=t},getExtension:function(e){return u[e]}},hr,{canAddEvents:!1,canRemoveEvents:!1}),c=i.trigger,s=i.target,l=K(c);if(o.enhancer){n=!0;var d=o.enhancer(s,c);n=!1,s=d||s}var f=vr(c,o,s.id);return Re(s)},br=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return pe()(t).call(t,(function(e,t){var n;return t.apply(void 0,q()(n=[e]).call(n,r))||e}),e)}},Sr=mr,Er=$()("__upldy-retry__"),yr="RETRY_EVENT",Rr=function(e,t,n,r,a){var u,o=t.getState().failed;r=r||ae()(o);var i,c=pt()(u=Ee()(r).call(r,(function(e){return o[e]}))).call(u,Boolean);c.length&&(a=He()(He()({},a||null),{},{autoUpload:void 0===(null===(i=a)||void 0===i?void 0:i.autoUpload)||a.autoUpload}),n(yr,{items:ht(c),options:a}),oe()(r).call(r,(function(e){return function(e,t){e.updateState((function(e){var n,r,a=e.failed[t].batchId;delete e.failed[t];var u=x()(n=e.batchIdsMap[a]).call(n,t);dt()(r=e.batchIdsMap[a]).call(r,u,1),e.batchIdsMap[a].length||delete e.batchIdsMap[a]}))}(t,e)})),e.add(c,a));return!!c.length},Ir=function(e,t,n,a,u){var o;return a?o=function(e,t,n,a,u){return r.debugLog("uploady.retry: about to retry item: ".concat(a)),Rr(e,t,n,[a],u)}(e,t,n,a,u):(r.debugLog("uploady.retry: about to retry all failed item"),o=Rr(e,t,n,null,u)),o},Lr=function(e,t){var n,a,u,o=(n=gt({batchIdsMap:{},failed:{}}),a=n.state,u=n.update,{updateState:function(e){u(e)},getState:function(){return a}});return function(e,t){var n=function(e){t.updateState((function(t){t.failed[e.id]=e,(t.batchIdsMap[e.batchId]=t.batchIdsMap[e.batchId]||[]).push(e.id)}))};e.on(Un.ITEM_ERROR,n),e.on(Un.ITEM_ABORT,n)}(e,o),e.registerExtension(Er,{retry:function(n,r){return Ir(e,o,t,n,r)},retryBatch:function(n,a){return function(e,t,n,a,u){var o;r.debugLog("uploady.retry: about to retry batch: ".concat(a));var i=null===(o=t.getState().batchIdsMap[a])||void 0===o?void 0:Be()(o).call(o);return!!i&&Rr(e,t,n,i,u)}(e,o,t,n,a)}}),e},Or=Lr,kr=n("MAKL"),wr=n.n(kr),Cr=function(e){var t=!1;!function(){try{if(e in window){window[e].setItem("__lsTest","__test-".concat(wr()())),window[e].removeItem("__lsTest"),t=!0}}catch(e){}}();var n=["key","getItem","setItem","removeItem","clear"],r=pe()(n).call(n,(function(n,r){return n[r]=function(){var n;return t?(n=window[e])[r].apply(n,arguments):null},n}),{});return r.isSupported=t,Y()(r,"length",{get:function(){return t?window[e].length:0}}),r},Tr=Cr("localStorage"),Dr=Cr("sessionStorage"),xr=Re(He()(He()({},We),{},{featureDetection:!1,featureDetectionUrl:null,version:"1.0.0",resume:!0,overrideMethod:!1,deferLength:!1,sendDataOnCreate:!1,storagePrefix:"__rpldy-tus__",lockedRetryDelay:2e3,forgetOnSuccess:!1,ignoreModifiedDateInStorage:!1})),_r=n("WxoT"),Ar=n.n(_r),Ur=function(e,t,n){var r,a,u=pt()(r=[e.file.name,e.file.type,e.file.size,t.ignoreModifiedDateInStorage?null:e.file.lastModified,n]).call(r,Boolean).join("/");return q()(a="".concat(t.storagePrefix||xr.storagePrefix)).call(a,u)},Pr=function(e,t,n,r){n.resume&&Tr.setItem(Ur(e,n,r),Ar()({time:wr()(),uploadUrl:t}))},Nr=function(e,t,n){var a,u=Ur(e,t,n);if(t.resume)try{var o=Tr.getItem(u);if(o)a=JSON.parse(o).uploadUrl}catch(e){r.debugLog("tusSender.resumableStore: failed to retrieve persisted data for key: ".concat(u),e)}return a},Br=function(e,t,n){var r=Ur(e,t,n);Tr.removeItem(r)},Fr=function(e){for(var t=e.storagePrefix||xr.storagePrefix,n=0;n<Tr.length;n++){var r=Tr.key(n);r&&!x()(r).call(r,t)&&Tr.removeItem(r)}},Hr=n("lHQ6"),Mr=n.n(Hr),jr=$()("__upldy-tus__"),qr="rpldy-tus-sender",zr=[200,201,204],Gr="creation-with-upload",Kr="concatenation",Qr="creation-defer-length",Xr=function(e){var t=e.params&&ae()(e.params);return(null==t?void 0:t.length)?Ee()(t).call(t,(function(t){var n;return q()(n="".concat(t," ")).call(n,btoa(e.params[t]))})).join(","):void 0},Vr=function(e,t,n,a,u){var o,i=n.getState().options,c=He()({"tus-resumable":i.version,"Upload-Defer-Length":i.deferLength?1:void 0,"Upload-Length":i.deferLength?void 0:e.file.size,"Upload-Metadata":u?void 0:Xr(a),"Content-Type":i.sendDataOnCreate?"application/offset+octet-stream":void 0},a.headers),s=null;if(r.debugLog(q()(o="tusSender.create - creating upload for ".concat(e.id," at: ")).call(o,t)),i.sendDataOnCreate){r.debugLog("tusSender.create - adding first chunk to create request");var l=+i.chunkSize;s=l<e.file.size?$e(e.file,0,l):e.file}var d=he(t,s,{method:"POST",headers:c}),f=!1;return{request:d.then((function(a){var u=null;return a&&~x()(zr).call(zr,a.status)?u=function(e,t,n,a,u){var o,i,c,s=n.getState().options,l=(i=t,c=a.getResponseHeader("Location"),/^(http:|https:)?\/\//.test(c)?c:[i.replace(/\/$/,""),c.replace(/^\//,"")].join("/")),d=0,f=!1;if(r.debugLog(q()(o="tusSender.create: successfully created upload for item: ".concat(e.id," - upload url = ")).call(o,l)),s.sendDataOnCreate){var p=Mr()(a.getResponseHeader("Upload-Offset"));d=isNaN(p)?d:p,f=+s.parallel>1&&d===(null==u?void 0:u.size)}return n.updateState((function(t){t.items[e.id].uploadUrl=l,t.items[e.id].offset=d})),{offset:d,uploadUrl:l,isNew:!0,isDone:f}}(e,t,n,a,s):r.debugLog("tusSender.create: create upload failed for item: ".concat(e.id),a),u})).catch((function(e){return r.debugLog("tusSender.create: create upload failed",e),null})).finally((function(){f=!0})),abort:function(){return f||(r.debugLog("tusSender.create: aborting create request for item: ".concat(e.id)),d.xhr.abort()),!f}}},Yr=function(e,t,n,a){var u,o=!1,i=!1;r.debugLog(q()(u="tusSender.resume - successfully initiated resume for item: ".concat(e.id," - upload url = ")).call(u,t));var c=Mr()(a.getResponseHeader("Upload-Offset"));if(!isNaN(c)){var s=Mr()(a.getResponseHeader("Upload-Length"));isNaN(s)&&!n.getState().options.deferLength||(o=!(i=c===s),n.updateState((function(n){n.items[e.id].uploadUrl=t,n.items[e.id].offset=c})))}return{offset:c,uploadUrl:t,isNew:!1,isDone:i,canResume:o}},Wr=function(e,t,n,r,a){return new M.a((function(u){yn()((function(){Zr(e,t,n,r,a).request.then(u)}),n.getState().options.lockedRetryDelay)}))},Jr=function(e,t,n){return Br(e,t,n),{isNew:!1,canResume:!1}},Zr=function(e,t,n,a,u){var o,i,c=n.getState().options;r.debugLog(q()(o=q()(i="tusSender.resume - resuming upload for ".concat(e.id)).call(i,a?"-".concat(a):""," at: ")).call(o,t));var s=he(t,null,{method:"HEAD",headers:{"tus-resumable":c.version}}),l=!1;return{request:s.then(function(){var o=G()(N.a.mark((function o(i){var s,l,d;return N.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!i||!~x()(zr).call(zr,i.status)){o.next=4;break}s=Yr(e,t,n,i),o.next=13;break;case 4:if(423!==(null==i?void 0:i.status)||0!==u){o.next=11;break}return r.debugLog(q()(l="tusSender.resume: upload is locked for item: ".concat(e.id,". Will retry in ")).call(l,+c.lockedRetryDelay),i),o.next=8,Wr(e,t,n,a,1);case 8:s=o.sent,o.next=13;break;case 11:r.debugLog(q()(d="tusSender.resume: failed for item: ".concat(e.id)).call(d,a?"-".concat(a):""),i),s=Jr(e,c,a);case 13:return o.abrupt("return",s);case 14:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()).catch((function(t){return r.debugLog("tusSender.resume: resume upload failed unexpectedly",t),Jr(e,c,a)})).finally((function(){l=!0})),abort:function(){return l||(r.debugLog("tusSender.resume: aborting resume request for item: ".concat(e.id)),s.xhr.abort()),!l}}},$r=function(e,t,n,r){return Zr(e,t,n,r,0)},ea=function(){var e=G()(N.a.mark((function e(t,n,a,u,o){var i,c,s,l,d,f,p,v,h,g,m,b,S,E;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o;case 2:if((i=e.sent).state!==T.FINISHED){e.next=27;break}if(c=a.getState(),s=c.options,l=c.items,!(d=l[t.id])){e.next=27;break}if(p=d.parallelChunks,(v=Ee()(f=pt()(p).call(p,(function(e){var t;return null===(t=l[e])||void 0===t?void 0:t.uploadUrl}))).call(f,(function(e){return l[e].uploadUrl}))).length===p.length){e.next=10;break}throw new Error(q()(h="tusSender: something went wrong. found only ".concat(v.length," upload urls for ")).call(h,p.length," chunks"));case 10:return g={"tus-resumable":s.version,"Upload-Concat":"final;".concat(v.join(" ")),"Upload-Metadata":Xr(u)},r.debugLog("tusSender.finalizeParallel: sending finalizing request",{url:n,headers:g}),m=he(n,null,{method:"POST",headers:g}),a.updateState((function(e){e.items[t.id].abort=function(){return m.xhr.abort(),!0}})),e.prev=14,e.next=17,m;case 17:b=e.sent,e.next=24;break;case 20:e.prev=20,e.t0=e.catch(14),r.debugLog("tusSender.finalizeParallel: finalize request failed unexpectedly!",e.t0),b={status:0,response:e.t0.message||e.t0};case 24:S=b&&!!~x()(zr).call(zr,b.status),(E=S&&b.getResponseHeader&&b.getResponseHeader("Location"))?r.debugLog("tusSender.finalizeParallel: successfully finalized parallel upload",E):(r.debugLog("tusSender.finalizeParallel: parallel upload finalize failed!",b.status),i={status:b.status,state:T.ERROR,response:b.response||(S&&!E?"No valid location header for finalize request":"")});case 27:return e.abrupt("return",i);case 28:case"end":return e.stop()}}),e,null,[[14,20]])})));return function(t,n,r,a,u){return e.apply(this,arguments)}}(),ta=function(e,t,n,a,u,o,i){var c=u.getState().options,s=e[0];r.debugLog("tusSender.handler: init request finished. sending item ".concat(s.id," as chunked"),i),i.isNew&&i.uploadUrl&&Pr(s,i.uploadUrl,c),(i.canResume||c.sendDataOnCreate&&i.offset)&&(n=He()(He()({},n),{},{startByte:i.offset}));var l=o.send(e,t,n,a);return u.updateState((function(e){e.items[s.id].abort=l.abort})),+c.parallel>1?ea(s,t,u,n,l.request):l.request},na=function(e,t,n,a){var u=e[0];return n.uploadUrl&&Pr(u,n.uploadUrl,t.getState().options,a),r.debugLog("tusSender.handler: created upload for parallelized chunk: ".concat(u.id)),M.a.resolve({status:200,state:T.UPLOADING,response:"TUS server created upload for parallelized part"})},ra=function(){var e=G()(N.a.mark((function e(t,n,a,u,o,i,c,s,l){var d,f,p,v,h;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c;case 2:if(d=e.sent,p=!1,d?d.isDone?(r.debugLog("tusSender.handler: resume found server has completed file for item: ".concat(t[0].id),t[0]),f=M.a.resolve({status:200,state:T.FINISHED,response:"TUS server has file"})):d.isNew||d.canResume?f=l?na(t,o,d,l):ta(t,n,a,u,o,i,d):p=!0:p=s,!p){e.next=11;break}return r.debugLog("tusSender.handler: resume init failed. Will try creating a new upload for item: ".concat(t[0].id)),v=Vr(t[0],n,o,a),h=v.request,e.next=10,ra(t,n,a,u,o,i,h);case 10:f=e.sent;case 11:return e.abrupt("return",f||M.a.resolve({status:0,state:T.ERROR,response:"TUS initialize failed"}));case 12:case"end":return e.stop()}}),e)})));return function(t,n,r,a,u,o,i,c,s){return e.apply(this,arguments)}}(),aa=ra,ua=function(e,t){t.updateState((function(t){t.items[e.id]={id:e.id,uploadUrl:null,size:e.file.size,offset:0,parallelChunks:[]}}))},oa=function(e,t,n,a,u,o){var i,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=u.getState(),l=s.options,d=+l.parallel>1&&!c,f=e[0],p=!d&&Nr(f,l,c);ua(f,u),i=d?{request:M.a.resolve({isNew:!0}),abort:function(){return!0}}:p?$r(f,p,u,c):Vr(f,t,u,n,c);var v=aa(e,t,n,a,u,o,i.request,!!p,c),h=function(){return r.debugLog("tusSender.handler: abort called for item: ".concat(f.id)),i.abort(),i.request.then((function(e){if(e){r.debugLog("tusSender.handler: aborting chunked upload for item:  ".concat(f.id));var t=u.getState().items[f.id].abort;t&&t()}})),!0};return{request:v,abort:h}},ia=function(e,t){var n;return q()(n="_prlChunk_".concat(+e.chunkSize,"_")).call(n,t)},ca=function(){var e=G()(N.a.mark((function e(t,n,r){var a,u,o,i,c,s,l,d,f,p;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.item,u=r.chunkItem,o=r.url,i=r.sendOptions,c=r.onProgress,s=r.chunk,l=t.getState(),d=l.options,t.updateState((function(e){e.items[a.id].parallelChunks.push(u.id)})),f=oa([u],o,He()(He()({},i),{},{params:null}),c,t,n,ia(d,s.index)),e.next=6,f.request;case 6:return p=e.sent,e.abrupt("return",p.state!==T.FINISHED);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),sa=function(e,t,n){var a=t.item,u=t.chunk,o=t.chunkItem,i=t.chunkCount,c=e.getState().options,s=e.getState().items[n?o.id:a.id],l=n?0:s.offset||u.start,d={"tus-resumable":c.version,"Upload-Offset":l,"Content-Type":"application/offset+octet-stream","Content-Range":void 0,"X-HTTP-Method-Override":c.overrideMethod?"PATCH":void 0,"Upload-Length":c.deferLength&&u.index===i-1?a.file.size:void 0,"Upload-Concat":n?"partial":void 0};return r.debugLog("tusSender.handleEvents: chunk start handler. offset = ".concat(l),{headers:d,url:s.uploadUrl}),{sendOptions:{sendWithFormData:!1,method:c.overrideMethod?"POST":"PATCH",headers:d},url:s.uploadUrl}},la=function(e){var t;return q()(t="".concat("rpldy_tus_fd_")).call(t,e)},da=(hn={},Ft()(hn,Kr,(function(e,t){+t.getState().options.parallel>1&&!~x()(e).call(e,Kr)&&(r.debugLog("tusSender.featureDetection: disabling parallel uploads, ".concat(Kr," extension not available")),t.updateState((function(e){e.options.parallel=1})))})),Ft()(hn,Gr,(function(e,t){t.getState().options.sendDataOnCreate&&!~x()(e).call(e,Gr)&&(r.debugLog("tusSender.featureDetection: disabling create with data, ".concat(Gr," extension not available")),t.updateState((function(e){e.options.sendDataOnCreate=!1})))})),Ft()(hn,Qr,(function(e,t){t.getState().options.deferLength&&!~x()(e).call(e,Qr)&&(r.debugLog("tusSender.featureDetection: disabling defer length, ".concat(Qr," extension not available")),t.updateState((function(e){e.options.deferLength=!1})))})),hn),fa=function(e,t,n){var a=e.getState().options;if(t){r.debugLog("tusSender.featureDetection: retrieved extensions from server",t);var u=t.split(",");if(u.length&&a.onFeaturesDetected){var o=a.onFeaturesDetected(u);o&&e.updateState((function(e){e.options=Ae({},e.options,o)}))}else{var i;oe()(i=ae()(da)).call(i,(function(t){da[t](u,e)}))}}n&&n!==e.getState().options.version&&(r.debugLog("tusSender.featureDetection: setting version to server version: ".concat(n)),e.updateState((function(e){e.options.version=n}))),e.updateState((function(e){e.featureDetection={processed:!0,version:n,extensions:t}}))},pa=function(){var e=G()(N.a.mark((function e(t,n,a){var u,o,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:u=e.sent,~x()(zr).call(zr,u.status)&&(o=u.getResponseHeader("Tus-Extension"),i=u.getResponseHeader("Tus-Resumable"),o&&Dr.setItem(la(n),Ar()({extensions:o,versions:i})),fa(a,o,i)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r.debugLog("tusSender.featureDetection: failed to retrieve data from server",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),va=function(e,t){var n=t.getState().options,r=he(e,null,{method:"OPTIONS",headers:{"tus-resumable":n.version}});return{request:pa(r,e,t),abort:function(){return r.xhr.abort(),!0}}},ha=function(e,t){var n,a=t.getState(),u=a.options,o=a.featureDetection;e=u.featureDetectionUrl||e,r.debugLog("tusSender.featureDetection: about to request server info",e);var i=Dr.getItem(la(e));return o.processed||(n=i?function(e,t,n){var a;try{(a=JSON.parse(n)).extensions?(r.debugLog("tusSender.featureDetection: retrieved feature detection data from session storage",a),fa(t,a.extensions,a.version)):a=null}catch(e){r.debugLog("tusSender.featureDetection: failed to load feature detection data from session storage")}return a||Dr.removeItem(la(e)),a?null:va(e,t)}(e,t,i):va(e,t)),n},ga=function(e,t){return Ze?function(n,a,u,o){var i;if(n.length>1||n[0].url)i=e.send(n,a,u,o);else{r.debugLog("tusSender: sending file using TUS protocol");var c=t.getState().options.featureDetection?ha(a,t):null,s=function(e,t,n,r,a,u,o){var i,c=function(){var o=oa(e,t,n,r,a,u);return i=o.abort,o.request};return{request:o?o.request.then(c,c):c(),abort:function(){return i?i():(null==o?void 0:o.abort())||!1}}}(n,a,u,o,t,e,c);i={request:s.request,abort:s.abort,senderType:qr}}return i}:Ye},ma=function(e){return((e=function(e){return Ae({},xr,e)}(e)).sendDataOnCreate||e.parallel)&&e.deferLength&&(r.debugLog("tusSender: turning off deferLength - cannot be used when sendDataOnCreate or parallel is enabled"),e.deferLength=!1),e.chunked=!0,e},ba=function(e,t,n){t=ma(t);var a=Ut(t,n),u=function(e,t){var n=gt({options:t,items:{},featureDetection:{extensions:null,version:null,processed:!1}}),a=n.state,u={getState:function(){return a},updateState:n.update};return r.isDebugOn()&&(window["__rpldy_".concat(e.id,"_tus_state")]=u),u}(e,t);return function(e,t,n){Ze&&(e.on(Un.ITEM_FINALIZE,(function(e){var n=t.getState(),a=n.items,u=n.options,o=a[e.id];if(o){var i;r.debugLog(q()(i="tusSender.handleEvents: item ".concat(e.id," finalized (")).call(i,e.state,"). Removing from state"));var c=o.parallelChunks;t.updateState((function(t){c.length&&oe()(c).call(c,(function(e){delete t.items[e]})),delete t.items[e.id]})),u.forgetOnSuccess&&(r.debugLog("tusSender.handleEvents: forgetOnSuccess enabled, removing item url from storage: ".concat(e.id)),Br(e,u))}})),e.on(mt.CHUNK_START,function(){var e=G()(N.a.mark((function e(r){var a,u,o,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getState(),u=a.options,o=+u.parallel>1,e.t0=!o,e.t0){e.next=6;break}return e.next=5,ca(t,n,r);case 5:e.t0=e.sent;case 6:return i=e.t0,e.abrupt("return",i&&sa(t,r,o));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.on(mt.CHUNK_FINISH,(function(e){var n=e.item,a=e.chunk,u=e.uploadData,o=t.getState(),i=o.items,c=o.options;if(+c.parallel>1){if(c.forgetOnSuccess){var s=ia(c,a.index);r.debugLog("tusSender.handleEvents: forgetOnSuccess enabled, removing parallel chunk url from storage: ".concat(s)),Br(n,c,s)}}else if(i[n.id]){var l,d,f=u.status,p=u.response;r.debugLog(q()(l=q()(d="tusSender.handleEvents: received upload response (code: ".concat(f,") for : ")).call(d,n.id,", chunk: ")).call(l,a.id),p),~x()(zr).call(zr,f)&&p.headers&&t.updateState((function(e){e.items[n.id].offset=p.headers["upload-offset"]}))}})))}(e,u,a),{send:ga(a,u),getOptions:function(){return u.getState().options}}},Sa=function(e){return function(t,n){var r=ba(t,e,n);return t.update({send:r.send}),t.registerExtension(jr,{getOptions:r.getOptions}),t}},Ea=Sa,ya=n("EcSs"),Ra=n.n(ya),Ia=n("tpxy"),La=n.n(Ia),Oa=n("cDcd"),ka=n.n(Oa),wa=function(e,t){var n,a;t?n=t:r.debugLog("Uploady context - didn't receive input field ref - waiting for external ref");var u=function(){var e;return null===(e=n)||void 0===e?void 0:e.current},o=function e(){var t=u();O()(t,"Uploady - Context. File input isn't available"),t.removeEventListener("change",e);var n=a;a=null,i(t.files,n)},i=function(t,n){e.add(t,n)};return{hasUploader:function(){return!!e},setExternalFileInput:function(e){n=e},showFileUpload:function(e){var t=u();O()(t,"Uploady - Context. File input isn't available"),a=e,t.removeEventListener("change",o),t.addEventListener("change",o),t.value="",t.click()},upload:i,processPending:function(){e.upload()},setOptions:function(t){e.update(t)},getOptions:function(){return e.getOptions()},getExtension:function(t){return e.getExtension(t)},abort:function(t){e.abort(t)},abortBatch:function(t){e.abortBatch(t)},on:function(t,n){return e.on(t,n)},once:function(t,n){return e.once(t,n)},off:function(t,n){return e.off(t,n)}}},Ca=ka.a.createContext(null),Ta=function(e){var t=Object(Oa.useRef)(null),n=Object(Oa.useCallback)((function(n){e&&(ge(e)?e(n):e.current=n),t.current=n}),[e]);return{ref:t,setRef:n}},Da=function(e){return O()(e&&e.hasUploader(),"Uploady - valid UploadyContext not found. Make sure you render inside <Uploady>"),e},xa=function(e){var t=Da(Object(Oa.useContext)(Ca));return e&&t.setOptions(e),t.getOptions()},_a=function(){var e=Da(Object(Oa.useContext)(Ca));return Object(Oa.useCallback)((function(t){return e.abort(t)}),[e])},Aa=function(){var e=Da(Object(Oa.useContext)(Ca));return Object(Oa.useCallback)((function(t){return e.abortBatch(t)}),[e])},Ua=function(){var e=Da(Object(Oa.useContext)(Ca));return Object(Oa.useCallback)((function(){return e.abort()}),[e])},Pa=n("faye"),Na=n.n(Pa),Ba=Object(Oa.memo)(Object(Oa.forwardRef)((function(e,t){var n=e.uploader,r=e.container,a=La()(e,["uploader","container"]),u=n.getOptions(),o=r&&1===r.nodeType;return O()(o,"Uploady - Container for file input must be a valid dom element"),r&&o?Na.a.createPortal(ka.a.createElement("input",Ra()({},a,{name:u.inputFieldName,type:"file",ref:t})),r):null}))),Fa=function(e){var t=e.multiple,n=void 0===t||t,a=e.capture,u=e.accept,o=e.webkitdirectory,i=e.listeners,c=e.debug,s=e.children,l=e.inputFieldContainer,d=e.customInput,f=e.fileInputId,p=La()(e,["multiple","capture","accept","webkitdirectory","listeners","debug","children","inputFieldContainer","customInput","fileInputId"]);r.setDebug(!!c),r.debugLog("@@@@@@ Uploady Rendering @@@@@@",e);var v=l||document.body,h=Object(Oa.useRef)(),g=function(e,t){var n=Object(Oa.useMemo)((function(){return r.debugLog("Uploady creating a new uploader instance",e),Sr(e)}),[e.enhancer]);return n.update(e),Object(Oa.useEffect)((function(){var e;t&&(r.debugLog("Uploady setting event listeners",t),oe()(e=qe()(t)).call(e,(function(e){var t=se()(e,2),r=t[0],a=t[1];n.on(r,a)})));return function(){var e;t&&(r.debugLog("Uploady removing event listeners",t),oe()(e=qe()(t)).call(e,(function(e){var t=se()(e,2),r=t[0],a=t[1];return n.off(r,a)})))}}),[t,n]),n}(p,i),m=Object(Oa.useMemo)((function(){return wa(g,d?null:h)}),[g,h,d]);return ka.a.createElement(Ca.Provider,{value:m},d?null:ka.a.createElement(Ba,{container:v,uploader:g,multiple:n,capture:a,accept:u,webkitdirectory:o,style:{display:"none"},ref:h,id:f}),s)},Ha=n("pPxq"),Ma=n.n(Ha),ja=function(e){var t=e.closest("form"),n={filesParamName:e.getAttribute("name"),method:void 0,url:void 0};if(t){var a,u=t.getAttribute("method"),o=function(e){var t,n,r,a,u,o,i,c,s=window.location,l=e.getAttribute("action")||"";switch(l=l.replace(/\s/g,""),!0){case""===l:l=s.href;break;case Ma()(l).call(l,"/"):l=q()(t=q()(n="".concat(s.protocol,"//")).call(n,s.host)).call(t,l);break;case!/:\/\//.test(l):c=q()(r=Be()(a=s.pathname.split("/")).call(a,0,-1)).call(r,"").join("/"),l=q()(u=q()(o=q()(i="".concat(s.protocol,"//")).call(i,s.host)).call(o,c)).call(u,l)}return l}(t);n.method=u?u.toUpperCase():void 0,n.url=o,r.debugLog(q()(a="Uploady.useFileInput: using custom input's parent form url ".concat(n.url," and method ")).call(a,n.method||""))}return n},qa=function(e){var t=Da(Object(Oa.useContext)(Ca));t.setExternalFileInput(e),Object(Oa.useEffect)((function(){if(e.current&&e.current.closest){var n=e.current,r=t.getOptions();if(!r.destination||!r.destination.url){var a=ja(n);t.setOptions({destination:a})}}}),[e,t])},za=function(e){return function(t){var n=Da(Object(Oa.useContext)(Ca)),r=t.id,a=Object(Oa.useState)({update:null,data:null}),u=se()(a,2),o=u[0],i=u[1];return Object(Oa.useLayoutEffect)((function(){var e=function e(t){var a;return be()(a=t.items).call(a,(function(e){return e.id===r}))&&new M.a((function(r){i((function(){return{update:function(t){n.off(Un.REQUEST_PRE_SEND,e),r(t)},data:t}}))}))};return r&&n.on(Un.REQUEST_PRE_SEND,e),function(){r&&n.off(Un.REQUEST_PRE_SEND,e)}}),[n,r]),ka.a.createElement(e,Ra()({},t,{updateRequest:o.update,requestData:o.data}))}},Ga=Fa,Ka=function(e,t){var n=Da(Object(Oa.useContext)(Ca)),r=n.on,a=n.off;Object(Oa.useEffect)((function(){return r(e,t),function(){a(e,t)}}),[e,t,r,a])},Qa=function(e,t){return function(n,r){var a=Object(Oa.useState)(null),u=se()(a,2),o=u[0],i=u[1],c=Object(Oa.useCallback)((function(e){if(!r||e.id===r){for(var a,u,o=arguments.length,c=new Array(o>1?o-1:0),s=1;s<o;s++)c[s-1]=arguments[s];if(i(t.apply(void 0,q()(a=[e]).call(a,c))),n)n.apply(void 0,q()(u=[e]).call(u,c))}}),[n,r]);return Ka(e,c),o}},Xa=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n,r){var a=Object(Oa.useCallback)((function(e){for(var a,u=arguments.length,o=new Array(u>1?u-1:0),i=1;i<u;i++)o[i-1]=arguments[i];return!n||t&&r&&e.id!==r?void 0:n.apply(void 0,q()(a=[e]).call(a,o))}),[n,r]);Ka(e,a)}},Va=function(e,t){0},Ya=Xa(Un.BATCH_ADD,!1),Wa=Xa(Un.BATCH_START),Ja=Xa(Un.BATCH_FINISH),Za=Xa(Un.BATCH_CANCEL),$a=Xa(Un.BATCH_ABORT),eu=Qa(Un.BATCH_PROGRESS,(function(e){return He()({},e)})),tu=Xa(Un.ITEM_START),nu=Xa(Un.ITEM_FINISH),ru=Xa(Un.ITEM_CANCEL),au=Xa(Un.ITEM_ERROR),uu=Xa(Un.ITEM_ABORT),ou=Xa(Un.ITEM_FINALIZE),iu=Qa(Un.ITEM_PROGRESS,(function(e){return He()({},e)})),cu=Xa(Un.REQUEST_PRE_SEND,!1);Va(Ze,"This browser doesn't support chunking. Consider using @rpldy/uploady instead");var su=function(e){var t=e.chunked,n=e.chunkSize,r=e.retries,a=e.parallel,u=La()(e,["chunked","chunkSize","retries","parallel"]),o=Object(Oa.useMemo)((function(){return Ze?function(e,t){var n=Nt(e);return t?br(n,t):n}({chunked:t,chunkSize:n,retries:r,parallel:a},e.enhancer):void 0}),[e.enhancer,t,n,r,a]);return ka.a.createElement(Ga,Ra()({},u,{enhancer:o}))},lu=Xa(mt.CHUNK_START,!1),du=Xa(mt.CHUNK_FINISH,!1),fu=su,pu="Uploady - retry was not registered. Make sure you used the enhancer",vu=function(){var e=Da(Object(Oa.useContext)(Ca)).getExtension(Er);return O()(e,pu),e.retry},hu=function(){var e=Da(Object(Oa.useContext)(Ca)).getExtension(Er);return O()(e,pu),e.retryBatch},gu=Xa(yr,!1),mu=Or;Va(Ze,"This browser doesn't support chunking. Consider using @rpldy/uploady instead");var bu=function(e){var t=e.chunked,n=e.chunkSize,r=e.retries,a=e.parallel,u=e.version,o=e.featureDetection,i=e.featureDetectionUrl,c=e.onFeaturesDetected,s=e.resume,l=e.deferLength,d=e.overrideMethod,f=e.sendDataOnCreate,p=e.storagePrefix,v=e.lockedRetryDelay,h=e.forgetOnSuccess,g=e.ignoreModifiedDateInStorage,m=La()(e,["chunked","chunkSize","retries","parallel","version","featureDetection","featureDetectionUrl","onFeaturesDetected","resume","deferLength","overrideMethod","sendDataOnCreate","storagePrefix","lockedRetryDelay","forgetOnSuccess","ignoreModifiedDateInStorage"]),b=Object(Oa.useMemo)((function(){return Ze?function(e,t){var n=Sa(e);return t?br(n,t):n}({chunked:t,chunkSize:n,retries:r,parallel:a,version:u,featureDetection:o,featureDetectionUrl:i,onFeaturesDetected:c,resume:s,deferLength:l,overrideMethod:d,sendDataOnCreate:f,storagePrefix:p,lockedRetryDelay:v,forgetOnSuccess:h,ignoreModifiedDateInStorage:g},e.enhancer):void 0}),[e.enhancer,t,n,r,a,u,o,i,c,s,l,d,f,p,v,h,g]);return ka.a.createElement(Ga,Ra()({},m,{enhancer:b}))},Su=function(){var e=Da(Object(Oa.useContext)(Ca)).getExtension(jr);return O()(e,"Uploady - tus was not registered. Make sure you used the enhancer"),function(){return Fr(e.getOptions())}},Eu=bu,yu=function(e){var t=function(t,n){var r=Da(Object(Oa.useContext)(Ca)).showFileUpload,a=Ta(n).setRef,u=t.id,o=t.className,i=t.text,c=t.children,s=t.extraProps,l=La()(t,["id","className","text","children","extraProps"]),d=Object(Oa.useRef)();d.current=l;var f=Object(Oa.useCallback)((function(){r(d.current)}),[r,d]);return ka.a.createElement(e,Ra()({ref:a,onClick:f,id:u,className:o,children:c||i||"Upload"},s))};return Object(Oa.forwardRef)(t)},Ru=yu(Object(Oa.forwardRef)((function(e,t){return ka.a.createElement("button",Ra()({ref:t},e))}))),Iu=Ru,Lu=n("ALC1"),Ou=Object(Oa.forwardRef)((function(e,t){var n=Ta(t),r=n.ref,a=n.setRef,u=Da(Object(Oa.useContext)(Ca)).upload,o=e.className,i=e.id,c=e.children,s=e.onDragOverClassName,l=e.dropHandler,d=e.htmlDirContentParams,f=e.extraProps,p=La()(e,["className","id","children","onDragOverClassName","dropHandler","htmlDirContentParams","extraProps"]),v=Object(Oa.useRef)();v.current=p;var h=Object(Oa.useCallback)((function(){r.current&&s&&r.current.classList.remove(s)}),[s,r]),g=Object(Oa.useCallback)((function(e){return l?l(e):Object(Lu.getFilesFromDragEvent)(e,d||{})}),[l,d]),m=Object(Oa.useCallback)(function(){var e=G()(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t);case 2:n=e.sent,u(n,v.current);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u,g,v]),b=Object(Oa.useCallback)((function(e){e.preventDefault(),r.current&&s&&r.current.classList.add(s)}),[s,r]),S=Object(Oa.useCallback)(function(){var e=G()(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.persist(),h(),e.next=5,m(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[h,m]),E=Object(Oa.useCallback)((function(){h()}),[h]),y=Object(Oa.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),h()}),[h]);return ka.a.createElement("div",Ra()({id:i,className:o,ref:a,onDragOver:b,onDrop:S,onDragLeave:E,onDragEnd:y},f),c)})),ku=Ou,wu={IMAGE:"image",VIDEO:"video"},Cu=n("R8cT"),Tu=n.n(Cu),Du=Re({rememberPreviousBatches:!1,loadFirstOnly:!1,maxPreviewImageSize:2e7,maxPreviewVideoSize:1e8,fallbackUrl:"",imageMimeTypes:["image/jpeg","image/webp","image/gif","image/png","image/apng","image/bmp","image/x-icon","image/svg+xml"],videoMimeTypes:["video/mp4","video/webm","video/ogg"]}),xu=function(e,t){var n=ge(e)?e(t):e;return"string"==typeof n&&(n={url:n,name:t.name,type:wu.IMAGE}),n},_u=function(e,t,n,r){var a;return t&&~x()(t).call(t,r.type)&&(!n||r.size<=n)&&(a={url:Tu.a.createObjectURL(r),name:r.name,type:e}),a},Au=function(e,t,n){var r,a,u=!1;if(e.file){var o=e.file;(r=function(e,t){var n;return(n=_u(wu.IMAGE,t.imageMimeTypes,t.maxPreviewImageSize||0,e))||(n=_u(wu.VIDEO,t.videoMimeTypes,t.maxPreviewVideoSize||0,e)),n}(e.file,t))||(r=xu(t.fallbackUrl,o),u=!0)}else r={url:e.url,name:e.url,type:wu.IMAGE};return r&&(a=ge(n)?n(e,r.url,r.type):n),r&&He()(He()({},r),{},{id:e.id,isFallback:u,props:a})},Uu=function(e){var t,n=Object(Oa.useState)([]),r=se()(n,2),a=r[0],u=r[1],o=(t=e,He()(He()({},Du),t)),i=Object(Oa.useCallback)((function(){u([])}),[]);return Wa((function(t){var n,r,i,c,s,l=o.loadFirstOnly?Be()(n=t.items).call(n,0,1):t.items,d=pt()(r=Ee()(l).call(l,(function(t){return Au(t,o,e.previewComponentProps)}))).call(r,Boolean);u(e.rememberPreviousBatches?(i=a,c=d,s=[],oe()(c).call(c,(function(e){var t=F()(i).call(i,(function(t){return t.id===e.id}));~t?dt()(i).call(i,t,1,e):s.push(e)})),q()(i).call(i,s)):d)})),{previews:a,clearPreviews:i}},Pu=function(e){var t=e.PreviewComponent,n=e.previewMethodsRef,r=e.onPreviewsChanged,a=La()(e,["PreviewComponent","previewMethodsRef","onPreviewsChanged"]),u=Uu(a),o=u.previews,i=u.clearPreviews,c=Object(Oa.useCallback)((function(t){var n=t.target,r=xu(e.fallbackUrl,n.src);r&&(n.src=r.url)}),[e.fallbackUrl]);return function(e,t,n,r){var a=Object(Oa.useMemo)((function(){return{clear:t}}),[t]),u=Ta(n).setRef;(null==n?void 0:n.current)!==a&&u(a),Object(Oa.useEffect)((function(){r&&r(e)}),[e,r])}(o,i,n,r),Ee()(o).call(o,(function(e){var n=e.id,r=e.url,a=e.type,u=e.name,o=e.isFallback,i=e.props;return t?ka.a.createElement(t,Ra()({key:n+r,id:n,url:r,type:a,name:u,isFallback:o},i)):function(e,t,n,r){return e===wu.VIDEO?ka.a.createElement("video",Ra()({key:t,src:t,controls:!0},n)):ka.a.createElement("img",Ra()({key:t,onError:r,src:t},n))}(a,r,i,c)}))},Nu=Pu,Bu=Object(Oa.forwardRef)((function(e,t){var n=Ta(t),r=n.ref,a=n.setRef,u=Da(Object(Oa.useContext)(Ca)),o=e.className,i=e.id,c=e.placeholder,s=e.uploadRef,l=e.validate,d=e.ignoreKeyPress,f=La()(e,["className","id","placeholder","uploadRef","validate","ignoreKeyPress"]),p=Object(Oa.useRef)();p.current=f;var v=Object(Oa.useCallback)((function(){O()(r.current,"Uploady - UploadUrlInput failed to upload, input ref isn't available");var e=r.current,t=e.value;(l?l(t,e):t)&&u.upload(t,p.current)}),[u,l,p,r]),h=Object(Oa.useCallback)((function(e){d||"Enter"!==e.key||v()}),[v,d]);return(0,Ta(s).setRef)(v),ka.a.createElement("input",{type:"text",id:i,ref:a,className:o,onKeyPress:h,placeholder:c})})),Fu=Bu,Hu=Bu},cDcd:function(t,n){t.exports=e},faye:function(e,n){e.exports=t}})}));
//# sourceMappingURL=rpldy-all.umd.min.js.map